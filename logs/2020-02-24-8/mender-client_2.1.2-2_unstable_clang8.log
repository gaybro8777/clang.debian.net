DC-Build-Header: mender-client 2.1.2-2 / 2020-02-24 20:24:07 +0000
DC-Task: type:rebuild-binarch-only source:mender-client version:2.1.2-2 chroot:unstable esttime:358 logfile:/tmp/mender-client_2.1.2-2_unstable_clang8.log modes:clang8:binarch-only
DC-Sbuild-call: su user42 -c 'sbuild -n --arch-any --apt-update -d unstable -v --no-run-lintian --chroot-setup-commands=/tmp/clang8 mender-client_2.1.2-2'
sbuild (Debian sbuild) 0.78.1 (09 February 2019) on ip-172-31-11-173.eu-central-1.compute.internal

+==============================================================================+
| mender-client 2.1.2-2 (amd64)                Mon, 24 Feb 2020 20:24:07 +0000 |
+==============================================================================+

Package: mender-client
Version: 2.1.2-2
Source Version: 2.1.2-2
Distribution: unstable
Machine Architecture: amd64
Host Architecture: amd64
Build Architecture: amd64
Build Type: binary

I: NOTICE: Log filtering will replace 'var/run/schroot/mount/sid-amd64-sbuild-11f384ae-ad7e-4993-829d-411dab6c9aea' with '<<CHROOT>>'

+------------------------------------------------------------------------------+
| Chroot Setup Commands                                                        |
+------------------------------------------------------------------------------+


/tmp/clang8
-----------

+ echo 'Entering customization script...'
Entering customization script...
+ CLANG_VERSION=8
+ echo 'Install of clang-8'
Install of clang-8
+ apt-get update
Get:1 http://127.0.0.1:12990/debian sid InRelease [142 kB]
Get:2 http://127.0.0.1:12990/debian sid/main Sources.diff/Index [27.9 kB]
Get:3 http://127.0.0.1:12990/debian sid/main amd64 Packages.diff/Index [27.9 kB]
Get:4 http://127.0.0.1:12990/debian sid/main Sources 2020-02-24-0823.32.pdiff [11.0 kB]
Get:5 http://127.0.0.1:12990/debian sid/main Sources 2020-02-24-1420.34.pdiff [30.2 kB]
Get:5 http://127.0.0.1:12990/debian sid/main Sources 2020-02-24-1420.34.pdiff [30.2 kB]
Get:6 http://127.0.0.1:12990/debian sid/main amd64 Packages 2020-02-24-0823.32.pdiff [15.5 kB]
Get:7 http://127.0.0.1:12990/debian sid/main amd64 Packages 2020-02-24-1420.34.pdiff [27.5 kB]
Get:7 http://127.0.0.1:12990/debian sid/main amd64 Packages 2020-02-24-1420.34.pdiff [27.5 kB]
Get:8 http://127.0.0.1:12990/debian sid/main Translation-en [6194 kB]
Fetched 6477 kB in 3s (2206 kB/s)
Reading package lists...
+ apt-get install --yes --no-install-recommends --force-yes clang-8 libomp-8-dev libobjc-9-dev
Reading package lists...
Building dependency tree...
The following additional packages will be installed:
  gcc-8-base lib32gcc-s1 lib32gcc1 lib32stdc++6 libbsd0 libc6-i386
  libclang-common-8-dev libclang1-8 libedit2 libgc1c2 libgcc-8-dev libllvm8
  libmpx2 libobjc-8-dev libobjc4 libomp5-8 libstdc++-8-dev
Suggested packages:
  clang-8-doc libomp-8-doc libstdc++-8-doc
Recommended packages:
  llvm-8-dev python3
The following NEW packages will be installed:
  clang-8 gcc-8-base lib32gcc-s1 lib32gcc1 lib32stdc++6 libbsd0 libc6-i386
  libclang-common-8-dev libclang1-8 libedit2 libgc1c2 libgcc-8-dev libllvm8
  libmpx2 libobjc-8-dev libobjc-9-dev libobjc4 libomp-8-dev libomp5-8
  libstdc++-8-dev
0 upgraded, 20 newly installed, 0 to remove and 1 not upgraded.
Need to get 39.9 MB of archives.
After this operation, 223 MB of additional disk space will be used.
Get:1 http://127.0.0.1:12990/debian sid/main amd64 libbsd0 amd64 0.10.0-1 [107 kB]
Get:2 http://127.0.0.1:12990/debian sid/main amd64 libedit2 amd64 3.1-20191231-1 [95.4 kB]
Get:3 http://127.0.0.1:12990/debian sid/main amd64 libllvm8 amd64 1:8.0.1-7 [13.8 MB]
Get:4 http://127.0.0.1:12990/debian sid/main amd64 gcc-8-base amd64 8.3.0-29 [194 kB]
Get:5 http://127.0.0.1:12990/debian sid/main amd64 libmpx2 amd64 8.3.0-29 [11.4 kB]
Get:6 http://127.0.0.1:12990/debian sid/main amd64 libgcc-8-dev amd64 8.3.0-29 [2297 kB]
Get:7 http://127.0.0.1:12990/debian sid/main amd64 libstdc++-8-dev amd64 8.3.0-29 [1543 kB]
Get:8 http://127.0.0.1:12990/debian sid/main amd64 libgc1c2 amd64 1:7.6.4-0.4 [224 kB]
Get:9 http://127.0.0.1:12990/debian sid/main amd64 libobjc4 amd64 10-20200222-1 [41.6 kB]
Get:10 http://127.0.0.1:12990/debian sid/main amd64 libobjc-8-dev amd64 8.3.0-29 [227 kB]
Get:11 http://127.0.0.1:12990/debian sid/main amd64 libc6-i386 amd64 2.29-10 [2918 kB]
Get:12 http://127.0.0.1:12990/debian sid/main amd64 lib32gcc-s1 amd64 10-20200222-1 [49.4 kB]
Get:13 http://127.0.0.1:12990/debian sid/main amd64 lib32gcc1 amd64 1:10-20200222-1 [1104 B]
Get:14 http://127.0.0.1:12990/debian sid/main amd64 lib32stdc++6 amd64 10-20200222-1 [510 kB]
Get:15 http://127.0.0.1:12990/debian sid/main amd64 libclang-common-8-dev amd64 1:8.0.1-7 [2989 kB]
Get:16 http://127.0.0.1:12990/debian sid/main amd64 libclang1-8 amd64 1:8.0.1-7 [6244 kB]
Get:17 http://127.0.0.1:12990/debian sid/main amd64 clang-8 amd64 1:8.0.1-7 [8010 kB]
Get:18 http://127.0.0.1:12990/debian sid/main amd64 libobjc-9-dev amd64 9.2.1-29 [219 kB]
Get:19 http://127.0.0.1:12990/debian sid/main amd64 libomp5-8 amd64 1:8.0.1-7 [331 kB]
Get:20 http://127.0.0.1:12990/debian sid/main amd64 libomp-8-dev amd64 1:8.0.1-7 [62.3 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 39.9 MB in 1s (49.4 MB/s)
Selecting previously unselected package libbsd0:amd64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 12119 files and directories currently installed.)
Preparing to unpack .../00-libbsd0_0.10.0-1_amd64.deb ...
Unpacking libbsd0:amd64 (0.10.0-1) ...
Selecting previously unselected package libedit2:amd64.
Preparing to unpack .../01-libedit2_3.1-20191231-1_amd64.deb ...
Unpacking libedit2:amd64 (3.1-20191231-1) ...
Selecting previously unselected package libllvm8:amd64.
Preparing to unpack .../02-libllvm8_1%3a8.0.1-7_amd64.deb ...
Unpacking libllvm8:amd64 (1:8.0.1-7) ...
Selecting previously unselected package gcc-8-base:amd64.
Preparing to unpack .../03-gcc-8-base_8.3.0-29_amd64.deb ...
Unpacking gcc-8-base:amd64 (8.3.0-29) ...
Selecting previously unselected package libmpx2:amd64.
Preparing to unpack .../04-libmpx2_8.3.0-29_amd64.deb ...
Unpacking libmpx2:amd64 (8.3.0-29) ...
Selecting previously unselected package libgcc-8-dev:amd64.
Preparing to unpack .../05-libgcc-8-dev_8.3.0-29_amd64.deb ...
Unpacking libgcc-8-dev:amd64 (8.3.0-29) ...
Selecting previously unselected package libstdc++-8-dev:amd64.
Preparing to unpack .../06-libstdc++-8-dev_8.3.0-29_amd64.deb ...
Unpacking libstdc++-8-dev:amd64 (8.3.0-29) ...
Selecting previously unselected package libgc1c2:amd64.
Preparing to unpack .../07-libgc1c2_1%3a7.6.4-0.4_amd64.deb ...
Unpacking libgc1c2:amd64 (1:7.6.4-0.4) ...
Selecting previously unselected package libobjc4:amd64.
Preparing to unpack .../08-libobjc4_10-20200222-1_amd64.deb ...
Unpacking libobjc4:amd64 (10-20200222-1) ...
Selecting previously unselected package libobjc-8-dev:amd64.
Preparing to unpack .../09-libobjc-8-dev_8.3.0-29_amd64.deb ...
Unpacking libobjc-8-dev:amd64 (8.3.0-29) ...
Selecting previously unselected package libc6-i386.
Preparing to unpack .../10-libc6-i386_2.29-10_amd64.deb ...
Unpacking libc6-i386 (2.29-10) ...
Selecting previously unselected package lib32gcc-s1.
Preparing to unpack .../11-lib32gcc-s1_10-20200222-1_amd64.deb ...
Unpacking lib32gcc-s1 (10-20200222-1) ...
Selecting previously unselected package lib32gcc1.
Preparing to unpack .../12-lib32gcc1_1%3a10-20200222-1_amd64.deb ...
Unpacking lib32gcc1 (1:10-20200222-1) ...
Selecting previously unselected package lib32stdc++6.
Preparing to unpack .../13-lib32stdc++6_10-20200222-1_amd64.deb ...
Unpacking lib32stdc++6 (10-20200222-1) ...
Selecting previously unselected package libclang-common-8-dev.
Preparing to unpack .../14-libclang-common-8-dev_1%3a8.0.1-7_amd64.deb ...
Unpacking libclang-common-8-dev (1:8.0.1-7) ...
Selecting previously unselected package libclang1-8.
Preparing to unpack .../15-libclang1-8_1%3a8.0.1-7_amd64.deb ...
Unpacking libclang1-8 (1:8.0.1-7) ...
Selecting previously unselected package clang-8.
Preparing to unpack .../16-clang-8_1%3a8.0.1-7_amd64.deb ...
Unpacking clang-8 (1:8.0.1-7) ...
Selecting previously unselected package libobjc-9-dev:amd64.
Preparing to unpack .../17-libobjc-9-dev_9.2.1-29_amd64.deb ...
Unpacking libobjc-9-dev:amd64 (9.2.1-29) ...
Selecting previously unselected package libomp5-8:amd64.
Preparing to unpack .../18-libomp5-8_1%3a8.0.1-7_amd64.deb ...
Unpacking libomp5-8:amd64 (1:8.0.1-7) ...
Selecting previously unselected package libomp-8-dev.
Preparing to unpack .../19-libomp-8-dev_1%3a8.0.1-7_amd64.deb ...
Unpacking libomp-8-dev (1:8.0.1-7) ...
Setting up libgc1c2:amd64 (1:7.6.4-0.4) ...
Setting up libobjc4:amd64 (10-20200222-1) ...
Setting up gcc-8-base:amd64 (8.3.0-29) ...
Setting up libobjc-9-dev:amd64 (9.2.1-29) ...
Setting up libmpx2:amd64 (8.3.0-29) ...
Setting up libc6-i386 (2.29-10) ...
Setting up libbsd0:amd64 (0.10.0-1) ...
Setting up libomp5-8:amd64 (1:8.0.1-7) ...
Setting up libomp-8-dev (1:8.0.1-7) ...
Setting up libedit2:amd64 (3.1-20191231-1) ...
Setting up lib32gcc-s1 (10-20200222-1) ...
Setting up libgcc-8-dev:amd64 (8.3.0-29) ...
Setting up libstdc++-8-dev:amd64 (8.3.0-29) ...
Setting up libllvm8:amd64 (1:8.0.1-7) ...
Setting up libclang1-8 (1:8.0.1-7) ...
Setting up lib32gcc1 (1:10-20200222-1) ...
Setting up libobjc-8-dev:amd64 (8.3.0-29) ...
Setting up lib32stdc++6 (10-20200222-1) ...
Setting up libclang-common-8-dev (1:8.0.1-7) ...
Setting up clang-8 (1:8.0.1-7) ...
Processing triggers for libc-bin (2.29-10) ...
W: --force-yes is deprecated, use one of the options starting with --allow instead.
+ echo 'Replace gcc, g++ & cpp by clang'
Replace gcc, g++ & cpp by clang
+ VERSIONS='4.6 4.7 4.8 4.9 5 6 7 8 9 10'
+ cd /usr/bin
+ for VERSION in $VERSIONS
+ rm -f g++-4.6 gcc-4.6 cpp-4.6 gcc
+ ln -s clang++-8 g++-4.6
+ ln -s clang-8 gcc-4.6
+ ln -s clang-8 cpp-4.6
+ ln -s clang-8 gcc
+ dpkg --set-selections
+ echo 'gcc-4.6 hold'
dpkg: warning: package not in status nor available database at line 1: gcc-4.6
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ echo 'g++-4.6 hold'
+ dpkg --set-selections
dpkg: warning: package not in status nor available database at line 1: g++-4.6
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ for VERSION in $VERSIONS
+ rm -f g++-4.7 gcc-4.7 cpp-4.7 gcc
+ ln -s clang++-8 g++-4.7
+ ln -s clang-8 gcc-4.7
+ ln -s clang-8 cpp-4.7
+ ln -s clang-8 gcc
+ echo 'gcc-4.7 hold'
+ dpkg --set-selections
dpkg: warning: package not in status nor available database at line 1: gcc-4.7
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ dpkg --set-selections
+ echo 'g++-4.7 hold'
dpkg: warning: package not in status nor available database at line 1: g++-4.7
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ for VERSION in $VERSIONS
+ rm -f g++-4.8 gcc-4.8 cpp-4.8 gcc
+ ln -s clang++-8 g++-4.8
+ ln -s clang-8 gcc-4.8
+ ln -s clang-8 cpp-4.8
+ ln -s clang-8 gcc
+ dpkg --set-selections
+ echo 'gcc-4.8 hold'
dpkg: warning: package not in status nor available database at line 1: gcc-4.8
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ dpkg --set-selections
+ echo 'g++-4.8 hold'
dpkg: warning: package not in status nor available database at line 1: g++-4.8
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ for VERSION in $VERSIONS
+ rm -f g++-4.9 gcc-4.9 cpp-4.9 gcc
+ ln -s clang++-8 g++-4.9
+ ln -s clang-8 gcc-4.9
+ ln -s clang-8 cpp-4.9
+ ln -s clang-8 gcc
+ dpkg --set-selections
+ echo 'gcc-4.9 hold'
dpkg: warning: package not in status nor available database at line 1: gcc-4.9
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ dpkg --set-selections
+ echo 'g++-4.9 hold'
dpkg: warning: package not in status nor available database at line 1: g++-4.9
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ for VERSION in $VERSIONS
+ rm -f g++-5 gcc-5 cpp-5 gcc
+ ln -s clang++-8 g++-5
+ ln -s clang-8 gcc-5
+ ln -s clang-8 cpp-5
+ ln -s clang-8 gcc
+ dpkg --set-selections
+ echo 'gcc-5 hold'
dpkg: warning: package not in status nor available database at line 1: gcc-5
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ dpkg --set-selections
+ echo 'g++-5 hold'
dpkg: warning: package not in status nor available database at line 1: g++-5
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ for VERSION in $VERSIONS
+ rm -f g++-6 gcc-6 cpp-6 gcc
+ ln -s clang++-8 g++-6
+ ln -s clang-8 gcc-6
+ ln -s clang-8 cpp-6
+ ln -s clang-8 gcc
+ dpkg --set-selections
+ echo 'gcc-6 hold'
dpkg: warning: package not in status nor available database at line 1: gcc-6
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ dpkg --set-selections
+ echo 'g++-6 hold'
dpkg: warning: package not in status nor available database at line 1: g++-6
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ for VERSION in $VERSIONS
+ rm -f g++-7 gcc-7 cpp-7 gcc
+ ln -s clang++-8 g++-7
+ ln -s clang-8 gcc-7
+ ln -s clang-8 cpp-7
+ ln -s clang-8 gcc
+ dpkg --set-selections
+ echo 'gcc-7 hold'
dpkg: warning: package not in status nor available database at line 1: gcc-7
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ dpkg --set-selections
+ echo 'g++-7 hold'
dpkg: warning: package not in status nor available database at line 1: g++-7
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ for VERSION in $VERSIONS
+ rm -f g++-8 gcc-8 cpp-8 gcc
+ ln -s clang++-8 g++-8
+ ln -s clang-8 gcc-8
+ ln -s clang-8 cpp-8
+ ln -s clang-8 gcc
+ echo 'gcc-8 hold'
+ dpkg --set-selections
dpkg: warning: package not in status nor available database at line 1: gcc-8
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ dpkg --set-selections
+ echo 'g++-8 hold'
dpkg: warning: package not in status nor available database at line 1: g++-8
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ for VERSION in $VERSIONS
+ rm -f g++-9 gcc-9 cpp-9 gcc
+ ln -s clang++-8 g++-9
+ ln -s clang-8 gcc-9
+ ln -s clang-8 cpp-9
+ ln -s clang-8 gcc
+ dpkg --set-selections
+ echo 'gcc-9 hold'
+ echo 'g++-9 hold'
+ dpkg --set-selections
+ for VERSION in $VERSIONS
+ rm -f g++-10 gcc-10 cpp-10 gcc
+ ln -s clang++-8 g++-10
+ ln -s clang-8 gcc-10
+ ln -s clang-8 cpp-10
+ ln -s clang-8 gcc
+ echo 'gcc-10 hold'
+ dpkg --set-selections
dpkg: warning: package not in status nor available database at line 1: gcc-10
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ echo 'g++-10 hold'
+ dpkg --set-selections
dpkg: warning: package not in status nor available database at line 1: g++-10
dpkg: warning: found unknown packages; this might mean the available database
is outdated, and needs to be updated through a frontend method;
please see the FAQ <https://wiki.debian.org/Teams/Dpkg/FAQ>
+ cd -
/build/mender-client-IA25V7
+ echo 'Check if gcc, g++ & cpp are actually clang'
Check if gcc, g++ & cpp are actually clang
+ gcc --version
+ grep clang
+ grep clang
+ cpp --version
+ grep clang
+ g++ --version

I: Finished running '/tmp/clang8'.

Finished processing commands.
--------------------------------------------------------------------------------
I: NOTICE: Log filtering will replace 'build/mender-client-IA25V7/resolver-wvkO69' with '<<RESOLVERDIR>>'

+------------------------------------------------------------------------------+
| Update chroot                                                                |
+------------------------------------------------------------------------------+

Hit:1 http://127.0.0.1:12990/debian sid InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
Calculating upgrade...
The following packages will be upgraded:
  libgmp10
1 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Need to get 253 kB of archives.
After this operation, 0 B of additional disk space will be used.
Get:1 http://127.0.0.1:12990/debian sid/main amd64 libgmp10 amd64 2:6.2.0+dfsg-4 [253 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 253 kB in 0s (4898 kB/s)
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 13887 files and directories currently installed.)
Preparing to unpack .../libgmp10_2%3a6.2.0+dfsg-4_amd64.deb ...
Unpacking libgmp10:amd64 (2:6.2.0+dfsg-4) over (2:6.2.0+dfsg-3) ...
Setting up libgmp10:amd64 (2:6.2.0+dfsg-4) ...
Processing triggers for libc-bin (2.29-10) ...

+------------------------------------------------------------------------------+
| Fetch source files                                                           |
+------------------------------------------------------------------------------+


Check APT
---------

Checking available source versions...

Download source files with APT
------------------------------

Reading package lists...
NOTICE: 'mender-client' packaging is maintained in the 'Git' version control system at:
https://salsa.debian.org/go-team/packages/mender-client.git
Please use:
git clone https://salsa.debian.org/go-team/packages/mender-client.git
to retrieve the latest (possibly unreleased) updates to the package.
Need to get 149 kB of source archives.
Get:1 http://127.0.0.1:12990/debian sid/main mender-client 2.1.2-2 (dsc) [2521 B]
Get:2 http://127.0.0.1:12990/debian sid/main mender-client 2.1.2-2 (tar) [139 kB]
Get:3 http://127.0.0.1:12990/debian sid/main mender-client 2.1.2-2 (diff) [7204 B]
Fetched 149 kB in 0s (576 kB/s)
Download complete and in download only mode
I: NOTICE: Log filtering will replace 'build/mender-client-IA25V7/mender-client-2.1.2' with '<<PKGBUILDDIR>>'
I: NOTICE: Log filtering will replace 'build/mender-client-IA25V7' with '<<BUILDDIR>>'

+------------------------------------------------------------------------------+
| Install package build dependencies                                           |
+------------------------------------------------------------------------------+


Setup apt archive
-----------------

Merged Build-Depends: debhelper (>= 11), dh-golang, golang-any, golang-github-pkg-errors-dev, golang-github-stretchr-testify-dev, golang-golang-x-net-dev, golang-golang-x-sys-dev, golang-logrus-dev, golang-github-bmatsuo-lmdb-go-dev, golang-github-ungerik-go-sysfs-dev, golang-github-mendersoftware-mender-artifact-dev (>= 3.1.0), golang-github-mendersoftware-log-dev, golang-github-mendersoftware-mendertesting-dev, ca-certificates, build-essential, fakeroot
Filtered Build-Depends: debhelper (>= 11), dh-golang, golang-any, golang-github-pkg-errors-dev, golang-github-stretchr-testify-dev, golang-golang-x-net-dev, golang-golang-x-sys-dev, golang-logrus-dev, golang-github-bmatsuo-lmdb-go-dev, golang-github-ungerik-go-sysfs-dev, golang-github-mendersoftware-mender-artifact-dev (>= 3.1.0), golang-github-mendersoftware-log-dev, golang-github-mendersoftware-mendertesting-dev, ca-certificates, build-essential, fakeroot
dpkg-deb: building package 'sbuild-build-depends-main-dummy' in '/<<RESOLVERDIR>>/apt_archive/sbuild-build-depends-main-dummy.deb'.
Ign:1 copy:/<<RESOLVERDIR>>/apt_archive ./ InRelease
Get:2 copy:/<<RESOLVERDIR>>/apt_archive ./ Release [963 B]
Ign:3 copy:/<<RESOLVERDIR>>/apt_archive ./ Release.gpg
Get:4 copy:/<<RESOLVERDIR>>/apt_archive ./ Sources [503 B]
Get:5 copy:/<<RESOLVERDIR>>/apt_archive ./ Packages [583 B]
Fetched 2049 B in 0s (44.7 kB/s)
Reading package lists...
Reading package lists...

Install main build dependencies (apt-based resolver)
----------------------------------------------------

Installing build dependencies
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  autoconf automake autopoint autotools-dev bsdmainutils ca-certificates
  debhelper dh-autoreconf dh-golang dh-strip-nondeterminism dwz file gettext
  gettext-base golang-1.13-go golang-1.13-src golang-any
  golang-github-bmatsuo-lmdb-go-dev golang-github-cpuguy83-go-md2man-dev
  golang-github-davecgh-go-spew-dev golang-github-kr-pretty-dev
  golang-github-kr-pty-dev golang-github-kr-text-dev
  golang-github-mendersoftware-log-dev
  golang-github-mendersoftware-mender-artifact-dev
  golang-github-mendersoftware-mendertesting-dev
  golang-github-mendersoftware-scopestack-dev golang-github-pkg-errors-dev
  golang-github-pmezard-go-difflib-dev
  golang-github-remyoudompheng-go-liblzma-dev
  golang-github-russross-blackfriday-dev
  golang-github-shurcool-sanitized-anchor-name-dev
  golang-github-sirupsen-logrus-dev golang-github-stretchr-objx-dev
  golang-github-stretchr-testify-dev golang-github-ungerik-go-sysfs-dev
  golang-github-urfave-cli-dev golang-go golang-golang-x-net-dev
  golang-golang-x-sys-dev golang-golang-x-text-dev golang-gopkg-check.v1-dev
  golang-gopkg-yaml.v2-dev golang-logrus-dev golang-src groff-base
  intltool-debian libarchive-zip-perl libcroco3 libdebhelper-perl libelf1
  libfile-stripnondeterminism-perl libglib2.0-0 libicu63 liblzma-dev
  libmagic-mgc libmagic1 libpipeline1 libsigsegv2 libssl1.1
  libsub-override-perl libtool libuchardet0 libxml2 m4 man-db openssl
  po-debconf sensible-utils
Suggested packages:
  autoconf-archive gnu-standards autoconf-doc wamerican | wordlist whois
  vacation dh-make gettext-doc libasprintf-dev libgettextpo-dev bzr | brz git
  mercurial subversion groff liblzma-doc libtool-doc gfortran
  | fortran95-compiler gcj-jdk m4-doc apparmor less www-browser
  libmail-box-perl
Recommended packages:
  curl | wget | lynx pkg-config libarchive-cpio-perl libglib2.0-data
  shared-mime-info xdg-user-dirs libltdl-dev libmail-sendmail-perl
The following NEW packages will be installed:
  autoconf automake autopoint autotools-dev bsdmainutils ca-certificates
  debhelper dh-autoreconf dh-golang dh-strip-nondeterminism dwz file gettext
  gettext-base golang-1.13-go golang-1.13-src golang-any
  golang-github-bmatsuo-lmdb-go-dev golang-github-cpuguy83-go-md2man-dev
  golang-github-davecgh-go-spew-dev golang-github-kr-pretty-dev
  golang-github-kr-pty-dev golang-github-kr-text-dev
  golang-github-mendersoftware-log-dev
  golang-github-mendersoftware-mender-artifact-dev
  golang-github-mendersoftware-mendertesting-dev
  golang-github-mendersoftware-scopestack-dev golang-github-pkg-errors-dev
  golang-github-pmezard-go-difflib-dev
  golang-github-remyoudompheng-go-liblzma-dev
  golang-github-russross-blackfriday-dev
  golang-github-shurcool-sanitized-anchor-name-dev
  golang-github-sirupsen-logrus-dev golang-github-stretchr-objx-dev
  golang-github-stretchr-testify-dev golang-github-ungerik-go-sysfs-dev
  golang-github-urfave-cli-dev golang-go golang-golang-x-net-dev
  golang-golang-x-sys-dev golang-golang-x-text-dev golang-gopkg-check.v1-dev
  golang-gopkg-yaml.v2-dev golang-logrus-dev golang-src groff-base
  intltool-debian libarchive-zip-perl libcroco3 libdebhelper-perl libelf1
  libfile-stripnondeterminism-perl libglib2.0-0 libicu63 liblzma-dev
  libmagic-mgc libmagic1 libpipeline1 libsigsegv2 libssl1.1
  libsub-override-perl libtool libuchardet0 libxml2 m4 man-db openssl
  po-debconf sbuild-build-depends-main-dummy sensible-utils
0 upgraded, 70 newly installed, 0 to remove and 0 not upgraded.
Need to get 87.5 MB of archives.
After this operation, 445 MB of additional disk space will be used.
Get:1 copy:/<<RESOLVERDIR>>/apt_archive ./ sbuild-build-depends-main-dummy 0.invalid.0 [1012 B]
Get:2 http://127.0.0.1:12990/debian sid/main amd64 bsdmainutils amd64 11.1.2+b1 [191 kB]
Get:3 http://127.0.0.1:12990/debian sid/main amd64 libuchardet0 amd64 0.0.6-3 [64.9 kB]
Get:4 http://127.0.0.1:12990/debian sid/main amd64 groff-base amd64 1.22.4-4 [919 kB]
Get:5 http://127.0.0.1:12990/debian sid/main amd64 libpipeline1 amd64 1.5.2-2 [33.9 kB]
Get:6 http://127.0.0.1:12990/debian sid/main amd64 man-db amd64 2.9.0-2 [1307 kB]
Get:7 http://127.0.0.1:12990/debian sid/main amd64 golang-github-davecgh-go-spew-dev all 1.1.1-2 [29.7 kB]
Get:8 http://127.0.0.1:12990/debian sid/main amd64 golang-github-pmezard-go-difflib-dev all 1.0.0-2 [12.0 kB]
Get:9 http://127.0.0.1:12990/debian sid/main amd64 golang-github-stretchr-objx-dev all 0.1.1+git20180825.ef50b0d-1 [23.4 kB]
Get:10 http://127.0.0.1:12990/debian sid/main amd64 golang-github-kr-pty-dev all 1.1.6-1 [10.6 kB]
Get:11 http://127.0.0.1:12990/debian sid/main amd64 golang-github-kr-text-dev all 0.1.0-1 [10.8 kB]
Get:12 http://127.0.0.1:12990/debian sid/main amd64 golang-github-kr-pretty-dev all 0.1.0-1 [10.2 kB]
Get:13 http://127.0.0.1:12990/debian sid/main amd64 golang-gopkg-check.v1-dev all 0.0+git20180628.788fd78-1 [31.6 kB]
Get:14 http://127.0.0.1:12990/debian sid/main amd64 golang-gopkg-yaml.v2-dev all 2.2.8-1 [60.7 kB]
Get:15 http://127.0.0.1:12990/debian sid/main amd64 golang-github-stretchr-testify-dev all 1.4.0+ds-1 [53.5 kB]
Get:16 http://127.0.0.1:12990/debian sid/main amd64 golang-golang-x-sys-dev all 0.0~git20200219.cb0a6d8-1 [270 kB]
Get:17 http://127.0.0.1:12990/debian sid/main amd64 golang-github-sirupsen-logrus-dev all 1.4.2-1 [41.2 kB]
Get:18 http://127.0.0.1:12990/debian sid/main amd64 sensible-utils all 0.0.12+nmu1 [16.0 kB]
Get:19 http://127.0.0.1:12990/debian sid/main amd64 libmagic-mgc amd64 1:5.38-4 [262 kB]
Get:20 http://127.0.0.1:12990/debian sid/main amd64 libmagic1 amd64 1:5.38-4 [120 kB]
Get:21 http://127.0.0.1:12990/debian sid/main amd64 file amd64 1:5.38-4 [67.9 kB]
Get:22 http://127.0.0.1:12990/debian sid/main amd64 gettext-base amd64 0.19.8.1-10 [123 kB]
Get:23 http://127.0.0.1:12990/debian sid/main amd64 libsigsegv2 amd64 2.12-2 [32.8 kB]
Get:24 http://127.0.0.1:12990/debian sid/main amd64 m4 amd64 1.4.18-4 [203 kB]
Get:25 http://127.0.0.1:12990/debian sid/main amd64 autoconf all 2.69-11.1 [341 kB]
Get:26 http://127.0.0.1:12990/debian sid/main amd64 autotools-dev all 20180224.1 [77.0 kB]
Get:27 http://127.0.0.1:12990/debian sid/main amd64 automake all 1:1.16.1-4 [771 kB]
Get:28 http://127.0.0.1:12990/debian sid/main amd64 autopoint all 0.19.8.1-10 [435 kB]
Get:29 http://127.0.0.1:12990/debian sid/main amd64 libssl1.1 amd64 1.1.1d-2 [1540 kB]
Get:30 http://127.0.0.1:12990/debian sid/main amd64 openssl amd64 1.1.1d-2 [840 kB]
Get:31 http://127.0.0.1:12990/debian sid/main amd64 ca-certificates all 20190110 [157 kB]
Get:32 http://127.0.0.1:12990/debian sid/main amd64 libtool all 2.4.6-13 [513 kB]
Get:33 http://127.0.0.1:12990/debian sid/main amd64 dh-autoreconf all 19 [16.9 kB]
Get:34 http://127.0.0.1:12990/debian sid/main amd64 libdebhelper-perl all 12.9 [183 kB]
Get:35 http://127.0.0.1:12990/debian sid/main amd64 libarchive-zip-perl all 1.67-1 [104 kB]
Get:36 http://127.0.0.1:12990/debian sid/main amd64 libsub-override-perl all 0.09-2 [10.2 kB]
Get:37 http://127.0.0.1:12990/debian sid/main amd64 libfile-stripnondeterminism-perl all 1.6.3-2 [23.7 kB]
Get:38 http://127.0.0.1:12990/debian sid/main amd64 dh-strip-nondeterminism all 1.6.3-2 [14.7 kB]
Get:39 http://127.0.0.1:12990/debian sid/main amd64 libelf1 amd64 0.176-1.1 [161 kB]
Get:40 http://127.0.0.1:12990/debian sid/main amd64 dwz amd64 0.13-5 [151 kB]
Get:41 http://127.0.0.1:12990/debian sid/main amd64 libglib2.0-0 amd64 2.62.4-2 [1319 kB]
Get:42 http://127.0.0.1:12990/debian sid/main amd64 libicu63 amd64 63.2-2 [8301 kB]
Get:43 http://127.0.0.1:12990/debian sid/main amd64 libxml2 amd64 2.9.10+dfsg-3 [709 kB]
Get:44 http://127.0.0.1:12990/debian sid/main amd64 libcroco3 amd64 0.6.13-1 [146 kB]
Get:45 http://127.0.0.1:12990/debian sid/main amd64 gettext amd64 0.19.8.1-10 [1303 kB]
Get:46 http://127.0.0.1:12990/debian sid/main amd64 intltool-debian all 0.35.0+20060710.5 [26.8 kB]
Get:47 http://127.0.0.1:12990/debian sid/main amd64 po-debconf all 1.0.21 [248 kB]
Get:48 http://127.0.0.1:12990/debian sid/main amd64 debhelper all 12.9 [994 kB]
Get:49 http://127.0.0.1:12990/debian sid/main amd64 dh-golang all 1.46 [23.2 kB]
Get:50 http://127.0.0.1:12990/debian sid/main amd64 golang-1.13-src amd64 1.13.8-1 [12.7 MB]
Get:51 http://127.0.0.1:12990/debian sid/main amd64 golang-1.13-go amd64 1.13.8-1 [47.6 MB]
Get:52 http://127.0.0.1:12990/debian sid/main amd64 golang-src amd64 2:1.13~1 [4572 B]
Get:53 http://127.0.0.1:12990/debian sid/main amd64 golang-go amd64 2:1.13~1 [23.7 kB]
Get:54 http://127.0.0.1:12990/debian sid/main amd64 golang-any amd64 2:1.13~1 [4692 B]
Get:55 http://127.0.0.1:12990/debian sid/main amd64 golang-golang-x-text-dev all 0.3.2-3 [3642 kB]
Get:56 http://127.0.0.1:12990/debian sid/main amd64 golang-golang-x-net-dev all 1:0.0+git20200219.4628272+dfsg-1 [640 kB]
Get:57 http://127.0.0.1:12990/debian sid/main amd64 golang-github-bmatsuo-lmdb-go-dev all 1.8.0+git20170215.a14b5a3-2 [145 kB]
Get:58 http://127.0.0.1:12990/debian sid/main amd64 golang-github-shurcool-sanitized-anchor-name-dev all 1.0.0-1 [3872 B]
Get:59 http://127.0.0.1:12990/debian sid/main amd64 golang-github-russross-blackfriday-dev all 1.5.2+git20190616.a925a15-1 [64.4 kB]
Get:60 http://127.0.0.1:12990/debian sid/main amd64 golang-github-cpuguy83-go-md2man-dev all 1.0.10+ds-1 [6852 B]
Get:61 http://127.0.0.1:12990/debian sid/main amd64 golang-logrus-dev all 1.3.0-1 [5620 B]
Get:62 http://127.0.0.1:12990/debian sid/main amd64 golang-github-mendersoftware-mendertesting-dev all 0.0~git20180410.9e728b5-2 [6700 B]
Get:63 http://127.0.0.1:12990/debian sid/main amd64 golang-github-mendersoftware-scopestack-dev all 0.0~git20180403.c2f5599-2 [3652 B]
Get:64 http://127.0.0.1:12990/debian sid/main amd64 golang-github-mendersoftware-log-dev all 0.0~git20180403.f608c95-2 [7084 B]
Get:65 http://127.0.0.1:12990/debian sid/main amd64 golang-github-pkg-errors-dev all 0.8.1-1 [11.2 kB]
Get:66 http://127.0.0.1:12990/debian sid/main amd64 liblzma-dev amd64 5.2.4-1+b1 [211 kB]
Get:67 http://127.0.0.1:12990/debian sid/main amd64 golang-github-remyoudompheng-go-liblzma-dev all 0.0~git20190506.81bf2d4-2 [49.3 kB]
Get:68 http://127.0.0.1:12990/debian sid/main amd64 golang-github-urfave-cli-dev all 1.22.2-4 [45.1 kB]
Get:69 http://127.0.0.1:12990/debian sid/main amd64 golang-github-mendersoftware-mender-artifact-dev all 3.2.1-1 [71.8 kB]
Get:70 http://127.0.0.1:12990/debian sid/main amd64 golang-github-ungerik-go-sysfs-dev all 0.0~git20170424.9c991ee-2 [4048 B]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 87.5 MB in 5s (18.3 MB/s)
Selecting previously unselected package bsdmainutils.
(Reading database ... 13887 files and directories currently installed.)
Preparing to unpack .../00-bsdmainutils_11.1.2+b1_amd64.deb ...
Unpacking bsdmainutils (11.1.2+b1) ...
Selecting previously unselected package libuchardet0:amd64.
Preparing to unpack .../01-libuchardet0_0.0.6-3_amd64.deb ...
Unpacking libuchardet0:amd64 (0.0.6-3) ...
Selecting previously unselected package groff-base.
Preparing to unpack .../02-groff-base_1.22.4-4_amd64.deb ...
Unpacking groff-base (1.22.4-4) ...
Selecting previously unselected package libpipeline1:amd64.
Preparing to unpack .../03-libpipeline1_1.5.2-2_amd64.deb ...
Unpacking libpipeline1:amd64 (1.5.2-2) ...
Selecting previously unselected package man-db.
Preparing to unpack .../04-man-db_2.9.0-2_amd64.deb ...
Unpacking man-db (2.9.0-2) ...
Selecting previously unselected package golang-github-davecgh-go-spew-dev.
Preparing to unpack .../05-golang-github-davecgh-go-spew-dev_1.1.1-2_all.deb ...
Unpacking golang-github-davecgh-go-spew-dev (1.1.1-2) ...
Selecting previously unselected package golang-github-pmezard-go-difflib-dev.
Preparing to unpack .../06-golang-github-pmezard-go-difflib-dev_1.0.0-2_all.deb ...
Unpacking golang-github-pmezard-go-difflib-dev (1.0.0-2) ...
Selecting previously unselected package golang-github-stretchr-objx-dev.
Preparing to unpack .../07-golang-github-stretchr-objx-dev_0.1.1+git20180825.ef50b0d-1_all.deb ...
Unpacking golang-github-stretchr-objx-dev (0.1.1+git20180825.ef50b0d-1) ...
Selecting previously unselected package golang-github-kr-pty-dev.
Preparing to unpack .../08-golang-github-kr-pty-dev_1.1.6-1_all.deb ...
Unpacking golang-github-kr-pty-dev (1.1.6-1) ...
Selecting previously unselected package golang-github-kr-text-dev.
Preparing to unpack .../09-golang-github-kr-text-dev_0.1.0-1_all.deb ...
Unpacking golang-github-kr-text-dev (0.1.0-1) ...
Selecting previously unselected package golang-github-kr-pretty-dev.
Preparing to unpack .../10-golang-github-kr-pretty-dev_0.1.0-1_all.deb ...
Unpacking golang-github-kr-pretty-dev (0.1.0-1) ...
Selecting previously unselected package golang-gopkg-check.v1-dev.
Preparing to unpack .../11-golang-gopkg-check.v1-dev_0.0+git20180628.788fd78-1_all.deb ...
Unpacking golang-gopkg-check.v1-dev (0.0+git20180628.788fd78-1) ...
Selecting previously unselected package golang-gopkg-yaml.v2-dev.
Preparing to unpack .../12-golang-gopkg-yaml.v2-dev_2.2.8-1_all.deb ...
Unpacking golang-gopkg-yaml.v2-dev (2.2.8-1) ...
Selecting previously unselected package golang-github-stretchr-testify-dev.
Preparing to unpack .../13-golang-github-stretchr-testify-dev_1.4.0+ds-1_all.deb ...
Unpacking golang-github-stretchr-testify-dev (1.4.0+ds-1) ...
Selecting previously unselected package golang-golang-x-sys-dev.
Preparing to unpack .../14-golang-golang-x-sys-dev_0.0~git20200219.cb0a6d8-1_all.deb ...
Unpacking golang-golang-x-sys-dev (0.0~git20200219.cb0a6d8-1) ...
Selecting previously unselected package golang-github-sirupsen-logrus-dev.
Preparing to unpack .../15-golang-github-sirupsen-logrus-dev_1.4.2-1_all.deb ...
Unpacking golang-github-sirupsen-logrus-dev (1.4.2-1) ...
Selecting previously unselected package sensible-utils.
Preparing to unpack .../16-sensible-utils_0.0.12+nmu1_all.deb ...
Unpacking sensible-utils (0.0.12+nmu1) ...
Selecting previously unselected package libmagic-mgc.
Preparing to unpack .../17-libmagic-mgc_1%3a5.38-4_amd64.deb ...
Unpacking libmagic-mgc (1:5.38-4) ...
Selecting previously unselected package libmagic1:amd64.
Preparing to unpack .../18-libmagic1_1%3a5.38-4_amd64.deb ...
Unpacking libmagic1:amd64 (1:5.38-4) ...
Selecting previously unselected package file.
Preparing to unpack .../19-file_1%3a5.38-4_amd64.deb ...
Unpacking file (1:5.38-4) ...
Selecting previously unselected package gettext-base.
Preparing to unpack .../20-gettext-base_0.19.8.1-10_amd64.deb ...
Unpacking gettext-base (0.19.8.1-10) ...
Selecting previously unselected package libsigsegv2:amd64.
Preparing to unpack .../21-libsigsegv2_2.12-2_amd64.deb ...
Unpacking libsigsegv2:amd64 (2.12-2) ...
Selecting previously unselected package m4.
Preparing to unpack .../22-m4_1.4.18-4_amd64.deb ...
Unpacking m4 (1.4.18-4) ...
Selecting previously unselected package autoconf.
Preparing to unpack .../23-autoconf_2.69-11.1_all.deb ...
Unpacking autoconf (2.69-11.1) ...
Selecting previously unselected package autotools-dev.
Preparing to unpack .../24-autotools-dev_20180224.1_all.deb ...
Unpacking autotools-dev (20180224.1) ...
Selecting previously unselected package automake.
Preparing to unpack .../25-automake_1%3a1.16.1-4_all.deb ...
Unpacking automake (1:1.16.1-4) ...
Selecting previously unselected package autopoint.
Preparing to unpack .../26-autopoint_0.19.8.1-10_all.deb ...
Unpacking autopoint (0.19.8.1-10) ...
Selecting previously unselected package libssl1.1:amd64.
Preparing to unpack .../27-libssl1.1_1.1.1d-2_amd64.deb ...
Unpacking libssl1.1:amd64 (1.1.1d-2) ...
Selecting previously unselected package openssl.
Preparing to unpack .../28-openssl_1.1.1d-2_amd64.deb ...
Unpacking openssl (1.1.1d-2) ...
Selecting previously unselected package ca-certificates.
Preparing to unpack .../29-ca-certificates_20190110_all.deb ...
Unpacking ca-certificates (20190110) ...
Selecting previously unselected package libtool.
Preparing to unpack .../30-libtool_2.4.6-13_all.deb ...
Unpacking libtool (2.4.6-13) ...
Selecting previously unselected package dh-autoreconf.
Preparing to unpack .../31-dh-autoreconf_19_all.deb ...
Unpacking dh-autoreconf (19) ...
Selecting previously unselected package libdebhelper-perl.
Preparing to unpack .../32-libdebhelper-perl_12.9_all.deb ...
Unpacking libdebhelper-perl (12.9) ...
Selecting previously unselected package libarchive-zip-perl.
Preparing to unpack .../33-libarchive-zip-perl_1.67-1_all.deb ...
Unpacking libarchive-zip-perl (1.67-1) ...
Selecting previously unselected package libsub-override-perl.
Preparing to unpack .../34-libsub-override-perl_0.09-2_all.deb ...
Unpacking libsub-override-perl (0.09-2) ...
Selecting previously unselected package libfile-stripnondeterminism-perl.
Preparing to unpack .../35-libfile-stripnondeterminism-perl_1.6.3-2_all.deb ...
Unpacking libfile-stripnondeterminism-perl (1.6.3-2) ...
Selecting previously unselected package dh-strip-nondeterminism.
Preparing to unpack .../36-dh-strip-nondeterminism_1.6.3-2_all.deb ...
Unpacking dh-strip-nondeterminism (1.6.3-2) ...
Selecting previously unselected package libelf1:amd64.
Preparing to unpack .../37-libelf1_0.176-1.1_amd64.deb ...
Unpacking libelf1:amd64 (0.176-1.1) ...
Selecting previously unselected package dwz.
Preparing to unpack .../38-dwz_0.13-5_amd64.deb ...
Unpacking dwz (0.13-5) ...
Selecting previously unselected package libglib2.0-0:amd64.
Preparing to unpack .../39-libglib2.0-0_2.62.4-2_amd64.deb ...
Unpacking libglib2.0-0:amd64 (2.62.4-2) ...
Selecting previously unselected package libicu63:amd64.
Preparing to unpack .../40-libicu63_63.2-2_amd64.deb ...
Unpacking libicu63:amd64 (63.2-2) ...
Selecting previously unselected package libxml2:amd64.
Preparing to unpack .../41-libxml2_2.9.10+dfsg-3_amd64.deb ...
Unpacking libxml2:amd64 (2.9.10+dfsg-3) ...
Selecting previously unselected package libcroco3:amd64.
Preparing to unpack .../42-libcroco3_0.6.13-1_amd64.deb ...
Unpacking libcroco3:amd64 (0.6.13-1) ...
Selecting previously unselected package gettext.
Preparing to unpack .../43-gettext_0.19.8.1-10_amd64.deb ...
Unpacking gettext (0.19.8.1-10) ...
Selecting previously unselected package intltool-debian.
Preparing to unpack .../44-intltool-debian_0.35.0+20060710.5_all.deb ...
Unpacking intltool-debian (0.35.0+20060710.5) ...
Selecting previously unselected package po-debconf.
Preparing to unpack .../45-po-debconf_1.0.21_all.deb ...
Unpacking po-debconf (1.0.21) ...
Selecting previously unselected package debhelper.
Preparing to unpack .../46-debhelper_12.9_all.deb ...
Unpacking debhelper (12.9) ...
Selecting previously unselected package dh-golang.
Preparing to unpack .../47-dh-golang_1.46_all.deb ...
Unpacking dh-golang (1.46) ...
Selecting previously unselected package golang-1.13-src.
Preparing to unpack .../48-golang-1.13-src_1.13.8-1_amd64.deb ...
Unpacking golang-1.13-src (1.13.8-1) ...
Selecting previously unselected package golang-1.13-go.
Preparing to unpack .../49-golang-1.13-go_1.13.8-1_amd64.deb ...
Unpacking golang-1.13-go (1.13.8-1) ...
Selecting previously unselected package golang-src.
Preparing to unpack .../50-golang-src_2%3a1.13~1_amd64.deb ...
Unpacking golang-src (2:1.13~1) ...
Selecting previously unselected package golang-go.
Preparing to unpack .../51-golang-go_2%3a1.13~1_amd64.deb ...
Unpacking golang-go (2:1.13~1) ...
Selecting previously unselected package golang-any.
Preparing to unpack .../52-golang-any_2%3a1.13~1_amd64.deb ...
Unpacking golang-any (2:1.13~1) ...
Selecting previously unselected package golang-golang-x-text-dev.
Preparing to unpack .../53-golang-golang-x-text-dev_0.3.2-3_all.deb ...
Unpacking golang-golang-x-text-dev (0.3.2-3) ...
Selecting previously unselected package golang-golang-x-net-dev.
Preparing to unpack .../54-golang-golang-x-net-dev_1%3a0.0+git20200219.4628272+dfsg-1_all.deb ...
Unpacking golang-golang-x-net-dev (1:0.0+git20200219.4628272+dfsg-1) ...
Selecting previously unselected package golang-github-bmatsuo-lmdb-go-dev.
Preparing to unpack .../55-golang-github-bmatsuo-lmdb-go-dev_1.8.0+git20170215.a14b5a3-2_all.deb ...
Unpacking golang-github-bmatsuo-lmdb-go-dev (1.8.0+git20170215.a14b5a3-2) ...
Selecting previously unselected package golang-github-shurcool-sanitized-anchor-name-dev.
Preparing to unpack .../56-golang-github-shurcool-sanitized-anchor-name-dev_1.0.0-1_all.deb ...
Unpacking golang-github-shurcool-sanitized-anchor-name-dev (1.0.0-1) ...
Selecting previously unselected package golang-github-russross-blackfriday-dev.
Preparing to unpack .../57-golang-github-russross-blackfriday-dev_1.5.2+git20190616.a925a15-1_all.deb ...
Unpacking golang-github-russross-blackfriday-dev (1.5.2+git20190616.a925a15-1) ...
Selecting previously unselected package golang-github-cpuguy83-go-md2man-dev.
Preparing to unpack .../58-golang-github-cpuguy83-go-md2man-dev_1.0.10+ds-1_all.deb ...
Unpacking golang-github-cpuguy83-go-md2man-dev (1.0.10+ds-1) ...
Selecting previously unselected package golang-logrus-dev.
Preparing to unpack .../59-golang-logrus-dev_1.3.0-1_all.deb ...
Unpacking golang-logrus-dev (1.3.0-1) ...
Selecting previously unselected package golang-github-mendersoftware-mendertesting-dev.
Preparing to unpack .../60-golang-github-mendersoftware-mendertesting-dev_0.0~git20180410.9e728b5-2_all.deb ...
Unpacking golang-github-mendersoftware-mendertesting-dev (0.0~git20180410.9e728b5-2) ...
Selecting previously unselected package golang-github-mendersoftware-scopestack-dev.
Preparing to unpack .../61-golang-github-mendersoftware-scopestack-dev_0.0~git20180403.c2f5599-2_all.deb ...
Unpacking golang-github-mendersoftware-scopestack-dev (0.0~git20180403.c2f5599-2) ...
Selecting previously unselected package golang-github-mendersoftware-log-dev.
Preparing to unpack .../62-golang-github-mendersoftware-log-dev_0.0~git20180403.f608c95-2_all.deb ...
Unpacking golang-github-mendersoftware-log-dev (0.0~git20180403.f608c95-2) ...
Selecting previously unselected package golang-github-pkg-errors-dev.
Preparing to unpack .../63-golang-github-pkg-errors-dev_0.8.1-1_all.deb ...
Unpacking golang-github-pkg-errors-dev (0.8.1-1) ...
Selecting previously unselected package liblzma-dev:amd64.
Preparing to unpack .../64-liblzma-dev_5.2.4-1+b1_amd64.deb ...
Unpacking liblzma-dev:amd64 (5.2.4-1+b1) ...
Selecting previously unselected package golang-github-remyoudompheng-go-liblzma-dev.
Preparing to unpack .../65-golang-github-remyoudompheng-go-liblzma-dev_0.0~git20190506.81bf2d4-2_all.deb ...
Unpacking golang-github-remyoudompheng-go-liblzma-dev (0.0~git20190506.81bf2d4-2) ...
Selecting previously unselected package golang-github-urfave-cli-dev.
Preparing to unpack .../66-golang-github-urfave-cli-dev_1.22.2-4_all.deb ...
Unpacking golang-github-urfave-cli-dev (1.22.2-4) ...
Selecting previously unselected package golang-github-mendersoftware-mender-artifact-dev.
Preparing to unpack .../67-golang-github-mendersoftware-mender-artifact-dev_3.2.1-1_all.deb ...
Unpacking golang-github-mendersoftware-mender-artifact-dev (3.2.1-1) ...
Selecting previously unselected package golang-github-ungerik-go-sysfs-dev.
Preparing to unpack .../68-golang-github-ungerik-go-sysfs-dev_0.0~git20170424.9c991ee-2_all.deb ...
Unpacking golang-github-ungerik-go-sysfs-dev (0.0~git20170424.9c991ee-2) ...
Selecting previously unselected package sbuild-build-depends-main-dummy.
Preparing to unpack .../69-sbuild-build-depends-main-dummy_0.invalid.0_amd64.deb ...
Unpacking sbuild-build-depends-main-dummy (0.invalid.0) ...
Setting up libpipeline1:amd64 (1.5.2-2) ...
Setting up golang-1.13-src (1.13.8-1) ...
Setting up golang-github-shurcool-sanitized-anchor-name-dev (1.0.0-1) ...
Setting up golang-github-stretchr-objx-dev (0.1.1+git20180825.ef50b0d-1) ...
Setting up libmagic-mgc (1:5.38-4) ...
Setting up golang-github-pkg-errors-dev (0.8.1-1) ...
Setting up libarchive-zip-perl (1.67-1) ...
Setting up libglib2.0-0:amd64 (2.62.4-2) ...
No schema files found: doing nothing.
Setting up libssl1.1:amd64 (1.1.1d-2) ...
Setting up libdebhelper-perl (12.9) ...
Setting up golang-golang-x-sys-dev (0.0~git20200219.cb0a6d8-1) ...
Setting up libmagic1:amd64 (1:5.38-4) ...
Setting up golang-github-pmezard-go-difflib-dev (1.0.0-2) ...
Setting up gettext-base (0.19.8.1-10) ...
Setting up golang-github-russross-blackfriday-dev (1.5.2+git20190616.a925a15-1) ...
Setting up golang-github-mendersoftware-mendertesting-dev (0.0~git20180410.9e728b5-2) ...
Setting up file (1:5.38-4) ...
Setting up libicu63:amd64 (63.2-2) ...
Setting up golang-github-davecgh-go-spew-dev (1.1.1-2) ...
Setting up autotools-dev (20180224.1) ...
Setting up libsigsegv2:amd64 (2.12-2) ...
Setting up bsdmainutils (11.1.2+b1) ...
update-alternatives: using /usr/bin/bsd-write to provide /usr/bin/write (write) in auto mode
update-alternatives: using /usr/bin/bsd-from to provide /usr/bin/from (from) in auto mode
Setting up autopoint (0.19.8.1-10) ...
Setting up golang-github-kr-pty-dev (1.1.6-1) ...
Setting up golang-1.13-go (1.13.8-1) ...
Setting up liblzma-dev:amd64 (5.2.4-1+b1) ...
Setting up sensible-utils (0.0.12+nmu1) ...
Setting up golang-golang-x-text-dev (0.3.2-3) ...
Setting up libuchardet0:amd64 (0.0.6-3) ...
Setting up libsub-override-perl (0.09-2) ...
Setting up golang-github-ungerik-go-sysfs-dev (0.0~git20170424.9c991ee-2) ...
Setting up golang-github-mendersoftware-scopestack-dev (0.0~git20180403.c2f5599-2) ...
Setting up golang-src (2:1.13~1) ...
Setting up openssl (1.1.1d-2) ...
Setting up libelf1:amd64 (0.176-1.1) ...
Setting up libxml2:amd64 (2.9.10+dfsg-3) ...
Setting up golang-github-cpuguy83-go-md2man-dev (1.0.10+ds-1) ...
Setting up golang-github-urfave-cli-dev (1.22.2-4) ...
Setting up libfile-stripnondeterminism-perl (1.6.3-2) ...
Setting up golang-github-remyoudompheng-go-liblzma-dev (0.0~git20190506.81bf2d4-2) ...
Setting up libtool (2.4.6-13) ...
Setting up golang-go (2:1.13~1) ...
Setting up m4 (1.4.18-4) ...
Setting up golang-any (2:1.13~1) ...
Setting up ca-certificates (20190110) ...
Updating certificates in /etc/ssl/certs...
128 added, 0 removed; done.
Setting up golang-github-kr-text-dev (0.1.0-1) ...
Setting up libcroco3:amd64 (0.6.13-1) ...
Setting up golang-golang-x-net-dev (1:0.0+git20200219.4628272+dfsg-1) ...
Setting up autoconf (2.69-11.1) ...
Setting up dh-strip-nondeterminism (1.6.3-2) ...
Setting up dwz (0.13-5) ...
Setting up groff-base (1.22.4-4) ...
Setting up automake (1:1.16.1-4) ...
update-alternatives: using /usr/bin/automake-1.16 to provide /usr/bin/automake (automake) in auto mode
Setting up golang-github-kr-pretty-dev (0.1.0-1) ...
Setting up gettext (0.19.8.1-10) ...
Setting up golang-gopkg-check.v1-dev (0.0+git20180628.788fd78-1) ...
Setting up man-db (2.9.0-2) ...
Not building database; man-db/auto-update is not 'true'.
Setting up intltool-debian (0.35.0+20060710.5) ...
Setting up golang-github-bmatsuo-lmdb-go-dev (1.8.0+git20170215.a14b5a3-2) ...
Setting up golang-gopkg-yaml.v2-dev (2.2.8-1) ...
Setting up po-debconf (1.0.21) ...
Setting up golang-github-stretchr-testify-dev (1.4.0+ds-1) ...
Setting up golang-github-sirupsen-logrus-dev (1.4.2-1) ...
Setting up golang-logrus-dev (1.3.0-1) ...
Setting up golang-github-mendersoftware-mender-artifact-dev (3.2.1-1) ...
Setting up golang-github-mendersoftware-log-dev (0.0~git20180403.f608c95-2) ...
Setting up dh-autoreconf (19) ...
Setting up debhelper (12.9) ...
Setting up dh-golang (1.46) ...
Setting up sbuild-build-depends-main-dummy (0.invalid.0) ...
Processing triggers for libc-bin (2.29-10) ...
Processing triggers for ca-certificates (20190110) ...
Updating certificates in /etc/ssl/certs...
0 added, 0 removed; done.
Running hooks in /etc/ca-certificates/update.d...
done.

+------------------------------------------------------------------------------+
| Check architectures                                                          |
+------------------------------------------------------------------------------+

Arch check ok (amd64 included in any)

+------------------------------------------------------------------------------+
| Build environment                                                            |
+------------------------------------------------------------------------------+

Kernel: Linux 4.19.0-6-cloud-amd64 #1 SMP Debian 4.19.67-2+deb10u2 (2019-11-11) amd64 (x86_64)
Toolchain package versions: binutils_2.34-3 dpkg-dev_1.19.7 g++-9_9.2.1-29 gcc-9_9.2.1-29 libc6-dev_2.29-10 libstdc++-8-dev_8.3.0-29 libstdc++-9-dev_9.2.1-29 libstdc++6_10-20200222-1 linux-libc-dev_5.4.19-1
Package versions: adduser_3.118 apt_1.8.4 autoconf_2.69-11.1 automake_1:1.16.1-4 autopoint_0.19.8.1-10 autotools-dev_20180224.1 base-files_11 base-passwd_3.5.47 bash_5.0-5 binutils_2.34-3 binutils-common_2.34-3 binutils-x86-64-linux-gnu_2.34-3 bsdmainutils_11.1.2+b1 bsdutils_1:2.34-0.1 build-essential_12.8 bzip2_1.0.8-2 ca-certificates_20190110 clang-8_1:8.0.1-7 coreutils_8.30-3+b1 cpp_4:9.2.1-3.1 cpp-9_9.2.1-29 dash_0.5.10.2-6 debconf_1.5.73 debhelper_12.9 debian-archive-keyring_2019.1 debianutils_4.9.1 dh-autoreconf_19 dh-golang_1.46 dh-strip-nondeterminism_1.6.3-2 diffutils_1:3.7-3 dpkg_1.19.7 dpkg-dev_1.19.7 dwz_0.13-5 e2fsprogs_1.45.5-2 fakeroot_1.24-1 fdisk_2.34-0.1 file_1:5.38-4 findutils_4.7.0-1 g++_4:9.2.1-3.1 g++-9_9.2.1-29 gcc_4:9.2.1-3.1 gcc-10-base_10-20200222-1 gcc-8-base_8.3.0-29 gcc-9_9.2.1-29 gcc-9-base_9.2.1-29 gettext_0.19.8.1-10 gettext-base_0.19.8.1-10 golang-1.13-go_1.13.8-1 golang-1.13-src_1.13.8-1 golang-any_2:1.13~1 golang-github-bmatsuo-lmdb-go-dev_1.8.0+git20170215.a14b5a3-2 golang-github-cpuguy83-go-md2man-dev_1.0.10+ds-1 golang-github-davecgh-go-spew-dev_1.1.1-2 golang-github-kr-pretty-dev_0.1.0-1 golang-github-kr-pty-dev_1.1.6-1 golang-github-kr-text-dev_0.1.0-1 golang-github-mendersoftware-log-dev_0.0~git20180403.f608c95-2 golang-github-mendersoftware-mender-artifact-dev_3.2.1-1 golang-github-mendersoftware-mendertesting-dev_0.0~git20180410.9e728b5-2 golang-github-mendersoftware-scopestack-dev_0.0~git20180403.c2f5599-2 golang-github-pkg-errors-dev_0.8.1-1 golang-github-pmezard-go-difflib-dev_1.0.0-2 golang-github-remyoudompheng-go-liblzma-dev_0.0~git20190506.81bf2d4-2 golang-github-russross-blackfriday-dev_1.5.2+git20190616.a925a15-1 golang-github-shurcool-sanitized-anchor-name-dev_1.0.0-1 golang-github-sirupsen-logrus-dev_1.4.2-1 golang-github-stretchr-objx-dev_0.1.1+git20180825.ef50b0d-1 golang-github-stretchr-testify-dev_1.4.0+ds-1 golang-github-ungerik-go-sysfs-dev_0.0~git20170424.9c991ee-2 golang-github-urfave-cli-dev_1.22.2-4 golang-go_2:1.13~1 golang-golang-x-net-dev_1:0.0+git20200219.4628272+dfsg-1 golang-golang-x-sys-dev_0.0~git20200219.cb0a6d8-1 golang-golang-x-text-dev_0.3.2-3 golang-gopkg-check.v1-dev_0.0+git20180628.788fd78-1 golang-gopkg-yaml.v2-dev_2.2.8-1 golang-logrus-dev_1.3.0-1 golang-src_2:1.13~1 gpgv_2.2.19-1 grep_3.4-1 groff-base_1.22.4-4 gzip_1.9-3+b1 hostname_3.23 init-system-helpers_1.57 intltool-debian_0.35.0+20060710.5 lib32gcc-s1_10-20200222-1 lib32gcc1_1:10-20200222-1 lib32stdc++6_10-20200222-1 libacl1_2.2.53-5 libapt-pkg5.0_1.8.4 libarchive-zip-perl_1.67-1 libasan5_9.2.1-29 libatomic1_10-20200222-1 libattr1_1:2.4.48-5 libaudit-common_1:2.8.5-2 libaudit1_1:2.8.5-2+b1 libbinutils_2.34-3 libblkid1_2.34-0.1 libbsd0_0.10.0-1 libbz2-1.0_1.0.8-2 libc-bin_2.29-10 libc-dev-bin_2.29-10 libc6_2.29-10 libc6-dev_2.29-10 libc6-i386_2.29-10 libcap-ng0_0.7.9-2.1+b1 libcc1-0_10-20200222-1 libclang-common-8-dev_1:8.0.1-7 libclang1-8_1:8.0.1-7 libcom-err2_1.45.5-2 libcroco3_0.6.13-1 libcrypt-dev_1:4.4.10-10 libcrypt1_1:4.4.10-10 libctf-nobfd0_2.34-3 libctf0_2.34-3 libdb5.3_5.3.28+dfsg1-0.6 libdebconfclient0_0.251 libdebhelper-perl_12.9 libdpkg-perl_1.19.7 libedit2_3.1-20191231-1 libelf1_0.176-1.1 libext2fs2_1.45.5-2 libfakeroot_1.24-1 libfdisk1_2.34-0.1 libffi7_3.3-3 libfile-stripnondeterminism-perl_1.6.3-2 libgc1c2_1:7.6.4-0.4 libgcc-8-dev_8.3.0-29 libgcc-9-dev_9.2.1-29 libgcc-s1_10-20200222-1 libgcc1_1:10-20200222-1 libgcrypt20_1.8.5-5 libgdbm-compat4_1.18.1-5 libgdbm6_1.18.1-5 libglib2.0-0_2.62.4-2 libgmp10_2:6.2.0+dfsg-4 libgnutls30_3.6.12-2 libgomp1_10-20200222-1 libgpg-error0_1.37-1 libhogweed5_3.5.1+really3.5.1-2 libicu63_63.2-2 libidn2-0_2.2.0-2 libisl22_0.22.1-1 libitm1_10-20200222-1 libllvm8_1:8.0.1-7 liblsan0_10-20200222-1 liblz4-1_1.9.2-2 liblzma-dev_5.2.4-1+b1 liblzma5_5.2.4-1+b1 libmagic-mgc_1:5.38-4 libmagic1_1:5.38-4 libmount1_2.34-0.1 libmpc3_1.1.0-1 libmpfr6_4.0.2-1 libmpx2_8.3.0-29 libncursesw6_6.1+20191019-1 libnettle7_3.5.1+really3.5.1-2 libobjc-8-dev_8.3.0-29 libobjc-9-dev_9.2.1-29 libobjc4_10-20200222-1 libomp-8-dev_1:8.0.1-7 libomp5-8_1:8.0.1-7 libp11-kit0_0.23.20-1 libpam-modules_1.3.1-5 libpam-modules-bin_1.3.1-5 libpam-runtime_1.3.1-5 libpam0g_1.3.1-5 libpcre2-8-0_10.34-7 libpcre3_2:8.39-12+b1 libperl5.30_5.30.0-9 libpipeline1_1.5.2-2 libquadmath0_10-20200222-1 libseccomp2_2.4.2-2 libselinux1_3.0-1+b1 libsemanage-common_3.0-1 libsemanage1_3.0-1+b1 libsepol1_3.0-1 libsigsegv2_2.12-2 libsmartcols1_2.34-0.1 libss2_1.45.5-2 libssl1.1_1.1.1d-2 libstdc++-8-dev_8.3.0-29 libstdc++-9-dev_9.2.1-29 libstdc++6_10-20200222-1 libsub-override-perl_0.09-2 libsystemd0_244.3-1 libtasn1-6_4.16.0-2 libtinfo6_6.1+20191019-1 libtool_2.4.6-13 libtsan0_10-20200222-1 libubsan1_10-20200222-1 libuchardet0_0.0.6-3 libudev1_244.3-1 libunistring2_0.9.10-2 libuuid1_2.34-0.1 libxml2_2.9.10+dfsg-3 libzstd1_1.4.4+dfsg-3 linux-libc-dev_5.4.19-1 login_1:4.8.1-1 logsave_1.45.5-2 lsb-base_11.1.0 m4_1.4.18-4 make_4.2.1-1.2 man-db_2.9.0-2 mawk_1.3.4.20200120-2 mount_2.34-0.1 ncurses-base_6.1+20191019-1 ncurses-bin_6.1+20191019-1 openssl_1.1.1d-2 passwd_1:4.8.1-1 patch_2.7.6-6 perl_5.30.0-9 perl-base_5.30.0-9 perl-modules-5.30_5.30.0-9 po-debconf_1.0.21 sbuild-build-depends-main-dummy_0.invalid.0 sed_4.7-1 sensible-utils_0.0.12+nmu1 sysvinit-utils_2.96-2.1 tar_1.30+dfsg-6+b1 tzdata_2019c-3 util-linux_2.34-0.1 xz-utils_5.2.4-1+b1 zlib1g_1:1.2.11.dfsg-1.2

+------------------------------------------------------------------------------+
| Build                                                                        |
+------------------------------------------------------------------------------+


Unpack source
-------------

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

Format: 3.0 (quilt)
Source: mender-client
Binary: mender-client
Architecture: any
Version: 2.1.2-2
Maintainer: Debian Go Packaging Team <team+pkg-go@tracker.debian.org>
Uploaders: Andreas Henriksson <andreas@fatal.se>, Lluis Campos <lluis.campos@northern.tech>
Homepage: https://github.com/mendersoftware/mender
Standards-Version: 4.2.1
Vcs-Browser: https://salsa.debian.org/go-team/packages/mender-client
Vcs-Git: https://salsa.debian.org/go-team/packages/mender-client.git
Testsuite: autopkgtest-pkg-go
Build-Depends: debhelper (>= 11), dh-golang, golang-any, golang-github-pkg-errors-dev, golang-github-stretchr-testify-dev, golang-golang-x-net-dev, golang-golang-x-sys-dev, golang-logrus-dev, golang-github-bmatsuo-lmdb-go-dev, golang-github-ungerik-go-sysfs-dev, golang-github-mendersoftware-mender-artifact-dev (>= 3.1.0), golang-github-mendersoftware-log-dev, golang-github-mendersoftware-mendertesting-dev, ca-certificates <!nocheck>
Package-List:
 mender-client deb devel optional arch=any
Checksums-Sha1:
 51e3754d58de2bc67dabbb8ad20604897a13fe20 138864 mender-client_2.1.2.orig.tar.xz
 bd56216df46efad3831aeead68b43701ff3e8b10 7204 mender-client_2.1.2-2.debian.tar.xz
Checksums-Sha256:
 7ed51faa143e9b03bcb2a6c054d92171bf2c851a8751a9ba8cc96ea43a9d10f4 138864 mender-client_2.1.2.orig.tar.xz
 1770bf92c5138277ac69154be61bc4e1091a91cb53da987339097f57cfd77eca 7204 mender-client_2.1.2-2.debian.tar.xz
Files:
 5c2d41aff12bf442b90a68ff28b5eef1 138864 mender-client_2.1.2.orig.tar.xz
 9023b36f310b4de76bf277e2c8af0ed9 7204 mender-client_2.1.2-2.debian.tar.xz
Go-Import-Path: github.com/mendersoftware/mender

-----BEGIN PGP SIGNATURE-----

iQJFBAEBCgAvFiEE+uHltkZSvnmOJ4zCC8R9xk0TUwYFAl3+lrsRHGFuZHJlYXNA
ZmF0YWwuc2UACgkQC8R9xk0TUwbn3RAAnNgqV2fhUUXncU8iIzQRBX3z8+ERsfCK
KzKBEPedYdOuwu1YAJLy2vpw13JdHVoXbHO0LgnH0AKt/Dp4Pn6ZL1ldH9b3+XiK
Urgl0Uzv9qqehTox4YrMFCJ4Zw4G9jW2QS1CGnGjfD5HaQ09KUrtuP+NzfcCHhJ8
uYFYtr6Lg4DpCrj4GDERNnmvDjJvABseTYZjUaZZvT6KJ0BkWBvIQD2YgiBxR+ry
9NjPk2bVuBxSFBOPM9Fx5TkcgUWS1aypDw0tYCxY3P5s7rs9Qxp8ZbycnMOSywYg
uZ7yivXdaASE6pkJHFspAeQwIN6GTm+ynedW79ahwLzFVMmyxAsQ6+oK/v686OX9
5SGoTZP+v1h9nKOfnX1ug271vfcCoHHr6Sb+L3GN1OEKE5iLQYG+HOI2lOBZgvvG
q42ZMhVgTaVokMK+AjSMPDbDO1Sy9XbuEXpWX5/UvGpynreBz5yLJdAzyYg2c0JM
U1NUliMi/2qK0PsNh96h1H9TyTNk2LC1QPxd9O9EkVZ4dPjSBpv5k2SGhjvnmDBw
5e4ij8jjMZEAKq3/Tcg23TyhQ4+5enm+TiCD/5xtIFvWLEzz29F2JghMnoqq2moV
8smbkdkoWNZ+qGe75gisZRSI4mmEkrwQJe997l8L2ZhmMkCSWnIbT/glMdn9xWeu
FMSAFL5lOiY=
=RGEk
-----END PGP SIGNATURE-----

gpgv: unknown type of key resource 'trustedkeys.kbx'
gpgv: keyblock resource '/sbuild-nonexistent/.gnupg/trustedkeys.kbx': General error
gpgv: Signature made Sat Dec 21 22:03:39 2019 UTC
gpgv:                using RSA key FAE1E5B64652BE798E278CC20BC47DC64D135306
gpgv:                issuer "andreas@fatal.se"
gpgv: Can't check signature: No public key
dpkg-source: warning: failed to verify signature on ./mender-client_2.1.2-2.dsc
dpkg-source: info: extracting mender-client in /<<PKGBUILDDIR>>
dpkg-source: info: unpacking mender-client_2.1.2.orig.tar.xz
dpkg-source: info: unpacking mender-client_2.1.2-2.debian.tar.xz
dpkg-source: info: using patch list from debian/patches/series
dpkg-source: info: applying 0001-Skip-TestLicense-for-Debian-Unit-Test-suite.patch
dpkg-source: info: applying 0002-Use-UBI_IOCVOLUP-from-golang.org-x-sys-unix-package.patch
dpkg-source: info: applying 0003-Update-tests-to-use-artifact-v2.patch

Check disk space
----------------

Sufficient free space for build

User Environment
----------------

APT_CONFIG=/var/lib/sbuild/apt.conf
HOME=/sbuild-nonexistent
LANG=C.UTF-8
LC_ALL=C.UTF-8
LOGNAME=user42
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
SCHROOT_ALIAS_NAME=unstable
SCHROOT_CHROOT_NAME=sid-amd64-sbuild
SCHROOT_COMMAND=env
SCHROOT_GID=1001
SCHROOT_GROUP=user42
SCHROOT_SESSION_ID=sid-amd64-sbuild-11f384ae-ad7e-4993-829d-411dab6c9aea
SCHROOT_UID=1001
SCHROOT_USER=user42
SHELL=/bin/sh
USER=user42

dpkg-buildpackage
-----------------

Command: dpkg-buildpackage -us -uc -b -rfakeroot
dpkg-buildpackage: info: source package mender-client
dpkg-buildpackage: info: source version 2.1.2-2
dpkg-buildpackage: info: source distribution unstable
dpkg-buildpackage: info: source changed by Andreas Henriksson <andreas@fatal.se>
 dpkg-source --before-build .
dpkg-buildpackage: info: host architecture amd64
 fakeroot debian/rules clean
dh clean --buildsystem=golang --with=golang
   dh_auto_clean -O--buildsystem=golang
   dh_autoreconf_clean -O--buildsystem=golang
   dh_clean -O--buildsystem=golang
 debian/rules build
dh build --buildsystem=golang --with=golang
   dh_update_autotools_config -O--buildsystem=golang
   dh_autoreconf -O--buildsystem=golang
   dh_auto_configure -O--buildsystem=golang
   debian/rules override_dh_auto_build
make[1]: Entering directory '/<<PKGBUILDDIR>>'
dh_auto_build -O--buildsystem=golang -- \
	-ldflags "-X main.Version=2.1.2-2"
	cd obj-x86_64-linux-gnu && go install -trimpath -v -p 4 -ldflags "-X main.Version=2.1.2-2" github.com/mendersoftware/mender github.com/mendersoftware/mender/client github.com/mendersoftware/mender/client/test github.com/mendersoftware/mender/datastore github.com/mendersoftware/mender/installer github.com/mendersoftware/mender/statescript github.com/mendersoftware/mender/store github.com/mendersoftware/mender/system github.com/mendersoftware/mender/system/testing github.com/mendersoftware/mender/utils
runtime/internal/sys
internal/race
runtime/internal/atomic
internal/cpu
runtime/internal/math
sync/atomic
unicode
unicode/utf8
internal/bytealg
encoding
math/bits
internal/testlog
math
unicode/utf16
container/list
internal/nettrace
runtime
crypto/internal/subtle
runtime/cgo
crypto/subtle
vendor/golang.org/x/crypto/cryptobyte/asn1
vendor/golang.org/x/crypto/internal/subtle
vendor/golang.org/x/crypto/curve25519
github.com/bmatsuo/lmdb-go/internal/lmdbarch
internal/reflectlite
sync
math/rand
internal/singleflight
errors
sort
io
strconv
internal/oserror
vendor/golang.org/x/net/dns/dnsmessage
syscall
bytes
reflect
bufio
strings
hash
crypto
crypto/internal/randutil
crypto/hmac
crypto/rc4
vendor/golang.org/x/crypto/hkdf
path
hash/crc32
golang.org/x/text/transform
time
internal/syscall/unix
vendor/golang.org/x/text/transform
github.com/remyoudompheng/go-liblzma
regexp/syntax
internal/poll
encoding/binary
internal/fmtsort
encoding/base64
context
os
golang.org/x/sys/unix
crypto/cipher
crypto/aes
fmt
net
encoding/json
flag
github.com/mendersoftware/scopestack
log
crypto/des
github.com/sirupsen/logrus
math/big
crypto/sha512
crypto/ed25519/internal/edwards25519
crypto/md5
crypto/sha1
crypto/sha256
crypto/elliptic
encoding/asn1
crypto/rand
crypto/ed25519
crypto/rsa
crypto/dsa
crypto/ecdsa
encoding/hex
crypto/x509/pkix
encoding/pem
vendor/golang.org/x/crypto/cryptobyte
path/filepath
net/url
io/ioutil
vendor/golang.org/x/crypto/internal/chacha20
vendor/golang.org/x/crypto/poly1305
vendor/golang.org/x/sys/cpu
github.com/pkg/errors
compress/flate
github.com/mendersoftware/mender/datastore
vendor/golang.org/x/crypto/chacha20poly1305
golang.org/x/text/unicode/bidi
compress/gzip
golang.org/x/text/unicode/norm
golang.org/x/net/http2/hpack
golang.org/x/text/secure/bidirule
vendor/golang.org/x/text/unicode/bidi
vendor/golang.org/x/text/unicode/norm
vendor/golang.org/x/text/secure/bidirule
vendor/golang.org/x/net/http2/hpack
mime
golang.org/x/net/idna
mime/quotedprintable
vendor/golang.org/x/net/idna
net/http/internal
os/user
regexp
os/exec
github.com/ungerik/go-sysfs
github.com/mendersoftware/mender/utils
github.com/mendersoftware/mender/system
github.com/bmatsuo/lmdb-go/lmdb
github.com/davecgh/go-spew/spew
github.com/pmezard/go-difflib/difflib
github.com/stretchr/objx
log/syslog
github.com/sirupsen/logrus/hooks/syslog
github.com/mendersoftware/log
crypto/x509
net/textproto
golang.org/x/net/http/httpguts
vendor/golang.org/x/net/http/httpguts
vendor/golang.org/x/net/http/httpproxy
mime/multipart
crypto/tls
gopkg.in/yaml.v2
os/signal
github.com/mendersoftware/mender/system/testing
net/http/httptrace
net/http
archive/tar
github.com/mendersoftware/mender-artifact/artifact
github.com/mendersoftware/mender-artifact/handlers
github.com/mendersoftware/mender-artifact/areader
net/http/httptest
golang.org/x/net/http2
github.com/stretchr/testify/assert
github.com/stretchr/testify/mock
github.com/mendersoftware/mender/client
github.com/mendersoftware/mender/client/test
github.com/mendersoftware/mender/statescript
github.com/mendersoftware/mender/installer
github.com/mendersoftware/mender/store
github.com/mendersoftware/mender
make[1]: Leaving directory '/<<PKGBUILDDIR>>'
   debian/rules override_dh_auto_test
make[1]: Entering directory '/<<PKGBUILDDIR>>'
dh_auto_test || true
	cd obj-x86_64-linux-gnu && go test -vet=off -v -p 4 github.com/mendersoftware/mender github.com/mendersoftware/mender/client github.com/mendersoftware/mender/client/test github.com/mendersoftware/mender/datastore github.com/mendersoftware/mender/installer github.com/mendersoftware/mender/statescript github.com/mendersoftware/mender/store github.com/mendersoftware/mender/system github.com/mendersoftware/mender/system/testing github.com/mendersoftware/mender/utils
=== RUN   TestNewAuthManager
--- PASS: TestNewAuthManager (0.00s)
=== RUN   TestAuthManager
--- PASS: TestAuthManager (0.84s)
=== RUN   TestAuthManagerRequest
--- PASS: TestAuthManagerRequest (1.05s)
=== RUN   TestAuthManagerResponse
--- PASS: TestAuthManagerResponse (0.00s)
=== RUN   Test_readConfigFile_noFile_returnsError
--- PASS: Test_readConfigFile_noFile_returnsError (0.00s)
=== RUN   Test_readConfigFile_brokenContent_returnsError
time="2020-02-24T20:27:05Z" level=error msg="Error loading configuration from file: mender.config (Error parsing mender configuration file: invalid character '\\n' in string literal)" module=config
--- PASS: Test_readConfigFile_brokenContent_returnsError (0.00s)
=== RUN   Test_loadConfig_correctConfFile_returnsConfiguration
time="2020-02-24T20:27:05Z" level=info msg="Loaded configuration file: mender.config" module=config
time="2020-02-24T20:27:05Z" level=info msg="Loaded configuration file: mender.config" module=config
--- PASS: Test_loadConfig_correctConfFile_returnsConfiguration (0.00s)
=== RUN   TestServerURLConfig
time="2020-02-24T20:27:05Z" level=info msg="Loaded configuration file: mender.config" module=config
time="2020-02-24T20:27:05Z" level=info msg="Loaded configuration file: mender.config" module=config
time="2020-02-24T20:27:05Z" level=error msg="In mender.conf: don't specify both Servers field AND the corresponding fields in base structure (i.e. ServerURL). The first server on the list on thelist overwrites these fields." module=config
--- PASS: TestServerURLConfig (0.00s)
=== RUN   TestMultipleServersConfig
time="2020-02-24T20:27:05Z" level=info msg="Loaded configuration file: /tmp/mendertest507384050/mender.conf" module=config
--- PASS: TestMultipleServersConfig (0.00s)
=== RUN   TestConfigurationMergeSettings
time="2020-02-24T20:27:05Z" level=info msg="Loaded configuration file: fallback.config" module=config
time="2020-02-24T20:27:05Z" level=info msg="Loaded configuration file: main.config" module=config
time="2020-02-24T20:27:05Z" level=warning msg="No server URL(s) specified in mender configuration." module=config
time="2020-02-24T20:27:05Z" level=warning msg="Server entry 1 has no associated server URL." module=config
--- PASS: TestConfigurationMergeSettings (0.00s)
=== RUN   TestConfigurationNeitherFileExistsIsNotError
time="2020-02-24T20:27:05Z" level=info msg="No configuration files present. Using defaults" module=config
--- PASS: TestConfigurationNeitherFileExistsIsNotError (0.00s)
=== RUN   TestDaemon
time="2020-02-24T20:27:05Z" level=info msg="State transition: init [none] -> init [none]" module=mender
--- PASS: TestDaemon (0.00s)
=== RUN   TestDaemonCleanup
time="2020-02-24T20:27:05Z" level=error msg="failed to close data store: foo" module=daemon
--- PASS: TestDaemonCleanup (0.00s)
    daemon_test.go:186: PASS:	Close()
    daemon_test.go:194: PASS:	Close()
=== RUN   TestDaemonRun
=== RUN   TestDaemonRun/Testrun_daemon
=== RUN   TestDaemonRun/testing_state_machine_interrupt_functionality_-_updateCheck_state
time="2020-02-24T20:29:36Z" level=info msg="Forcing state machine to: update-check" module=daemon
=== RUN   TestDaemonRun/testing_state_machine_interrupt_functionality_-_inventoryUpdate_state
time="2020-02-24T20:29:37Z" level=info msg="Forcing state machine to: inventory-update" module=daemon
--- PASS: TestDaemonRun (152.00s)
    --- PASS: TestDaemonRun/Testrun_daemon (150.00s)
        daemon_test.go:243: poke count: 5
    --- PASS: TestDaemonRun/testing_state_machine_interrupt_functionality_-_updateCheck_state (1.00s)
    --- PASS: TestDaemonRun/testing_state_machine_interrupt_functionality_-_inventoryUpdate_state (1.00s)
=== RUN   TestFileLogger
--- PASS: TestFileLogger (0.03s)
=== RUN   TestLogManagerInit
--- PASS: TestLogManagerInit (0.00s)
=== RUN   TestLogManagerCheckEnableDisable
time="2020-02-24T20:29:37Z" level=info msg="Running Mender version unknown" module=deployment_logger
--- PASS: TestLogManagerCheckEnableDisable (0.00s)
=== RUN   TestLogManagerCheckLogging
time="2020-02-24T20:29:37Z" level=info msg="Running Mender version unknown" module=deployment_logger
--- PASS: TestLogManagerCheckLogging (0.00s)
=== RUN   TestLogManagerLogRotation
time="2020-02-24T20:29:37Z" level=info msg="Running Mender version unknown" module=deployment_logger
time="2020-02-24T20:29:37Z" level=info msg="Running Mender version unknown" module=deployment_logger
--- PASS: TestLogManagerLogRotation (0.00s)
=== RUN   TestEnabligLogsNoSpceForStoringLogs
--- PASS: TestEnabligLogsNoSpceForStoringLogs (0.00s)
=== RUN   TestDeploymentLoggingHook
time="2020-02-24T20:29:37Z" level=info msg=test1 module=deployment_logger_test
time="2020-02-24T20:29:37Z" level=info msg="Running Mender version unknown" module=deployment_logger
time="2020-02-24T20:29:37Z" level=info msg=test3 module=deployment_logger_test
--- PASS: TestDeploymentLoggingHook (0.00s)
=== RUN   TestGetLogs
time="2020-02-24T20:29:37Z" level=info msg="Running Mender version unknown" module=deployment_logger
--- PASS: TestGetLogs (0.00s)
=== RUN   TestFindLogFiles
--- PASS: TestFindLogFiles (0.00s)
=== RUN   TestMenderError
--- PASS: TestMenderError (0.00s)
=== RUN   TestDeviceIdentityGet
--- PASS: TestDeviceIdentityGet (0.13s)
    identity_data_test.go:93: test case: 0
    identity_data_test.go:93: test case: 1
    identity_data_test.go:93: test case: 2
    identity_data_test.go:93: test case: 3
    identity_data_test.go:93: test case: 4
=== RUN   TestInventoryDataDecoder
--- PASS: TestInventoryDataDecoder (0.00s)
=== RUN   TestLicenses
--- SKIP: TestLicenses (0.00s)
    license_test.go:21: Skip TestLicenses test, non applicable on Debian Git repo
=== RUN   TestMissingArgs
time="2020-02-24T20:29:37Z" level=warning msg="Could not connect to syslog daemon: Unix syslog delivery error. (use -no-syslog to disable completely)" module=main
time="2020-02-24T20:29:37Z" level=info msg="No configuration files present. Using defaults" module=config
time="2020-02-24T20:29:37Z" level=info msg="No dual rootfs configuration present" module=main
--- PASS: TestMissingArgs (0.00s)
=== RUN   TestAmbiguousArgumentsArgs
--- PASS: TestAmbiguousArgumentsArgs (0.00s)
=== RUN   TestArgsParseCheckUpdate
--- PASS: TestArgsParseCheckUpdate (0.00s)
=== RUN   TestRunDaemon
--- PASS: TestRunDaemon (4.40s)
=== RUN   TestLoggingOptions
--- PASS: TestLoggingOptions (0.00s)
=== RUN   TestBinarySize
--- FAIL: TestBinarySize (3.49s)
    main_test.go:199: Go version: go version go1.13.8 linux/amd64
    main_test.go:222: '/tmp/mender' has grown unexpectedly big (7683000 bytes). Check that file size is ok?
=== RUN   TestVersion
--- PASS: TestVersion (0.00s)
=== RUN   TestMainBootstrap
--- PASS: TestMainBootstrap (7.21s)
=== RUN   TestPrintArtifactName
foobar
db-name
foobar
--- PASS: TestPrintArtifactName (0.01s)
=== RUN   TestGetMenderDaemonPID
--- PASS: TestGetMenderDaemonPID (0.01s)
=== RUN   TestInitDaemon
--- PASS: TestInitDaemon (0.00s)
=== RUN   TestInvalidServerCertificateBoot
--- PASS: TestInvalidServerCertificateBoot (0.08s)
=== RUN   Test_getArtifactName_noArtifactNameInFile_returnsEmptyName
--- PASS: Test_getArtifactName_noArtifactNameInFile_returnsEmptyName (0.00s)
=== RUN   Test_getArtifactName_malformedArtifactNameLine_returnsError
--- PASS: Test_getArtifactName_malformedArtifactNameLine_returnsError (0.00s)
=== RUN   Test_getArtifactName_haveArtifactName_returnsName
--- PASS: Test_getArtifactName_haveArtifactName_returnsName (0.00s)
=== RUN   Test_ForceBootstrap
--- PASS: Test_ForceBootstrap (1.50s)
=== RUN   Test_Bootstrap
--- PASS: Test_Bootstrap (1.11s)
=== RUN   Test_BootstrappedHaveKeys
--- PASS: Test_BootstrappedHaveKeys (0.79s)
=== RUN   Test_BootstrapError
--- PASS: Test_BootstrapError (2.29s)
=== RUN   Test_CheckUpdateSimple
--- PASS: Test_CheckUpdateSimple (0.00s)
=== RUN   TestMenderGetUpdatePollInterval
--- PASS: TestMenderGetUpdatePollInterval (0.00s)
=== RUN   TestMenderGetInventoryPollInterval
--- PASS: TestMenderGetInventoryPollInterval (0.00s)
=== RUN   TestMenderAuthorize
--- PASS: TestMenderAuthorize (0.00s)
=== RUN   TestMenderReportStatus
--- PASS: TestMenderReportStatus (1.35s)
=== RUN   TestMenderLogUpload
--- PASS: TestMenderLogUpload (2.64s)
=== RUN   TestAuthToken
--- PASS: TestAuthToken (0.60s)
=== RUN   TestMenderInventoryRefresh
--- PASS: TestMenderInventoryRefresh (0.00s)
=== RUN   TestMenderStoreUpdate
--- PASS: TestMenderStoreUpdate (0.01s)
=== RUN   TestMenderFetchUpdate
--- PASS: TestMenderFetchUpdate (0.00s)
=== RUN   TestReauthorization
--- PASS: TestReauthorization (1.75s)
=== RUN   TestFailoverServers
--- PASS: TestFailoverServers (3.19s)
=== RUN   Test_doManualUpdate_noParams_fail
--- PASS: Test_doManualUpdate_noParams_fail (0.00s)
=== RUN   Test_doManualUpdate_invalidHttpsClientConfig_updateFails
--- PASS: Test_doManualUpdate_invalidHttpsClientConfig_updateFails (0.00s)
=== RUN   Test_doManualUpdate_nonExistingFile_fail
--- PASS: Test_doManualUpdate_nonExistingFile_fail (0.00s)
=== RUN   Test_doManualUpdate_networkUpdateNoClient_fail
--- PASS: Test_doManualUpdate_networkUpdateNoClient_fail (0.02s)
=== RUN   Test_doManualUpdate_networkClientExistsNoServer_fail
--- PASS: Test_doManualUpdate_networkClientExistsNoServer_fail (0.00s)
=== RUN   Test_doManualUpdate_existingFile_updateSuccess
Installing Artifact of size 5120...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
--- PASS: Test_doManualUpdate_existingFile_updateSuccess (0.02s)
=== RUN   TestStandaloneModuleInstall
=== RUN   TestStandaloneModuleInstall/Normal_install,_no_rollback
Installing Artifact of size 5632...
.                                100% 5 KiB
Artifact doesn't support rollback. Committing immediately.
Committing Artifact...
At least one payload requested a reboot of the device it updated.
=== RUN   TestStandaloneModuleInstall/Normal_install
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
=== RUN   TestStandaloneModuleInstall/Normal_commit
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
Committing Artifact...
=== RUN   TestStandaloneModuleInstall/Normal_rollback
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_Download_Enter_00
Installing Artifact of size 5632...
=== RUN   TestStandaloneModuleInstall/Fail_in_Download
Installing Artifact of size 5632...
=== RUN   TestStandaloneModuleInstall/Fail_in_Download_Leave_00
Installing Artifact of size 5632...
.                                100% 5 KiB
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactInstall_Enter_00
Installing Artifact of size 5632...
.                                100% 5 KiB
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactInstall
Installing Artifact of size 5632...
.                                100% 5 KiB
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactInstall_Leave_00
Installing Artifact of size 5632...
.                                100% 5 KiB
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactCommit_Enter_00
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
Committing Artifact...
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactCommit
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
Committing Artifact...
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactCommit_Leave_00
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
Committing Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactCommit_Enter_00,_no_rollback
Installing Artifact of size 5632...
.                                100% 5 KiB
Artifact doesn't support rollback. Committing immediately.
Committing Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactCommit,_no_rollback
Installing Artifact of size 5632...
.                                100% 5 KiB
Artifact doesn't support rollback. Committing immediately.
Committing Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactCommit_Leave_00,_no_rollback
Installing Artifact of size 5632...
.                                100% 5 KiB
Artifact doesn't support rollback. Committing immediately.
Committing Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactRollback_Enter_00
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactRollback
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_ArtifactRollback_Leave_00
Installing Artifact of size 5632...
.                                100% 5 KiB
Use -commit to update, or -rollback to roll back the update.
At least one payload requested a reboot of the device it updated.
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_automatic_ArtifactRollback_Enter_00
Installing Artifact of size 5632...
.                                100% 5 KiB
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_automatic_ArtifactRollback
Installing Artifact of size 5632...
.                                100% 5 KiB
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Fail_in_automatic_ArtifactRollback_Leave_00
Installing Artifact of size 5632...
.                                100% 5 KiB
Rolling back Artifact...
=== RUN   TestStandaloneModuleInstall/Hang_in_Download
Installing Artifact of size 5632...
=== RUN   TestStandaloneModuleInstall/Hang_in_ArtifactInstall
Installing Artifact of size 5632...
.                                100% 5 KiB
Rolling back Artifact...
--- PASS: TestStandaloneModuleInstall (14.15s)
    --- PASS: TestStandaloneModuleInstall/Normal_install,_no_rollback (2.48s)
    --- PASS: TestStandaloneModuleInstall/Normal_install (0.05s)
    --- PASS: TestStandaloneModuleInstall/Normal_commit (0.13s)
    --- PASS: TestStandaloneModuleInstall/Normal_rollback (0.04s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_Download_Enter_00 (0.02s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_Download (0.05s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_Download_Leave_00 (0.05s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactInstall_Enter_00 (0.06s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactInstall (0.07s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactInstall_Leave_00 (0.05s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactCommit_Enter_00 (0.06s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactCommit (0.12s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactCommit_Leave_00 (0.06s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactCommit_Enter_00,_no_rollback (0.08s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactCommit,_no_rollback (0.07s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactCommit_Leave_00,_no_rollback (0.06s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactRollback_Enter_00 (0.07s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactRollback (0.08s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_ArtifactRollback_Leave_00 (0.07s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_automatic_ArtifactRollback_Enter_00 (0.08s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_automatic_ArtifactRollback (0.07s)
    --- PASS: TestStandaloneModuleInstall/Fail_in_automatic_ArtifactRollback_Leave_00 (0.10s)
    --- PASS: TestStandaloneModuleInstall/Hang_in_Download (5.06s)
    --- PASS: TestStandaloneModuleInstall/Hang_in_ArtifactInstall (5.16s)
=== RUN   TestStateBase
--- PASS: TestStateBase (0.00s)
=== RUN   TestStateWait
--- PASS: TestStateWait (0.10s)
=== RUN   TestStateError
--- PASS: TestStateError (0.00s)
=== RUN   TestStateUpdateReportStatus
--- PASS: TestStateUpdateReportStatus (0.02s)
=== RUN   TestStateIdle
--- PASS: TestStateIdle (0.00s)
=== RUN   TestStateAuthorize
--- PASS: TestStateAuthorize (0.00s)
=== RUN   TestStateInvetoryUpdate
--- PASS: TestStateInvetoryUpdate (0.00s)
=== RUN   TestStateAuthorizeWait
--- PASS: TestStateAuthorizeWait (0.10s)
=== RUN   TestStateUpdateCheckWait
--- PASS: TestStateUpdateCheckWait (0.02s)
=== RUN   TestStateUpdateCheck
--- PASS: TestStateUpdateCheck (0.00s)
=== RUN   TestUpdateCheckSameImage
--- PASS: TestUpdateCheckSameImage (0.00s)
=== RUN   TestStateUpdateFetch
--- PASS: TestStateUpdateFetch (0.00s)
=== RUN   TestStateUpdateFetchRetry
--- PASS: TestStateUpdateFetchRetry (0.00s)
=== RUN   TestStateUpdateStore
--- PASS: TestStateUpdateStore (0.00s)
=== RUN   TestStateWrongArtifactNameFromServer
--- PASS: TestStateWrongArtifactNameFromServer (0.00s)
=== RUN   TestStateUpdateInstallRetry
--- PASS: TestStateUpdateInstallRetry (0.00s)
=== RUN   TestStateFinal
--- PASS: TestStateFinal (0.00s)
=== RUN   TestStateData
--- PASS: TestStateData (0.00s)
=== RUN   TestStateReportError
--- PASS: TestStateReportError (0.00s)
=== RUN   TestMaxSendingAttempts
--- PASS: TestMaxSendingAttempts (0.00s)
=== RUN   TestStateTransitionsWithUpdateModules
=== RUN   TestStateTransitionsWithUpdateModules/Normal_install,_no_reboot,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Normal_install,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Normal_install
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_Download_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_Download_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactReboot
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactReboot
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactVerifyReboot
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactVerifyReboot
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollback
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollback
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollbackReboot
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollbackReboot
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactVerifyRollbackReboot
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactVerifyRollbackReboot
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactFailure
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactFailure
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_Cleanup
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_Cleanup
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit,_no_reboot
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit,_no_reboot
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_Download_Enter_00_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_Download_Enter_00_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_Enter_00_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_Enter_00_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactReboot_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactReboot_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollback_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollback_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollbackReboot_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollbackReboot_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactFailure_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactFailure_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit_Enter_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit_Enter_00,_no_reboot
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit_Enter_00,_no_reboot
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_Download_Leave_00_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_Download_Leave_00_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_Leave_00_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_Leave_00_state,_no_rollback
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactReboot_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactReboot_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollback_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollback_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollbackReboot_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollbackReboot_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactFailure_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactFailure_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit_Leave_00
=== RUN   TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit_Leave_00,_no_reboot
=== RUN   TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit_Leave_00,_no_reboot
=== RUN   TestStateTransitionsWithUpdateModules/Break_out_of_error_loop
=== RUN   TestStateTransitionsWithUpdateModules/Break_out_of_spontaneous_reboot_loop
=== RUN   TestStateTransitionsWithUpdateModules/Hang_in_Download_state
=== RUN   TestStateTransitionsWithUpdateModules/Hang_in_ArtifactInstall
=== RUN   TestStateTransitionsWithUpdateModules/Temporary_failure_in_report_sending_after_reboot
=== RUN   TestStateTransitionsWithUpdateModules/Permanent_failure_in_report_sending_after_reboot
--- PASS: TestStateTransitionsWithUpdateModules (44.24s)
    --- PASS: TestStateTransitionsWithUpdateModules/Normal_install,_no_reboot,_no_rollback (0.11s)
        state_test.go:4388: Normal install, no reboot, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:22Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:22Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules704285556/artifact_info file." module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules704285556/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules704285556/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules704285556/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules704285556/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules704285556/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules704285556/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules704285556/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules704285556/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Module does not need reboot" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules704285556/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules704285556/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules704285556/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules704285556/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: cleanup [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Returning artifact name artifact-name from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.10s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Normal_install,_no_rollback (0.08s)
        state_test.go:4388: Normal install, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:22Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:22Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules438741357/artifact_info file." module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules438741357/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules438741357/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules438741357/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules438741357/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules438741357/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules438741357/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules438741357/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules438741357/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:22Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules438741357/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules438741357/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules438741357/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules438741357/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules438741357/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules438741357/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules438741357/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules438741357/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: cleanup [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Returning artifact name artifact-name from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.07s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Normal_install (0.06s)
        state_test.go:4388: Normal install
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:22Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:22Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules610667354/artifact_info file." module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:22Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules610667354/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules610667354/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules610667354/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules610667354/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules610667354/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules610667354/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules610667354/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules610667354/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:22Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:22Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:22Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:22Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules610667354/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules610667354/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules610667354/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules610667354/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules610667354/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules610667354/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules610667354/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules610667354/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name artifact-name from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.05s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_Download_state,_no_rollback (0.04s)
        state_test.go:4388: Error in Download state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules390637643/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules390637643/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules390637643/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="Artifact install failed: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-store [Download_Enter] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Error_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules390637643/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules390637643/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules390637643/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.03s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_Download_state,_no_rollback (0.05s)
        state_test.go:4388: Killed in Download state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules014107792/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules014107792/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules014107792/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="handling loaded state: update-store" module=state
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=error msg="Update was interrupted in state: update-store" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules014107792/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules014107792/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules014107792/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.01s)
                state_test.go:4523: Resuming from state index 2 (*main.UpdateCleanupState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_state,_no_rollback (0.08s)
        state_test.go:4388: Error in ArtifactInstall state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules657578169/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules657578169/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules657578169/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules657578169/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules657578169/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules657578169/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules657578169/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules657578169/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules657578169/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules657578169/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules657578169/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.06s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_state,_no_rollback (0.08s)
        state_test.go:4388: Killed in ArtifactInstall state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules788784790/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules788784790/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules788784790/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules788784790/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules788784790/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules788784790/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules788784790/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="handling loaded state: update-install" module=state
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=error msg="Update was interrupted in state: update-install" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules788784790/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules788784790/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules788784790/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules788784790/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.01s)
                state_test.go:4523: Resuming from state index 4 (*main.UpdateErrorState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall (0.10s)
        state_test.go:4388: Error in ArtifactInstall
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules698643511/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules698643511/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules698643511/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules698643511/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules698643511/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules698643511/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules698643511/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules698643511/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules698643511/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules698643511/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules698643511/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules698643511/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules698643511/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules698643511/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.09s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall (0.12s)
        state_test.go:4388: Killed in ArtifactInstall
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules853837548/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules853837548/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules853837548/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules853837548/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules853837548/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules853837548/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules853837548/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="handling loaded state: update-install" module=state
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=error msg="Update was interrupted in state: update-install" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules853837548/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules853837548/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules853837548/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules853837548/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules853837548/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules853837548/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules853837548/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.03s)
                state_test.go:4523: Resuming from state index 4 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactReboot (0.15s)
        state_test.go:4388: Error in ArtifactReboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules810773573/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="error rebooting device: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules810773573/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules810773573/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules810773573/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.13s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactReboot (0.14s)
        state_test.go:4388: Killed in ArtifactReboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules061334290/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules061334290/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules061334290/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules061334290/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules061334290/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules061334290/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules061334290/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules061334290/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules061334290/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules061334290/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules061334290/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="handling loaded state: reboot" module=state
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules061334290/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules061334290/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules061334290/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules061334290/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules061334290/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules061334290/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name artifact-name from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.03s)
                state_test.go:4523: Resuming from state index 5 (*main.UpdateVerifyRebootState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactVerifyReboot (0.17s)
        state_test.go:4388: Error in ArtifactVerifyReboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules867174499/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:23Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules867174499/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules867174499/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules867174499/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.15s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactVerifyReboot (0.15s)
        state_test.go:4388: Killed in ArtifactVerifyReboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:23Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:23Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:23Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:23Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:23Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:23Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:23Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:23Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:23Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:23Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules720572040/artifact_info file." module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:23Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="handling loaded state: after-reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=error msg="Update was interrupted in state: after-reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules720572040/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules720572040/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules720572040/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.04s)
                state_test.go:4523: Resuming from state index 6 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollback (0.10s)
        state_test.go:4388: Error in ArtifactRollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules905291793/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="rollback failed: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=error msg="fatal error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules905291793/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules905291793/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.08s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollback (0.11s)
        state_test.go:4388: Killed in ArtifactRollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules039626446/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="handling loaded state: rollback" module=state
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=error msg="Update was interrupted in state: rollback" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039626446/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules039626446/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules039626446/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.05s)
                state_test.go:4523: Resuming from state index 7 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollbackReboot (0.12s)
        state_test.go:4388: Error in ArtifactRollbackReboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules938397391/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="error rebooting device: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules938397391/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules938397391/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules938397391/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.10s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollbackReboot (0.12s)
        state_test.go:4388: Killed in ArtifactRollbackReboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules770075492/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="handling loaded state: rollback-reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=info msg="Update was interrupted in state: rollback-reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules770075492/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules770075492/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules770075492/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.01s)
                state_test.go:4523: Resuming from state index 8 (*main.UpdateVerifyRollbackRebootState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactVerifyRollbackReboot (0.12s)
        state_test.go:4388: Error in ArtifactVerifyRollbackReboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules225037341/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules225037341/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules225037341/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules225037341/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.11s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactVerifyRollbackReboot (0.11s)
        state_test.go:4388: Killed in ArtifactVerifyRollbackReboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules006321610/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="handling loaded state: verify-rollback-reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=error msg="Update was interrupted in state: verify-rollback-reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules006321610/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules006321610/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules006321610/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.02s)
                state_test.go:4523: Resuming from state index 9 (*main.UpdateVerifyRollbackRebootState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactFailure (0.06s)
        state_test.go:4388: Error in ArtifactFailure
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules689737083/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules689737083/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules689737083/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules689737083/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules689737083/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules689737083/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules689737083/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules689737083/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules689737083/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules689737083/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules689737083/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="ArtifactFailure failed: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules689737083/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules689737083/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules689737083/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.05s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactFailure (0.08s)
        state_test.go:4388: Killed in ArtifactFailure
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules241849216/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules241849216/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules241849216/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules241849216/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules241849216/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules241849216/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules241849216/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules241849216/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules241849216/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules241849216/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules241849216/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules241849216/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules241849216/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules241849216/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules241849216/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules241849216/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.01s)
                state_test.go:4523: Resuming from state index 6 (*main.UpdateErrorState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_Cleanup (0.09s)
        state_test.go:4388: Error in Cleanup
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:24Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules057549417/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:24Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:24Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules057549417/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules057549417/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:24Z" level=error msg="Cleanup failed: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:24Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:24Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:24Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:24Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules057549417/artifact_info file." module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:24Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.08s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_Cleanup (0.08s)
        state_test.go:4388: Killed in Cleanup
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules039827974/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:25Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="handling loaded state: cleanup" module=state
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=error msg="Update was interrupted in state: cleanup" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules039827974/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules039827974/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules039827974/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.00s)
                state_test.go:4523: Resuming from state index 12 (*main.UpdateCleanupState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit (0.13s)
        state_test.go:4388: Error in ArtifactCommit
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules460402279/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:25Z" level=error msg="transient error: update commit failed: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactCommit_Error_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules460402279/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules460402279/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules460402279/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.12s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit (0.10s)
        state_test.go:4388: Killed in ArtifactCommit
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules671850716/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="handling loaded state: update-commit" module=state
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=error msg="Update was interrupted in state: update-commit" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules671850716/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules671850716/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules671850716/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.03s)
                state_test.go:4523: Resuming from state index 8 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit,_no_reboot (0.09s)
        state_test.go:4388: Error in ArtifactCommit, no reboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules699959029/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules699959029/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules699959029/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules699959029/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules699959029/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules699959029/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules699959029/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules699959029/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules699959029/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module does not need reboot" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules699959029/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules699959029/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:25Z" level=error msg="transient error: update commit failed: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactCommit_Error_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules699959029/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules699959029/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules699959029/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules699959029/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules699959029/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules699959029/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules699959029/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.07s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit,_no_reboot (0.09s)
        state_test.go:4388: Killed in ArtifactCommit, no reboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules263061890/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules263061890/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules263061890/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules263061890/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules263061890/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules263061890/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules263061890/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules263061890/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules263061890/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module does not need reboot" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules263061890/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules263061890/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="handling loaded state: update-commit" module=state
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=error msg="Update was interrupted in state: update-commit" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules263061890/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules263061890/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules263061890/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules263061890/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules263061890/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules263061890/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules263061890/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.02s)
                state_test.go:4523: Resuming from state index 5 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_Download_Enter_00_state,_no_rollback (0.02s)
        state_test.go:4388: Error in Download_Enter_00 state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="transient error: error calling enter script for (error) update-fetch state: error running enter state script(s) for Download_Enter state: statescript: error executing 'Download_Enter_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> error [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Error_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="handling error state, current error: transient error: error calling enter script for (error) update-fetch state: error running enter state script(s) for Download_Enter state: statescript: error executing 'Download_Enter_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules630567827/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.01s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_Download_Enter_00_state,_no_rollback (0.03s)
        state_test.go:4388: Killed in Download_Enter_00 state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="handling loaded state: update-fetch" module=state
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=error msg="Update was interrupted in state: update-fetch" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules480458616/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.00s)
                state_test.go:4523: Resuming from state index 1 (*main.IdleState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_Enter_00_state,_no_rollback (0.06s)
        state_test.go:4388: Error in ArtifactInstall_Enter_00 state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules680217025/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules680217025/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules680217025/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules680217025/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules680217025/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="transient error: error calling enter script for (error) update-install state: error running enter state script(s) for ArtifactInstall state: statescript: error executing 'ArtifactInstall_Enter_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules680217025/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules680217025/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules680217025/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules680217025/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.05s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_Enter_00_state,_no_rollback (0.05s)
        state_test.go:4388: Killed in ArtifactInstall_Enter_00 state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules700776510/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules700776510/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules700776510/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules700776510/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules700776510/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="handling loaded state: update-install" module=state
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=error msg="Update was interrupted in state: update-install" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules700776510/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules700776510/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules700776510/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules700776510/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.01s)
                state_test.go:4523: Resuming from state index 4 (*main.UpdateErrorState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_Enter_00 (0.05s)
        state_test.go:4388: Error in ArtifactInstall_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules193707263/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules193707263/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules193707263/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules193707263/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules193707263/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="transient error: error calling enter script for (error) update-install state: error running enter state script(s) for ArtifactInstall state: statescript: error executing 'ArtifactInstall_Enter_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules193707263/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules193707263/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules193707263/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules193707263/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules193707263/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules193707263/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules193707263/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.04s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_Enter_00 (0.06s)
        state_test.go:4388: Killed in ArtifactInstall_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules352381780/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352381780/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules352381780/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352381780/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules352381780/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="handling loaded state: update-install" module=state
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=error msg="Update was interrupted in state: update-install" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352381780/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules352381780/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352381780/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules352381780/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352381780/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules352381780/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules352381780/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.02s)
                state_test.go:4523: Resuming from state index 4 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactReboot_Enter_00 (0.11s)
        state_test.go:4388: Error in ArtifactReboot_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules232231117/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="transient error: error calling enter script for (error) reboot state: error running enter state script(s) for ArtifactReboot_Enter state: statescript: error executing 'ArtifactReboot_Enter_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules232231117/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules232231117/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules232231117/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.10s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactReboot_Enter_00 (0.09s)
        state_test.go:4388: Killed in ArtifactReboot_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules274518586/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules274518586/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules274518586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules274518586/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules274518586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules274518586/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules274518586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules274518586/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules274518586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="handling loaded state: reboot" module=state
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules274518586/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules274518586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules274518586/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules274518586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules274518586/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules274518586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: cleanup [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name artifact-name from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.03s)
                state_test.go:4523: Resuming from state index 5 (*main.UpdateVerifyRebootState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollback_Enter_00 (0.11s)
        state_test.go:4388: Error in ArtifactRollback_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:25Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:25Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules425591467/artifact_info file." module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:25Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:25Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:25Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:25Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:25Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:25Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:25Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:26Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="statescript: ignoring error executing 'ArtifactRollback_Enter_00': 1: exit status 1" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules425591467/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules425591467/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules425591467/artifact_info file." module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.10s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollback_Enter_00 (0.33s)
        state_test.go:4388: Killed in ArtifactRollback_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:26Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:26Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules539214448/artifact_info file." module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:26Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:26Z" level=info msg="handling loaded state: rollback" module=state
            time="2020-02-24T20:30:26Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:26Z" level=error msg="Update was interrupted in state: rollback" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules539214448/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules539214448/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules539214448/artifact_info file." module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.12s)
                state_test.go:4523: Resuming from state index 7 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollbackReboot_Enter_00 (0.46s)
        state_test.go:4388: Error in ArtifactRollbackReboot_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:26Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:26Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules619123225/artifact_info file." module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:26Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="statescript: ignoring error executing 'ArtifactRollbackReboot_Enter_00': 1: exit status 1" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules619123225/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules619123225/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules619123225/artifact_info file." module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.42s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollbackReboot_Enter_00 (0.27s)
        state_test.go:4388: Killed in ArtifactRollbackReboot_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:26Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:26Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules092066678/artifact_info file." module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:26Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:26Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:26Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:26Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:26Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:27Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:27Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:27Z" level=info msg="handling loaded state: rollback-reboot" module=state
            time="2020-02-24T20:30:27Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:27Z" level=info msg="Update was interrupted in state: rollback-reboot" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: init [none] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules092066678/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules092066678/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules092066678/artifact_info file." module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.11s)
                state_test.go:4523: Resuming from state index 8 (*main.UpdateVerifyRollbackRebootState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactFailure_Enter_00 (0.33s)
        state_test.go:4388: Error in ArtifactFailure_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:27Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:27Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules827865239/artifact_info file." module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules827865239/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules827865239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules827865239/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules827865239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules827865239/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules827865239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:27Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules827865239/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules827865239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="statescript: ignoring error executing 'ArtifactFailure_Enter_00': 1: exit status 1" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules827865239/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules827865239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules827865239/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules827865239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules827865239/artifact_info file." module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.30s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactFailure_Enter_00 (0.38s)
        state_test.go:4388: Killed in ArtifactFailure_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:27Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:27Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules483394252/artifact_info file." module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules483394252/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules483394252/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules483394252/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules483394252/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules483394252/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules483394252/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:27Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules483394252/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules483394252/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:27Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:27Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:27Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules483394252/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules483394252/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules483394252/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules483394252/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules483394252/artifact_info file." module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.07s)
                state_test.go:4523: Resuming from state index 6 (*main.UpdateErrorState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit_Enter_00 (0.51s)
        state_test.go:4388: Error in ArtifactCommit_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:27Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:27Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules310859685/artifact_info file." module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:27Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:27Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:27Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:27Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:27Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:28Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="transient error: error calling enter script for (error) update-commit state: error running enter state script(s) for ArtifactCommit_Enter state: statescript: error executing 'ArtifactCommit_Enter_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactCommit_Error_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules310859685/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules310859685/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules310859685/artifact_info file." module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.47s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit_Enter_00 (0.30s)
        state_test.go:4388: Killed in ArtifactCommit_Enter_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:28Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:28Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules067632626/artifact_info file." module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:28Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:28Z" level=info msg="handling loaded state: update-commit" module=state
            time="2020-02-24T20:30:28Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:28Z" level=error msg="Update was interrupted in state: update-commit" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules067632626/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules067632626/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules067632626/artifact_info file." module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.16s)
                state_test.go:4523: Resuming from state index 8 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit_Enter_00,_no_reboot (0.30s)
        state_test.go:4388: Error in ArtifactCommit_Enter_00, no reboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:28Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:28Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules382103235/artifact_info file." module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules382103235/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules382103235/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules382103235/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules382103235/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules382103235/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules382103235/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules382103235/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules382103235/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Module does not need reboot" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="transient error: error calling enter script for (error) update-commit state: error running enter state script(s) for ArtifactCommit_Enter state: statescript: error executing 'ArtifactCommit_Enter_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactCommit_Error_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules382103235/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules382103235/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules382103235/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules382103235/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:28Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules382103235/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules382103235/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:28Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules382103235/artifact_info file." module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:28Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.26s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit_Enter_00,_no_reboot (0.27s)
        state_test.go:4388: Killed in ArtifactCommit_Enter_00, no reboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:28Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:28Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:28Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:28Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:28Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:29Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules221617768/artifact_info file." module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules221617768/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules221617768/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules221617768/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules221617768/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules221617768/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules221617768/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules221617768/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules221617768/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Module does not need reboot" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:29Z" level=info msg="handling loaded state: update-commit" module=state
            time="2020-02-24T20:30:29Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:29Z" level=error msg="Update was interrupted in state: update-commit" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules221617768/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules221617768/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules221617768/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules221617768/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules221617768/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules221617768/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules221617768/artifact_info file." module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.05s)
                state_test.go:4523: Resuming from state index 5 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_Download_Leave_00_state,_no_rollback (0.13s)
        state_test.go:4388: Error in Download_Leave_00 state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:29Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules722066289/artifact_info file." module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules722066289/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules722066289/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules722066289/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules722066289/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="transient error: error executing leave script for update-after-store state: error running leave state script(s) for Download_Leave state: statescript: error executing 'Download_Leave_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-after-store [Download_Leave] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Error_00" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules722066289/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules722066289/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules722066289/artifact_info file." module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.11s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_Download_Leave_00_state,_no_rollback (0.18s)
        state_test.go:4388: Killed in Download_Leave_00 state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:29Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules407359406/artifact_info file." module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules407359406/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules407359406/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules407359406/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules407359406/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:29Z" level=info msg="handling loaded state: update-after-store" module=state
            time="2020-02-24T20:30:29Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:29Z" level=error msg="Update was interrupted in state: update-after-store" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules407359406/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules407359406/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules407359406/artifact_info file." module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.02s)
                state_test.go:4523: Resuming from state index 4 (*main.UpdateCleanupState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_Leave_00_state,_no_rollback (0.21s)
        state_test.go:4388: Error in ArtifactInstall_Leave_00 state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:29Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules964904239/artifact_info file." module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules964904239/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules964904239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules964904239/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules964904239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules964904239/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules964904239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules964904239/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules964904239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="transient error: error executing leave script for update-install state: error running leave state script(s) for ArtifactInstall state: statescript: error executing 'ArtifactInstall_Leave_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules964904239/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules964904239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules964904239/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules964904239/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.16s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_Leave_00_state,_no_rollback (0.30s)
        state_test.go:4388: Killed in ArtifactInstall_Leave_00 state, no rollback
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:29Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules279379268/artifact_info file." module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:29Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules279379268/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules279379268/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules279379268/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules279379268/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Module does not support rollback" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules279379268/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules279379268/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules279379268/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules279379268/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:29Z" level=info msg="handling loaded state: update-install" module=state
            time="2020-02-24T20:30:29Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:29Z" level=error msg="Update was interrupted in state: update-install" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:29Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:29Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:29Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:29Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:29Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:29Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules279379268/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules279379268/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules279379268/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules279379268/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.05s)
                state_test.go:4523: Resuming from state index 5 (*main.UpdateErrorState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactInstall_Leave_00 (0.43s)
        state_test.go:4388: Error in ArtifactInstall_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:30Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:30Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules339908989/artifact_info file." module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="transient error: error executing leave script for update-install state: error running leave state script(s) for ArtifactInstall state: statescript: error executing 'ArtifactInstall_Leave_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules339908989/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules339908989/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules339908989/artifact_info file." module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.38s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactInstall_Leave_00 (0.36s)
        state_test.go:4388: Killed in ArtifactInstall_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:30Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:30Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules848913578/artifact_info file." module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:30Z" level=info msg="handling loaded state: update-install" module=state
            time="2020-02-24T20:30:30Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:30Z" level=error msg="Update was interrupted in state: update-install" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules848913578/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules848913578/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules848913578/artifact_info file." module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.16s)
                state_test.go:4523: Resuming from state index 5 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactReboot_Leave_00 (0.42s)
        state_test.go:4388: Error in ArtifactReboot_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:30Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:30Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules222506971/artifact_info file." module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:30Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:30Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:30Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:30Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:30Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:30Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:30Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="transient error: error executing leave script for after-reboot state: error running leave state script(s) for ArtifactReboot_Leave state: statescript: error executing 'ArtifactReboot_Leave_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules222506971/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules222506971/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules222506971/artifact_info file." module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.38s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactReboot_Leave_00 (0.24s)
        state_test.go:4388: Killed in ArtifactReboot_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:31Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:31Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules842040160/artifact_info file." module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:31Z" level=info msg="handling loaded state: after-reboot" module=state
            time="2020-02-24T20:30:31Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:31Z" level=error msg="Update was interrupted in state: after-reboot" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules842040160/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules842040160/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules842040160/artifact_info file." module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.10s)
                state_test.go:4523: Resuming from state index 8 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollback_Leave_00 (0.40s)
        state_test.go:4388: Error in ArtifactRollback_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:31Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:31Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules059452873/artifact_info file." module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:31Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="statescript: ignoring error executing 'ArtifactRollback_Leave_00': 1: exit status 1" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules059452873/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules059452873/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules059452873/artifact_info file." module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.38s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollback_Leave_00 (0.49s)
        state_test.go:4388: Killed in ArtifactRollback_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:31Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:31Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:31Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules337189094/artifact_info file." module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:31Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:31Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:31Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:31Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:31Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:31Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:31Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:32Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:32Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:32Z" level=info msg="handling loaded state: rollback" module=state
            time="2020-02-24T20:30:32Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:32Z" level=error msg="Update was interrupted in state: rollback" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: init [none] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules337189094/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules337189094/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules337189094/artifact_info file." module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.17s)
                state_test.go:4523: Resuming from state index 8 (*main.UpdateRollbackState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactRollbackReboot_Leave_00 (0.39s)
        state_test.go:4388: Error in ArtifactRollbackReboot_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:32Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:32Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules622446791/artifact_info file." module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:32Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:32Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="statescript: ignoring error executing 'ArtifactRollbackReboot_Leave_00': 1: exit status 1" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules622446791/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules622446791/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules622446791/artifact_info file." module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.36s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactRollbackReboot_Leave_00 (0.39s)
        state_test.go:4388: Killed in ArtifactRollbackReboot_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:32Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:32Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules126349500/artifact_info file." module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:32Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:32Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:32Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:32Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:32Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:32Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:32Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:32Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:32Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="handling loaded state: after-rollback-reboot" module=state
            time="2020-02-24T20:30:33Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:33Z" level=error msg="Update was interrupted in state: after-rollback-reboot" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules126349500/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules126349500/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules126349500/artifact_info file." module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.08s)
                state_test.go:4523: Resuming from state index 11 (*main.UpdateVerifyRollbackRebootState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactFailure_Leave_00 (0.15s)
        state_test.go:4388: Error in ArtifactFailure_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:33Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules984387157/artifact_info file." module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules984387157/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules984387157/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules984387157/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules984387157/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules984387157/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules984387157/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:33Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules984387157/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules984387157/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules984387157/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules984387157/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="statescript: ignoring error executing 'ArtifactFailure_Leave_00': 1: exit status 1" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules984387157/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules984387157/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules984387157/artifact_info file." module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.12s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactFailure_Leave_00 (0.17s)
        state_test.go:4388: Killed in ArtifactFailure_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:33Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules352273506/artifact_info file." module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352273506/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules352273506/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352273506/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules352273506/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352273506/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules352273506/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:33Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352273506/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules352273506/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352273506/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules352273506/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:33Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:33Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352273506/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules352273506/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules352273506/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules352273506/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules352273506/artifact_info file." module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.03s)
                state_test.go:4523: Resuming from state index 7 (*main.UpdateErrorState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit_Leave_00 (0.19s)
        state_test.go:4388: Error in ArtifactCommit_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:33Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules164103155/artifact_info file." module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules164103155/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules164103155/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules164103155/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules164103155/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules164103155/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules164103155/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules164103155/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules164103155/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules164103155/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules164103155/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules164103155/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules164103155/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules164103155/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules164103155/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="transient error: error executing leave script for update-after-commit state: error running leave state script(s) for ArtifactCommit_Leave state: statescript: error executing 'ArtifactCommit_Leave_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactCommit_Error_00" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules164103155/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules164103155/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.18s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit_Leave_00 (0.22s)
        state_test.go:4388: Killed in ArtifactCommit_Leave_00
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:33Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules050731864/artifact_info file." module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules050731864/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules050731864/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules050731864/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules050731864/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules050731864/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules050731864/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules050731864/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules050731864/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules050731864/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules050731864/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules050731864/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules050731864/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules050731864/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules050731864/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="handling loaded state: update-after-commit" module=state
            time="2020-02-24T20:30:33Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:33Z" level=error msg="Update was interrupted in state: update-after-commit" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules050731864/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules050731864/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: cleanup [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name artifact-name from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.01s)
                state_test.go:4523: Resuming from state index 11 (*main.UpdateAfterCommitState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Error_in_ArtifactCommit_Leave_00,_no_reboot (0.22s)
        state_test.go:4388: Error in ArtifactCommit_Leave_00, no reboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:33Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules478143265/artifact_info file." module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:33Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules478143265/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules478143265/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules478143265/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules478143265/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:33Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:33Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules478143265/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules478143265/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:33Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules478143265/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules478143265/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Module does not need reboot" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules478143265/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules478143265/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="transient error: error executing leave script for update-after-commit state: error running leave state script(s) for ArtifactCommit_Leave state: statescript: error executing 'ArtifactCommit_Leave_00': 1 : exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactCommit_Error_00" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules478143265/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules478143265/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.20s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Killed_in_ArtifactCommit_Leave_00,_no_reboot (0.29s)
        state_test.go:4388: Killed in ArtifactCommit_Leave_00, no reboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:34Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:34Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules129242398/artifact_info file." module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules129242398/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules129242398/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules129242398/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules129242398/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules129242398/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules129242398/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules129242398/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules129242398/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Update module output: No" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Module does not need reboot" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-install [ArtifactInstall] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules129242398/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules129242398/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:34Z" level=info msg="handling loaded state: update-after-commit" module=state
            time="2020-02-24T20:30:34Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:34Z" level=error msg="Update was interrupted in state: update-after-commit" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: init [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules129242398/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules129242398/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: cleanup [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Returning artifact name artifact-name from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.04s)
                state_test.go:4523: Resuming from state index 8 (*main.UpdateAfterCommitState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Break_out_of_error_loop (0.57s)
        state_test.go:4388: Break out of error loop
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:34Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:34Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules807454047/artifact_info file." module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:34Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules807454047/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules807454047/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:34Z" level=error msg="Rollback reboot failed, will retry. Cause: transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="Could not write state data to persistent storage: State data stored and retrieved maximum number of times" module=mender
            time="2020-02-24T20:30:34Z" level=error msg="State transition loop detected in state rollback-reboot: Forcefully aborting update. The system is likely to be in an inconsistent state after this." module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.53s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Break_out_of_spontaneous_reboot_loop (0.82s)
        state_test.go:4388: Break out of spontaneous reboot loop
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:34Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:34Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:34Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:34Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:34Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:34Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:34Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:34Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:34Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:34Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:34Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules520386868/artifact_info file." module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:35Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=error msg="Update module terminated abnormally: exit status 1" module=modules
            time="2020-02-24T20:30:35Z" level=error msg="transient error: Update module terminated abnormally: exit status 1" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactReboot_Error_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="Update was interrupted in state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules520386868/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules520386868/work/payloads/0000/tree" module=modules
            
        state_test.go:4416: Killed as expected
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> init [none]" module=mender
            time="2020-02-24T20:30:35Z" level=info msg="handling loaded state: update-error" module=state
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=error msg="State transition loop detected in state update-error: Forcefully aborting update. The system is likely to be in an inconsistent state after this." module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Setting artifact name to artifact-name_INCONSISTENT" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Returning artifact name artifact-name_INCONSISTENT from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (0.00s)
                state_test.go:4523: Resuming from state index 19 (*main.UpdateStatusReportState)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Hang_in_Download_state (5.12s)
        state_test.go:4388: Hang in Download state
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:35Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:35Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:35Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:35Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:35Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:35Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:35Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:35Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:35Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules129861677/artifact_info file." module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:35Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules129861677/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules129861677/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:35Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:40Z" level=error msg="Process 11547 timed out. Sending SIGTERM" module=modules
            time="2020-02-24T20:30:40Z" level=error msg="Artifact install failed: Update module terminated abnormally: signal: terminated" module=state
            time="2020-02-24T20:30:40Z" level=info msg="State transition: update-store [Download_Enter] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:40Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:40Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:40Z" level=debug msg="start executing script: Download_Error_00" module=executor
            time="2020-02-24T20:30:40Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:40Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:40Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:40Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules129861677/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules129861677/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:40Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:40Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:40Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:40Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:40Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:40Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules129861677/artifact_info file." module=device
            time="2020-02-24T20:30:40Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:40Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (5.10s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Hang_in_ArtifactInstall (5.34s)
        state_test.go:4388: Hang in ArtifactInstall
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:40Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:40Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:40Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:40Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:40Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:40Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:40Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:40Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:40Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:40Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:40Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:40Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:40Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:40Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:40Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:40Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:40Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:40Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:40Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:40Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules003874586/artifact_info file." module=device
            time="2020-02-24T20:30:40Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:40Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:40Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:40Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:40Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:41Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:41Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:41Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules003874586/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules003874586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:41Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:41Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:41Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules003874586/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules003874586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:41Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:41Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:41Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:41Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:41Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:41Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:41Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:41Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:41Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:41Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:41Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:41Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:41Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:41Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:41Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:41Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:41Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:41Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules003874586/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules003874586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=error msg="Process 12690 timed out. Sending SIGTERM" module=modules
            time="2020-02-24T20:30:46Z" level=error msg="Update module terminated abnormally: signal: terminated" module=modules
            time="2020-02-24T20:30:46Z" level=error msg="transient error: Update module terminated abnormally: signal: terminated" module=state
            time="2020-02-24T20:30:46Z" level=info msg="State transition: update-install [ArtifactInstall] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactInstall_Error_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules003874586/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules003874586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=info msg="State transition: rollback [ArtifactRollback] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules003874586/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules003874586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules003874586/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules003874586/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:46Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:30:46Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:46Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules003874586/artifact_info file." module=device
            time="2020-02-24T20:30:46Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:46Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (5.31s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Temporary_failure_in_report_sending_after_reboot (5.28s)
        state_test.go:4388: Temporary failure in report sending after reboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:46Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:46Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:46Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:46Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:46Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:46Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:46Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules889632523/artifact_info file." module=device
            time="2020-02-24T20:30:46Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:46Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:46Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:46Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:46Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:46Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules889632523/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules889632523/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules889632523/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules889632523/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:46Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:46Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules889632523/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules889632523/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules889632523/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules889632523/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:46Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:46Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules889632523/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules889632523/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:46Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules889632523/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules889632523/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:46Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:46Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:46Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:46Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:46Z" level=error msg="Failed to send status report to server: transient error: Failing status report as instructed by test" module=state
            time="2020-02-24T20:30:46Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-pre-commit-status-report-retry [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="wait complete" module=state
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-pre-commit-status-report-retry [ArtifactCommit_Enter] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.CommitUpdate" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules889632523/modules/test-type ArtifactCommit /tmp/TestStateTransitionsWithUpdateModules889632523/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Committing new artifact name: artifact-name" module=state
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-after-first-commit [none]" module=mender
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-after-first-commit [none] -> update-after-commit [ArtifactCommit_Leave]" module=mender
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-after-commit [ArtifactCommit_Leave] -> cleanup [none]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="start executing script: ArtifactCommit_Leave_00" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules889632523/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules889632523/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:51Z" level=info msg="State transition: cleanup [none] -> update-status-report [none]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:30:51Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:30:51Z" level=debug msg="Returning artifact name artifact-name from database." module=device
            --- PASS: TestStateTransitionsWithUpdateModules (5.26s)
            PASS
            
    --- PASS: TestStateTransitionsWithUpdateModules/Permanent_failure_in_report_sending_after_reboot (15.46s)
        state_test.go:4388: Permanent failure in report sending after reboot
        state_test.go:4407: === RUN   TestStateTransitionsWithUpdateModules
            time="2020-02-24T20:30:51Z" level=info msg="State transition: init [none] -> update-check [Sync]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="handle update check state" module=state
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-check [Sync] -> update-fetch [Download_Enter]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="start executing script: Download_Enter_00" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=info msg="Running Mender version unknown" module=deployment_logger
            time="2020-02-24T20:30:51Z" level=debug msg="handle update fetch state" module=state
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-fetch [Download_Enter] -> update-store [Download_Enter]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="handle update install state" module=state
            time="2020-02-24T20:30:51Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:51Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:51Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="checking if device [test-device] is on compatible device list: [test-device]\n" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactReboot_Leave_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactFailure_Error_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactInstall_Leave_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactInstall_Error_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactReboot_Enter_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Leave_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactReboot_Error_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactRollback_Enter_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactRollback_Error_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Enter_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactRollbackReboot_Error_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactFailure_Enter_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactInstall_Enter_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactCommit_Enter_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactCommit_Leave_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactCommit_Error_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactRollback_Leave_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="installer: processing script: ArtifactFailure_Leave_00" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.Initialize" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules918294608/artifact_info file." module=device
            time="2020-02-24T20:30:51Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:51Z" level=debug msg="Current manifest data: old_name" module=device
            time="2020-02-24T20:30:51Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:30:51Z" level=debug msg="Read data from device manifest file: device_type=test-device" module=device
            time="2020-02-24T20:30:51Z" level=debug msg="Current manifest data: test-device" module=device
            time="2020-02-24T20:30:51Z" level=debug msg="installer: successfully read artifact [name: artifact-name; version: 3; compatible devices: [test-device]]" module=installer
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.PrepareStoreUpdate" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type Download /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.FinishStoreUpdate" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.SupportsRollback" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type SupportsRollback /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Module supports rollback" module=modules
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-store [Download_Enter] -> update-after-store [Download_Leave]" module=mender
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-after-store [Download_Leave] -> update-install [ArtifactInstall]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="start executing script: Download_Leave_00" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="start executing script: ArtifactInstall_Enter_00" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.InstallUpdate" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type ArtifactInstall /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.NeedsReboot" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type NeedsArtifactReboot /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Update module output: Yes" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Module needs custom reboot" module=modules
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-install [ArtifactInstall] -> reboot [ArtifactReboot_Enter]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="start executing script: ArtifactInstall_Leave_00" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="start executing script: ArtifactReboot_Enter_00" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="handling reboot state" module=state
            time="2020-02-24T20:30:51Z" level=info msg="rebooting device(s)" module=state
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.Reboot" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type ArtifactReboot /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:51Z" level=info msg="State transition: reboot [ArtifactReboot_Enter] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="Executing ModuleInstaller.VerifyReboot" module=modules
            time="2020-02-24T20:30:51Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type ArtifactVerifyReboot /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:30:51Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> after-reboot [ArtifactReboot_Leave]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="handling state after reboot" module=state
            time="2020-02-24T20:30:51Z" level=info msg="State transition: after-reboot [ArtifactReboot_Leave] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="start executing script: ArtifactReboot_Leave_00" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="start executing script: ArtifactCommit_Enter_00" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:30:51Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:30:51Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:51Z" level=error msg="Failed to send status report to server: transient error: Failing status report as instructed by test" module=state
            time="2020-02-24T20:30:51Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-pre-commit-status-report-retry [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:56Z" level=debug msg="wait complete" module=state
            time="2020-02-24T20:30:56Z" level=info msg="State transition: update-pre-commit-status-report-retry [ArtifactCommit_Enter] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:30:56Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:30:56Z" level=error msg="Failed to send status report to server: transient error: Failing status report as instructed by test" module=state
            time="2020-02-24T20:30:56Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-pre-commit-status-report-retry [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:31:01Z" level=debug msg="wait complete" module=state
            time="2020-02-24T20:31:01Z" level=info msg="State transition: update-pre-commit-status-report-retry [ArtifactCommit_Enter] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:31:01Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:31:01Z" level=error msg="Failed to send status report to server: transient error: Failing status report as instructed by test" module=state
            time="2020-02-24T20:31:01Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-pre-commit-status-report-retry [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="wait complete" module=state
            time="2020-02-24T20:31:06Z" level=info msg="State transition: update-pre-commit-status-report-retry [ArtifactCommit_Enter] -> update-commit [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="handle update commit state" module=state
            time="2020-02-24T20:31:06Z" level=error msg="Failed to send status report to server: transient error: Failing status report as instructed by test" module=state
            time="2020-02-24T20:31:06Z" level=info msg="State transition: update-commit [ArtifactCommit_Enter] -> update-pre-commit-status-report-retry [ArtifactCommit_Enter]" module=mender
            time="2020-02-24T20:31:06Z" level=error msg="transient error: Tried sending status report maximum number of times." module=state
            time="2020-02-24T20:31:06Z" level=info msg="State transition: update-pre-commit-status-report-retry [ArtifactCommit_Enter] -> rollback [ArtifactRollback]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="transitioning to error state" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="start executing script: ArtifactCommit_Error_00" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="start executing script: ArtifactRollback_Enter_00" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=info msg="performing rollback" module=state
            time="2020-02-24T20:31:06Z" level=debug msg="Executing ModuleInstaller.Rollback" module=modules
            time="2020-02-24T20:31:06Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type ArtifactRollback /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:31:06Z" level=debug msg="will try to rollback reboot the device" module=state
            time="2020-02-24T20:31:06Z" level=info msg="State transition: rollback [ArtifactRollback] -> rollback-reboot [ArtifactRollbackReboot_Enter]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="start executing script: ArtifactRollback_Leave_00" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="start executing script: ArtifactRollbackReboot_Enter_00" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=info msg="rebooting device(s) after rollback" module=state
            time="2020-02-24T20:31:06Z" level=debug msg="Executing ModuleInstaller.RollbackReboot" module=modules
            time="2020-02-24T20:31:06Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type ArtifactRollbackReboot /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:31:06Z" level=info msg="State transition: rollback-reboot [ArtifactRollbackReboot_Enter] -> verify-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="Executing ModuleInstaller.VerifyRollbackReboot" module=modules
            time="2020-02-24T20:31:06Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type ArtifactVerifyRollbackReboot /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:31:06Z" level=info msg="State transition: verify-rollback-reboot [ArtifactRollbackReboot_Leave] -> after-rollback-reboot [ArtifactRollbackReboot_Leave]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="handling state after rollback reboot" module=state
            time="2020-02-24T20:31:06Z" level=info msg="State transition: after-rollback-reboot [ArtifactRollbackReboot_Leave] -> update-error [ArtifactFailure]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="start executing script: ArtifactRollbackReboot_Leave_00" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="start executing script: ArtifactFailure_Enter_00" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send start status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=error msg="failed to report status: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=client_status
            time="2020-02-24T20:31:06Z" level=error msg="statescript: can not send finished status to server: reporting status failed: Put https://not-used/api/devices/v1/deployments/device/deployments/abcdefg/status: dial tcp: lookup not-used on 172.31.0.2:53: no such host" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="handle update error state" module=state
            time="2020-02-24T20:31:06Z" level=debug msg="Executing ModuleInstaller.Failure" module=modules
            time="2020-02-24T20:31:06Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type ArtifactFailure /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:31:06Z" level=info msg="State transition: update-error [ArtifactFailure] -> cleanup [Error]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="start executing script: ArtifactFailure_Leave_00" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="Handling Cleanup state" module=state
            time="2020-02-24T20:31:06Z" level=debug msg="Executing ModuleInstaller.Cleanup" module=modules
            time="2020-02-24T20:31:06Z" level=debug msg="Calling module: /tmp/TestStateTransitionsWithUpdateModules918294608/modules/test-type Cleanup /tmp/TestStateTransitionsWithUpdateModules918294608/work/payloads/0000/tree" module=modules
            time="2020-02-24T20:31:06Z" level=info msg="State transition: cleanup [Error] -> update-status-report [none]" module=mender
            time="2020-02-24T20:31:06Z" level=debug msg="statescript: timeout for executing scripts is not defined; using default of 1h0m0s seconds" module=executor
            time="2020-02-24T20:31:06Z" level=debug msg="handle update status report state" module=state
            time="2020-02-24T20:31:06Z" level=debug msg="attempting to upload deployment logs for failed update" module=state
            time="2020-02-24T20:31:06Z" level=debug msg="reporting complete" module=state
            time="2020-02-24T20:31:06Z" level=debug msg="Returning artifact name from /tmp/TestStateTransitionsWithUpdateModules918294608/artifact_info file." module=device
            time="2020-02-24T20:31:06Z" level=debug msg="Read data from device manifest file: artifact_name=old_name" module=device
            time="2020-02-24T20:31:06Z" level=debug msg="Current manifest data: old_name" module=device
            --- PASS: TestStateTransitionsWithUpdateModules (15.42s)
            PASS
            
=== RUN   TestDBSchemaUpdate
--- PASS: TestDBSchemaUpdate (0.00s)
=== RUN   TestAutomaticReboot
time="2020-02-24T20:31:07Z" level=info msg="Running Mender version unknown" module=deployment_logger
time="2020-02-24T20:31:07Z" level=info msg="rebooting device(s)" module=state
time="2020-02-24T20:31:07Z" level=error msg="transient error: Could not reboot host: exit status 99" module=state
--- PASS: TestAutomaticReboot (0.05s)
=== RUN   TestTransitions
=== RUN   TestTransitions/0
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [Idle] -> init [Sync]" module=mender
=== RUN   TestTransitions/1
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [Idle] -> init [Sync]" module=mender
=== RUN   TestTransitions/2
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [Idle] -> init [Sync]" module=mender
=== RUN   TestTransitions/3
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [Sync] -> init [Download_Enter]" module=mender
=== RUN   TestTransitions/4
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [Error] -> init [Idle]" module=mender
=== RUN   TestTransitions/5
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [ArtifactReboot_Enter] -> init [Error]" module=mender
=== RUN   TestTransitions/6
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [none] -> init [Idle]" module=mender
=== RUN   TestTransitions/7
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [none] -> init [Error]" module=mender
=== RUN   TestTransitions/8
time="2020-02-24T20:31:07Z" level=info msg="State transition: init [Idle] -> init [Error]" module=mender
--- PASS: TestTransitions (0.00s)
    --- PASS: TestTransitions/0 (0.00s)
        transition_test.go:193: has: [{Idle Leave} {Sync Enter}] expect: [{Idle Leave} {Sync Enter}]
    --- PASS: TestTransitions/1 (0.00s)
        transition_test.go:193: has: [{Idle Leave} {Sync Enter}] expect: [{Idle Leave} {Sync Enter}]
    --- PASS: TestTransitions/2 (0.00s)
        transition_test.go:193: has: [{Idle Leave} {Sync Enter}] expect: [{Idle Leave} {Sync Enter}]
    --- PASS: TestTransitions/3 (0.00s)
        transition_test.go:193: has: [{Sync Leave}] expect: [{Sync Leave}]
    --- PASS: TestTransitions/4 (0.00s)
        transition_test.go:193: has: [{Error Leave} {Idle Enter}] expect: [{Error Leave} {Idle Enter}]
    --- PASS: TestTransitions/5 (0.00s)
        transition_test.go:193: has: [{ArtifactReboot Error} {Error Enter}] expect: [{ArtifactReboot Error} {Error Enter}]
    --- PASS: TestTransitions/6 (0.00s)
        transition_test.go:193: has: [{Idle Enter}] expect: [{Idle Enter}]
    --- PASS: TestTransitions/7 (0.00s)
        transition_test.go:193: has: [{Error Enter}] expect: [{Error Enter}]
    --- PASS: TestTransitions/8 (0.00s)
        transition_test.go:193: has: [{Idle Error} {Error Enter}] expect: [{Idle Error} {Error Enter}]
=== RUN   TestGetName
--- PASS: TestGetName (0.00s)
=== RUN   TestIgnoreErrors
--- PASS: TestIgnoreErrors (0.00s)
=== RUN   TestTransitionReporting
--- PASS: TestTransitionReporting (0.00s)
    transition_test.go:349: Running state: init
    transition_test.go:349: Running state: idle
    transition_test.go:349: Running state: authorize
    transition_test.go:349: Running state: authorize-wait
    transition_test.go:349: Running state: check-wait
    transition_test.go:349: Running state: init
    transition_test.go:349: Running state: update-fetch
    transition_test.go:349: Running state: update-store
    transition_test.go:349: Running state: update-install
    transition_test.go:349: Running state: reboot
    transition_test.go:349: Running state: after-reboot
    transition_test.go:349: Running state: update-commit
    transition_test.go:349: Running state: rollback
    transition_test.go:349: Running state: after-rollback-reboot
    transition_test.go:349: Running state: update-error
=== RUN   TestVersionUnknown
--- PASS: TestVersionUnknown (0.00s)
=== RUN   TestVersionVersion
--- PASS: TestVersionVersion (0.00s)
FAIL
FAIL	github.com/mendersoftware/mender	243.323s
=== RUN   TestClientAuthMakeReq
--- PASS: TestClientAuthMakeReq (0.00s)
    client_auth_test.go:75: data: foobar data
=== RUN   TestClientAuth
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
--- PASS: TestClientAuth (0.12s)
=== RUN   TestClientAuthExpiredCert
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIIBmzCCAQQCCQDMKfSEuawBWTANBgkqhkiG9w0BAQsFADASMRAwDgYDVQQKEwdB\nY21lIENvMB4XDTcxMDEwMTEzMDMxNloXDTcyMDEwMTEzMDMxNlowEjEQMA4GA1UE\nChMHQWNtZSBDbzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA7i50ACN5g4Hs\nt1Qc1pwdi9/SVFOLcY3lROpsrg6pDP7hpX42/Uo2NWyMOIgObAQWcx4t89IdWFfE\nD7sRG4uJ1vdSCZtoLL72YSKwh0t5emn2m+KWQZdvl7A7paygcSirQ9axsZRuC453\nHWmxZ/YLy2Wndm0srKs/6kwFErU76iUCAwEAATANBgkqhkiG9w0BAQsFAAOBgQAi\nK3rBgk+rMIfXtfWO7naaob/b4ASfUbMAwc1J+wOqXOj9O9wf/5xD5O8/pEenmp5k\nM3nPb2xzRhRbusFFG0fZebk2U7DUf+JjN8pdiqfW3gDfOQHh3IdeGrLRsZ3A/K7z\nj6GZ2oBCoVjobmbA713gcMJggzzBJbCPmGpFjKYHOQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1971-01-01 13:03:16 +0000 UTC, Valid to: 1972-01-01 13:03:16 +0000 UTC" module=client
2020/02/24 20:26:58 http: TLS handshake error from 127.0.0.1:49510: remote error: tls: bad certificate
time="2020-02-24T20:26:58Z" level=error msg="Failure occurred while executing authorization request: &url.Error{Op:\"Post\", URL:\"https://127.0.0.1:45451/api/devices/v1/authentication/auth_requests\", Err:x509.CertificateInvalidError{Cert:(*x509.Certificate)(0xc00042d080), Reason:1, Detail:\"\"}}" module=client_auth
time="2020-02-24T20:26:58Z" level=error msg="Certificate has expired or is not yet valid." module=client_auth
time="2020-02-24T20:26:58Z" level=error msg="Current clock is 2020-02-24 20:26:58.348108214 +0000 UTC m=+0.126966487" module=client_auth
time="2020-02-24T20:26:58Z" level=error msg="Verify that the clock on the device is correct and/or certificate expiration date is valid." module=client_auth
time="2020-02-24T20:26:58Z" level=error msg="See https://docs.mender.io/troubleshooting/mender-client#certificate-expired-or-not-yet-valid for more information." module=client_auth
--- PASS: TestClientAuthExpiredCert (0.01s)
=== RUN   TestClientAuthUnknownAuthorityCert
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEjCCAXugAwIBAgIRAMQ8I/xATeFlYDeiX3H1XBkwDQYJKoZIhvcNAQELBQAw\nEjEQMA4GA1UEChMHQWNtZSBDbzAeFw03MDAxMDEwMDAwMDBaFw03MDAxMDMwMDAw\nMDBaMBIxEDAOBgNVBAoTB0FjbWUgQ28wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJ\nAoGBAJiCLkrvs3bels/qVWe5SojBygTrU7D1Qn/dZ7ZSJF1svUuvwDq8p6wHC1y5\ntX+KBjOjxtUjUdIQgfuCjAbw2j7hgrpEenieQpVTccb44aRa1ufobjKYhWiIZ+K6\n96udAaoSd1tt+TJpU2Ym2gWzWBMSpGAqKdgrmFfFMl/9mHKlAgMBAAGjaDBmMA4G\nA1UdDwEB/wQEAwICpDATBgNVHSUEDDAKBggrBgEFBQcDATAPBgNVHRMBAf8EBTAD\nAQH/MC4GA1UdEQQnMCWCC2V4YW1wbGUuY29thwR/AAABhxAAAAAAAAAAAAAAAAAA\nAAABMA0GCSqGSIb3DQEBCwUAA4GBAH0gC0D1t1fZ+Nv5OWfve1n435EQ/eLOu0NA\nAZ3LjRZjByytlBEvdO8F+xVeLhm/924B2G0VItotsg4888R7AZ43TceBFN4LvPDt\niRMfWmk3Z87fOiMADOFlxdCvA5ceA2o1VDnOblcIf8czSaVTXq9vrmCNhE8P0WU0\nL/r4D5nk\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 1970-01-03 00:00:00 +0000 UTC" module=client
2020/02/24 20:26:58 http: TLS handshake error from 127.0.0.1:45742: remote error: tls: bad certificate
time="2020-02-24T20:26:58Z" level=error msg="Failure occurred while executing authorization request: &url.Error{Op:\"Post\", URL:\"https://127.0.0.1:32931/api/devices/v1/authentication/auth_requests\", Err:x509.UnknownAuthorityError{Cert:(*x509.Certificate)(0xc000174c00), hintErr:(*errors.errorString)(0xc000062440), hintCert:(*x509.Certificate)(0xc00030c680)}}" module=client_auth
time="2020-02-24T20:26:58Z" level=error msg="Certificate is signed by unknown authority." module=client_auth
time="2020-02-24T20:26:58Z" level=error msg="If you are using a self-signed certificate, make sure it is available locally to the Mender client in /etc/mender/server.crt and is configured properly in /etc/mender/mender.conf." module=client_auth
time="2020-02-24T20:26:58Z" level=error msg="See https://docs.mender.io/troubleshooting/mender-client#certificate-signed-by-unknown-authority for more information." module=client_auth
--- PASS: TestClientAuthUnknownAuthorityCert (0.00s)
=== RUN   TestClientAuthNoCert
time="2020-02-24T20:26:58Z" level=error msg="server.non-existing.crt is inaccessible: open server.non-existing.crt: no such file or directory" module=client
--- PASS: TestClientAuthNoCert (0.00s)
=== RUN   TestInventoryClient
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=error msg="failed to submit inventory data: foo" module=client_inventory
time="2020-02-24T20:26:58Z" level=error msg="got unexpected HTTP status when submitting to inventory: 401" module=client_inventory
--- PASS: TestInventoryClient (0.00s)
=== RUN   TestLogUploadClient
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=error msg="failed to upload logs: foo" module=client_log
time="2020-02-24T20:26:58Z" level=error msg="got unexpected HTTP status when uploading log: 401" module=client_log
--- PASS: TestLogUploadClient (0.00s)
=== RUN   TestStatusClient
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=error msg="failed to report status: foo" module=client_status
time="2020-02-24T20:26:58Z" level=error msg="got unexpected HTTP status when reporting status: 401" module=client_status
time="2020-02-24T20:26:58Z" level=warning msg="status report rejected, deployment aborted at the backend" module=client_status
--- PASS: TestStatusClient (0.00s)
=== RUN   TestHttpClient
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=error msg="missing.crt is inaccessible: open missing.crt: no such file or directory" module=client
--- PASS: TestHttpClient (0.00s)
=== RUN   TestApiClientRequest
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=info msg="Device unauthorized; attempting reauthorization" module=client
time="2020-02-24T20:26:58Z" level=warning msg="Reauthorization failed with error: " module=client
time="2020-02-24T20:26:58Z" level=info msg="Device unauthorized; attempting reauthorization" module=client
--- PASS: TestApiClientRequest (0.00s)
=== RUN   TestClientConnectionTimeout
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
--- PASS: TestClientConnectionTimeout (0.02s)
=== RUN   TestHttpClientUrl
--- PASS: TestHttpClientUrl (0.00s)
=== RUN   TestCaLoading
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
--- PASS: TestCaLoading (0.00s)
=== RUN   TestEmptySystemCertPool
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
--- PASS: TestEmptySystemCertPool (0.00s)
=== RUN   TestExponentialBackoffTimeCalculation
--- PASS: TestExponentialBackoffTimeCalculation (0.00s)
=== RUN   TestUnMarshalErrorMessage
--- PASS: TestUnMarshalErrorMessage (0.00s)
=== RUN   TestFailoverAPICall
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=warning msg="Server \"fakeURL.404\" failed to serve request \"\". Attempting \"https://127.0.0.1:39595\"" module=client
--- PASS: TestFailoverAPICall (0.01s)
=== RUN   TestParseUpdateResponse
=== RUN   TestParseUpdateResponse/0
=== PAUSE TestParseUpdateResponse/0
=== RUN   TestParseUpdateResponse/1
=== PAUSE TestParseUpdateResponse/1
=== RUN   TestParseUpdateResponse/2
=== PAUSE TestParseUpdateResponse/2
=== RUN   TestParseUpdateResponse/3
=== PAUSE TestParseUpdateResponse/3
=== RUN   TestParseUpdateResponse/4
=== PAUSE TestParseUpdateResponse/4
=== RUN   TestParseUpdateResponse/5
=== PAUSE TestParseUpdateResponse/5
=== RUN   TestParseUpdateResponse/6
=== PAUSE TestParseUpdateResponse/6
=== RUN   TestParseUpdateResponse/7
=== PAUSE TestParseUpdateResponse/7
=== RUN   TestParseUpdateResponse/8
=== PAUSE TestParseUpdateResponse/8
=== CONT  TestParseUpdateResponse/0
=== CONT  TestParseUpdateResponse/8
=== CONT  TestParseUpdateResponse/7
=== CONT  TestParseUpdateResponse/6
=== CONT  TestParseUpdateResponse/5
=== CONT  TestParseUpdateResponse/4
=== CONT  TestParseUpdateResponse/3
=== CONT  TestParseUpdateResponse/2
=== CONT  TestParseUpdateResponse/1
--- PASS: TestParseUpdateResponse (0.00s)
    --- PASS: TestParseUpdateResponse/0 (0.00s)
    --- PASS: TestParseUpdateResponse/8 (0.00s)
    --- PASS: TestParseUpdateResponse/7 (0.00s)
    --- PASS: TestParseUpdateResponse/6 (0.00s)
    --- PASS: TestParseUpdateResponse/5 (0.00s)
    --- PASS: TestParseUpdateResponse/4 (0.00s)
    --- PASS: TestParseUpdateResponse/3 (0.00s)
    --- PASS: TestParseUpdateResponse/2 (0.00s)
    --- PASS: TestParseUpdateResponse/1 (0.00s)
=== RUN   Test_GetScheduledUpdate_errorParsingResponse_UpdateFailing
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
--- PASS: Test_GetScheduledUpdate_errorParsingResponse_UpdateFailing (0.00s)
=== RUN   Test_GetScheduledUpdate_responseMissingParameters_UpdateFailing
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
--- PASS: Test_GetScheduledUpdate_responseMissingParameters_UpdateFailing (0.00s)
=== RUN   Test_GetScheduledUpdate_ParsingResponseOK_updateSuccess
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=info msg="Correct request for getting image from: https://menderupdate.com [name: myapp-release-z-build-123; devices: [BBB]]" module=client_update
--- PASS: Test_GetScheduledUpdate_ParsingResponseOK_updateSuccess (0.00s)
=== RUN   Test_FetchUpdate_noContent_UpdateFailing
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=error msg="Image smaller than expected. Expected: 4096, received: 0" module=client_update
--- PASS: Test_FetchUpdate_noContent_UpdateFailing (0.00s)
=== RUN   Test_FetchUpdate_invalidRequest_UpdateFailing
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
time="2020-02-24T20:26:58Z" level=error msg="Can not fetch update image: Get broken-request: unsupported protocol scheme \"\"" module=client_update
--- PASS: Test_FetchUpdate_invalidRequest_UpdateFailing (0.00s)
=== RUN   Test_FetchUpdate_correctContent_UpdateFetched
time="2020-02-24T20:26:58Z" level=info msg="API Gateway certificate (in PEM format): \n-----BEGIN CERTIFICATE-----\nMIICEzCCAXygAwIBAgIQMIMChMLGrR+QvmQvpwAU6zANBgkqhkiG9w0BAQsFADAS\nMRAwDgYDVQQKEwdBY21lIENvMCAXDTcwMDEwMTAwMDAwMFoYDzIwODQwMTI5MTYw\nMDAwWjASMRAwDgYDVQQKEwdBY21lIENvMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCB\niQKBgQDuLnQAI3mDgey3VBzWnB2L39JUU4txjeVE6myuDqkM/uGlfjb9SjY1bIw4\niA5sBBZzHi3z0h1YV8QPuxEbi4nW91IJm2gsvvZhIrCHS3l6afab4pZBl2+XsDul\nrKBxKKtD1rGxlG4LjncdabFn9gvLZad2bSysqz/qTAUStTvqJQIDAQABo2gwZjAO\nBgNVHQ8BAf8EBAMCAqQwEwYDVR0lBAwwCgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw\nAwEB/zAuBgNVHREEJzAlggtleGFtcGxlLmNvbYcEfwAAAYcQAAAAAAAAAAAAAAAA\nAAAAATANBgkqhkiG9w0BAQsFAAOBgQCEcetwO59EWk7WiJsG4x8SY+UIAA+flUI9\ntyC4lNhbcF2Idq9greZwbYCqTTTr2XiRNSMLCOjKyI7ukPoPjo16ocHj+P3vZGfs\nh1fIw3cSS2OolhloGw/XM6RWPWtPAlGykKLciQrBru5NAPvCMsb/I1DAceTiotQM\nfblo6RBxUQ==\n-----END CERTIFICATE-----\n" module=client
time="2020-02-24T20:26:58Z" level=info msg="Issuer: [Acme Co], Valid from: 1970-01-01 00:00:00 +0000 UTC, Valid to: 2084-01-29 16:00:00 +0000 UTC" module=client
--- PASS: Test_FetchUpdate_correctContent_UpdateFetched (0.01s)
=== RUN   Test_UpdateApiClientError
time="2020-02-24T20:26:58Z" level=error msg="Can not fetch update image: foo" module=client_update
--- PASS: Test_UpdateApiClientError (0.00s)
=== RUN   TestMakeUpdateCheckRequest
--- PASS: TestMakeUpdateCheckRequest (0.00s)
    client_update_test.go:337: http://foo.bar/api/devices/v1/deployments/device/deployments/next
    client_update_test.go:347: http://foo.bar/api/devices/v1/deployments/device/deployments/next?artifact_name=foo
    client_update_test.go:358: http://foo.bar/api/devices/v1/deployments/device/deployments/next?artifact_name=foo&device_type=hammer
=== RUN   TestBrokenReadAndPartialDownload
=== RUN   TestBrokenReadAndPartialDownload/group
=== RUN   TestBrokenReadAndPartialDownload/group/success
=== PAUSE TestBrokenReadAndPartialDownload/group/success
=== RUN   TestBrokenReadAndPartialDownload/group/earlyRangeStart
=== PAUSE TestBrokenReadAndPartialDownload/group/earlyRangeStart
=== RUN   TestBrokenReadAndPartialDownload/group/lateRangeStart
=== PAUSE TestBrokenReadAndPartialDownload/group/lateRangeStart
=== RUN   TestBrokenReadAndPartialDownload/group/brokenContentLength
=== PAUSE TestBrokenReadAndPartialDownload/group/brokenContentLength
=== RUN   TestBrokenReadAndPartialDownload/group/missingContentLength
=== PAUSE TestBrokenReadAndPartialDownload/group/missingContentLength
=== RUN   TestBrokenReadAndPartialDownload/group/noPartialContentSupport
=== PAUSE TestBrokenReadAndPartialDownload/group/noPartialContentSupport
=== RUN   TestBrokenReadAndPartialDownload/group/emptyContentRange
=== PAUSE TestBrokenReadAndPartialDownload/group/emptyContentRange
=== RUN   TestBrokenReadAndPartialDownload/group/formattedButInvalidContentRange
=== PAUSE TestBrokenReadAndPartialDownload/group/formattedButInvalidContentRange
=== RUN   TestBrokenReadAndPartialDownload/group/improperlyFormattedContentRange
=== PAUSE TestBrokenReadAndPartialDownload/group/improperlyFormattedContentRange
=== RUN   TestBrokenReadAndPartialDownload/group/missingBytesContentRange
=== PAUSE TestBrokenReadAndPartialDownload/group/missingBytesContentRange
=== RUN   TestBrokenReadAndPartialDownload/group/missingContentRange
=== PAUSE TestBrokenReadAndPartialDownload/group/missingContentRange
=== RUN   TestBrokenReadAndPartialDownload/group/tooManyContentRanges
=== PAUSE TestBrokenReadAndPartialDownload/group/tooManyContentRanges
=== RUN   TestBrokenReadAndPartialDownload/group/garbledContentStart
=== PAUSE TestBrokenReadAndPartialDownload/group/garbledContentStart
=== RUN   TestBrokenReadAndPartialDownload/group/breakAfterShortRange
=== PAUSE TestBrokenReadAndPartialDownload/group/breakAfterShortRange
=== RUN   TestBrokenReadAndPartialDownload/group/serverDownAndUp
=== PAUSE TestBrokenReadAndPartialDownload/group/serverDownAndUp
=== RUN   TestBrokenReadAndPartialDownload/group/serverDown
=== PAUSE TestBrokenReadAndPartialDownload/group/serverDown
=== CONT  TestBrokenReadAndPartialDownload/group/success
=== CONT  TestBrokenReadAndPartialDownload/group/serverDown
=== CONT  TestBrokenReadAndPartialDownload/group/improperlyFormattedContentRange
=== CONT  TestBrokenReadAndPartialDownload/group/serverDownAndUp
time="2020-02-24T20:26:58Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:26:58Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:26:58Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:26:58Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:26:58Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:26:58Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:26:58Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:26:58Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:26:59Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:26:59Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:26:59Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:26:59Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:26:59Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:26:59Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:26:59Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:26:59Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:26:59Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:26:59Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:26:59Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:26:59Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:00Z" level=info msg="Attempting to resume artifact download from offset 3390" module=update_resumer
time="2020-02-24T20:27:00Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:00Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:00Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:00Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:00Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:00Z" level=info msg="Attempting to resume artifact download from offset 3390" module=update_resumer
time="2020-02-24T20:27:00Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:00Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:00Z" level=info msg="Attempting to resume artifact download from offset 3390" module=update_resumer
time="2020-02-24T20:27:00Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:00Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Download resume request failed: Get http://localhost:9768/update_resumer_test.go: dial tcp [::1]:9768: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:01Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:01Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:01Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Download resume request failed: Get http://localhost:9767/update_resumer_test.go: dial tcp [::1]:9767: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:01Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:01Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:03Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Attempting to resume artifact download from offset 6780" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Download resume request failed: Get http://localhost:9768/update_resumer_test.go: dial tcp [::1]:9768: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:03Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:03Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Download resume request failed: Get http://localhost:9767/update_resumer_test.go: dial tcp [::1]:9767: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:03Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:03Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:05Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Attempting to resume artifact download from offset 8475" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/formattedButInvalidContentRange
time="2020-02-24T20:27:05Z" level=info msg="Download resume request failed: Get http://localhost:9768/update_resumer_test.go: dial tcp [::1]:9768: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:05Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:05Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Download resume request failed: Get http://localhost:9767/update_resumer_test.go: dial tcp [::1]:9767: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:05Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:05Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:06Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:06Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:06Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:07Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Download resume request failed: Get http://localhost:9768/update_resumer_test.go: dial tcp [::1]:9768: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:07Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:07Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:07Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:07Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:08Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:08Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:08Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:10Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Download resume request failed: Get http://localhost:9768/update_resumer_test.go: dial tcp [::1]:9768: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:10Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Attempting to resume artifact download from offset 6780" module=update_resumer
time="2020-02-24T20:27:10Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:10Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:10Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:12Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:12Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:12Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:13Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:13Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:13Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:13Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:13Z" level=info msg="Download resume request failed: Get http://localhost:9768/update_resumer_test.go: dial tcp [::1]:9768: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:13Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:13Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:13Z" level=info msg="Attempting to resume artifact download from offset 8475" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/emptyContentRange
time="2020-02-24T20:27:13Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:13Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:14Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:14Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:14Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:14Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:14Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:14Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:15Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:15Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:15Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:16Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:16Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:16Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:16Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/noPartialContentSupport
time="2020-02-24T20:27:16Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:16Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:16Z" level=info msg="Download resume request failed: Get http://localhost:9768/update_resumer_test.go: dial tcp [::1]:9768: connect: connection refused" module=update_resumer
time="2020-02-24T20:27:16Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/missingContentLength
time="2020-02-24T20:27:16Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:16Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:16Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:16Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:17Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:17Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:17Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:17Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:17Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:17Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:17Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:17Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:17Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:18Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:18Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:18Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:18Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:18Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:18Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:18Z" level=info msg="Attempting to resume artifact download from offset 3390" module=update_resumer
time="2020-02-24T20:27:18Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:18Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:19Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:19Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:19Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:19Z" level=info msg="Attempting to resume artifact download from offset 5085" module=update_resumer
time="2020-02-24T20:27:19Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:19Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:20Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:20Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:20Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:20Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:20Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:20Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:21Z" level=info msg="Attempting to resume artifact download from offset 6780" module=update_resumer
time="2020-02-24T20:27:21Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:21Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:21Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:21Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:21Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:22Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:22Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:22Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:23Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:23Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/brokenContentLength
time="2020-02-24T20:27:23Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:23Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:23Z" level=info msg="Attempting to resume artifact download from offset 8475" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/lateRangeStart
time="2020-02-24T20:27:23Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:23Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:23Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:23Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:23Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:24Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:24Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:24Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:24Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:24Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:24Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:25Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:25Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:25Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:25Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:25Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:25Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:25Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:25Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:25Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:25Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:25Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:25Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:26Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:26Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:26Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:26Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:26Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:26Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:28Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:28Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:28Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:28Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:28Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:28Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:28Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:28Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:28Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:28Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:28Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:28Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:30Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:30Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:30Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:30Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:30Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:30Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:31Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:31Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/earlyRangeStart
time="2020-02-24T20:27:31Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:31Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:31Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:31Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:31Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:32Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:32Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:32Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:32Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:32Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:32Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:32Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:32Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:32Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:33Z" level=info msg="Attempting to resume artifact download from offset 3385" module=update_resumer
time="2020-02-24T20:27:33Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:33Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:34Z" level=info msg="Attempting to resume artifact download from offset 5075" module=update_resumer
time="2020-02-24T20:27:34Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:34Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:34Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:34Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/tooManyContentRanges
time="2020-02-24T20:27:34Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:34Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:35Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:35Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:35Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:35Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:35Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:35Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:35Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:35Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:35Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:36Z" level=info msg="Attempting to resume artifact download from offset 6765" module=update_resumer
time="2020-02-24T20:27:36Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:36Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:36Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:36Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:36Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:37Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:37Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:37Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:38Z" level=info msg="Attempting to resume artifact download from offset 8455" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/breakAfterShortRange
time="2020-02-24T20:27:38Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:38Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:38Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:38Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:38Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:38Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:38Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:38Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:39Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:39Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:39Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:39Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:39Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:39Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:40Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:40Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:40Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:41Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:41Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/garbledContentStart
time="2020-02-24T20:27:41Z" level=info msg="Attempting to resume artifact download from offset 3385" module=update_resumer
time="2020-02-24T20:27:41Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:41Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:41Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:41Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:41Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:41Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:41Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:41Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:41Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/missingBytesContentRange
time="2020-02-24T20:27:41Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:41Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:42Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:42Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:42Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:42Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:42Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:42Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:43Z" level=info msg="Attempting to resume artifact download from offset 5075" module=update_resumer
time="2020-02-24T20:27:43Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:43Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:43Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:43Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:43Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:43Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:43Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:43Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:43Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:43Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:43Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:44Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:44Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:44Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:44Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:44Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:44Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:45Z" level=info msg="Attempting to resume artifact download from offset 6765" module=update_resumer
time="2020-02-24T20:27:45Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:45Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:46Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:46Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:46Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:46Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:46Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:46Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:46Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:46Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:46Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:47Z" level=info msg="Attempting to resume artifact download from offset 8455" module=update_resumer
=== CONT  TestBrokenReadAndPartialDownload/group/missingContentRange
time="2020-02-24T20:27:47Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:47Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:48Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:48Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:48Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:48Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:48Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:48Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:48Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:48Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:48Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:49Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:49Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:49Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:49Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:49Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:49Z" level=info msg="Resuming download in 1s" module=update_resumer
time="2020-02-24T20:27:50Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:50Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:50Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:50Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:50Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:50Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:50Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:50Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:50Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:52Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:52Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:52Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:52Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:52Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:53Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:53Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:53Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:53Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:53Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:53Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:54Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:54Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:54Z" level=info msg="Resuming download in 2s" module=update_resumer
time="2020-02-24T20:27:56Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:56Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:56Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:56Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:56Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:56Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:56Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:56Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:56Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:59Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:59Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:59Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:59Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:27:59Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:27:59Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:27:59Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:28:02Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:28:02Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
time="2020-02-24T20:28:02Z" level=info msg="Resuming download in 3s" module=update_resumer
time="2020-02-24T20:28:05Z" level=info msg="Attempting to resume artifact download from offset 1695" module=update_resumer
time="2020-02-24T20:28:05Z" level=error msg="Download connection broken: unexpected EOF" module=update_resumer
--- PASS: TestBrokenReadAndPartialDownload (67.07s)
    --- PASS: TestBrokenReadAndPartialDownload/group (0.00s)
        --- PASS: TestBrokenReadAndPartialDownload/group/success (7.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/serverDownAndUp (15.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/improperlyFormattedContentRange (18.04s)
        --- PASS: TestBrokenReadAndPartialDownload/group/serverDown (18.04s)
        --- PASS: TestBrokenReadAndPartialDownload/group/formattedButInvalidContentRange (18.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/missingContentLength (7.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/emptyContentRange (18.03s)
        --- PASS: TestBrokenReadAndPartialDownload/group/noPartialContentSupport (18.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/earlyRangeStart (7.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/lateRangeStart (18.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/brokenContentLength (18.05s)
        --- PASS: TestBrokenReadAndPartialDownload/group/breakAfterShortRange (9.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/tooManyContentRanges (18.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/garbledContentStart (18.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/missingBytesContentRange (18.01s)
        --- PASS: TestBrokenReadAndPartialDownload/group/missingContentRange (18.02s)
PASS
ok  	github.com/mendersoftware/mender/client	67.318s
?   	github.com/mendersoftware/mender/client/test	[no test files]
=== RUN   TestMenderState
--- PASS: TestMenderState (0.00s)
PASS
ok  	github.com/mendersoftware/mender/datastore	0.048s
=== RUN   TestBlockDeviceFail
time="2020-02-24T20:26:58Z" level=info msg="opening device /dev/somefile for writing" module=block_device
--- PASS: TestBlockDeviceFail (0.00s)
=== RUN   TestBlockDeviceWrite
time="2020-02-24T20:26:58Z" level=info msg="opening device /tmp/mender-block-device-496085113/foo for writing" module=block_device
time="2020-02-24T20:26:58Z" level=info msg="partition /tmp/mender-block-device-496085113/foo size: 10" module=block_device
time="2020-02-24T20:26:58Z" level=info msg="opening device /tmp/mender-block-device-496085113/foo for writing" module=block_device
time="2020-02-24T20:26:58Z" level=info msg="partition /tmp/mender-block-device-496085113/foo size: 10" module=block_device
time="2020-02-24T20:26:58Z" level=error msg="written 10 out of 12 bytes to partition /tmp/mender-block-device-496085113/foo: no space left on device" module=block_device
--- PASS: TestBlockDeviceWrite (0.00s)
    block_device_test.go:44: block device size called: &{0xc000aca0c0}
    block_device_test.go:44: block device size called: &{0xc000aca1e0}
=== RUN   TestBlockDeviceSize
--- PASS: TestBlockDeviceSize (0.00s)
    block_device_test.go:44: block device size called: &{0xc000aca300}
    block_device_test.go:44: block device size called: &{0xc000aca360}
=== RUN   Test_EnvWrite_OSResponseOK_WritesOK
--- PASS: Test_EnvWrite_OSResponseOK_WritesOK (0.09s)
=== RUN   Test_EnvWrite_OSResponseError_Fails
--- PASS: Test_EnvWrite_OSResponseError_Fails (0.10s)
=== RUN   Test_EnvRead_HaveVariable_ReadsVariable
--- PASS: Test_EnvRead_HaveVariable_ReadsVariable (0.16s)
=== RUN   Test_EnvRead_HaveEnvWarning_FailsReading
time="2020-02-24T20:26:59Z" level=error msg="U-Boot variable malformed or error occurred" module=bootenv
time="2020-02-24T20:26:59Z" level=error msg="U-Boot variable malformed or error occurred" module=bootenv
time="2020-02-24T20:26:59Z" level=error msg="U-Boot variable malformed or error occurred" module=bootenv
time="2020-02-24T20:26:59Z" level=error msg="U-Boot variable malformed or error occurred" module=bootenv
--- PASS: Test_EnvRead_HaveEnvWarning_FailsReading (0.08s)
=== RUN   Test_EnvRead_NonExisting_FailsReading
time="2020-02-24T20:26:59Z" level=error msg="U-Boot variable malformed or error occurred" module=bootenv
time="2020-02-24T20:26:59Z" level=error msg="U-Boot variable malformed or error occurred" module=bootenv
time="2020-02-24T20:26:59Z" level=error msg="U-Boot variable malformed or error occurred" module=bootenv
time="2020-02-24T20:26:59Z" level=error msg="U-Boot variable malformed or error occurred" module=bootenv
--- PASS: Test_EnvRead_NonExisting_FailsReading (0.08s)
=== RUN   Test_EnvCanary
--- PASS: Test_EnvCanary (0.23s)
=== RUN   Test_PermissionDenied
time="2020-02-24T20:26:59Z" level=error msg="Could not execute fw_setenv:  exec: \"fw_setenv\": executable file not found in $PATH" module=bootenv
--- PASS: Test_PermissionDenied (0.00s)
=== RUN   TestChunkedCopy
--- PASS: TestChunkedCopy (0.00s)
=== RUN   Test_commitUpdate
time="2020-02-24T20:26:59Z" level=info msg="Committing update" module=dual_rootfs_device
--- PASS: Test_commitUpdate (0.00s)
=== RUN   Test_enableUpdatedPartition_wrongPartitinNumber_fails
--- PASS: Test_enableUpdatedPartition_wrongPartitinNumber_fails (0.00s)
=== RUN   Test_enableUpdatedPartition_correctPartitinNumber
time="2020-02-24T20:26:59Z" level=info msg="Enabling partition with new image installed to be a boot candidate: 2" module=dual_rootfs_device
time="2020-02-24T20:26:59Z" level=info msg="Enabling partition with new image installed to be a boot candidate: 2" module=dual_rootfs_device
--- PASS: Test_enableUpdatedPartition_correctPartitinNumber (0.01s)
=== RUN   Test_installUpdate_existingAndNonInactivePartition
time="2020-02-24T20:26:59Z" level=info msg="native sector size of block device inactivePart is 12, we will write in chunks of 1572864" module=dual_rootfs_device
time="2020-02-24T20:26:59Z" level=info msg="opening device inactivePart for writing" module=block_device
time="2020-02-24T20:26:59Z" level=info msg="partition inactivePart size: 12" module=block_device
time="2020-02-24T20:26:59Z" level=info msg="wrote 12/12 bytes of update to device inactivePart" module=dual_rootfs_device
time="2020-02-24T20:26:59Z" level=error msg="failed to read size of block device inactivePart: " module=dual_rootfs_device
--- PASS: Test_installUpdate_existingAndNonInactivePartition (0.00s)
=== RUN   Test_FetchUpdate_existingAndNonExistingUpdateFile
--- PASS: Test_FetchUpdate_existingAndNonExistingUpdateFile (0.00s)
=== RUN   Test_Rollback_OK
--- PASS: Test_Rollback_OK (0.00s)
=== RUN   TestDeviceVerifyReboot
time="2020-02-24T20:26:59Z" level=warning msg="Could not resolve path link: part1 Attempting to continue" module=partitions
time="2020-02-24T20:26:59Z" level=warning msg="Could not resolve path link: part2 Attempting to continue" module=partitions
time="2020-02-24T20:26:59Z" level=warning msg="Could not resolve path link: part1 Attempting to continue" module=partitions
time="2020-02-24T20:26:59Z" level=warning msg="Could not resolve path link: part2 Attempting to continue" module=partitions
time="2020-02-24T20:26:59Z" level=warning msg="Could not resolve path link: part1 Attempting to continue" module=partitions
time="2020-02-24T20:26:59Z" level=warning msg="Could not resolve path link: part2 Attempting to continue" module=partitions
--- PASS: TestDeviceVerifyReboot (0.01s)
=== RUN   TestInstall
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
--- PASS: TestInstall (0.00s)
=== RUN   TestInstallSigned
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
time="2020-02-24T20:26:59Z" level=warning msg="installer: installing signed artifact without verification as verification key is missing" module=installer
time="2020-02-24T20:26:59Z" level=info msg="installer: authenticated digital signature of artifact" module=installer
time="2020-02-24T20:26:59Z" level=info msg="installer: authenticated digital signature of artifact" module=installer
--- PASS: TestInstallSigned (0.01s)
=== RUN   TestInstallNoSignature
--- PASS: TestInstallNoSignature (0.00s)
=== RUN   TestInstallWithScripts
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
--- PASS: TestInstallWithScripts (0.00s)
=== RUN   TestCorrectUpdateProducerReturned
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
--- PASS: TestCorrectUpdateProducerReturned (0.01s)
=== RUN   TestMultiplePayloadsRejected
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
--- PASS: TestMultiplePayloadsRejected (0.00s)
=== RUN   TestMissingFeaturesRejected
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
time="2020-02-24T20:26:59Z" level=info msg="no public key was provided for authenticating the artifact" module=installer
--- PASS: TestMissingFeaturesRejected (0.01s)
=== RUN   TestStreamsTree
--- PASS: TestStreamsTree (0.47s)
=== RUN   TestModulesDownload
=== RUN   TestModulesDownload/Mender_download
=== RUN   TestModulesDownload/Module_download
=== RUN   TestModulesDownload/Module_download_failure
=== RUN   TestModulesDownload/Module_download_short_read_of_stream-next
=== RUN   TestModulesDownload/Module_download_short_read_of_stream
=== RUN   TestModulesDownload/Cannot_open_stream_file
=== RUN   TestModulesDownload/files_dir_blocked_by_file
=== RUN   TestModulesDownload/Mender_download_multiple_files
=== RUN   TestModulesDownload/Module_download_multiple_files
=== RUN   TestModulesDownload/Module_download_multiple_files,_downloads_only_one
=== RUN   TestModulesDownload/Module_downloads_two_entries,_but_one_file
=== RUN   TestModulesDownload/Module_download_doesn't_read_final_zero_entry
=== RUN   TestModulesDownload/Module_download_fails_final_exit
=== RUN   TestModulesDownload/Module_download_hangs
time="2020-02-24T20:27:09Z" level=error msg="Process 30031 timed out. Sending SIGTERM" module=modules
=== RUN   TestModulesDownload/Module_download_never_exits
time="2020-02-24T20:27:15Z" level=error msg="Process 31093 timed out. Sending SIGTERM" module=modules
--- PASS: TestModulesDownload (15.65s)
    --- PASS: TestModulesDownload/Mender_download (1.03s)
    --- PASS: TestModulesDownload/Module_download (0.08s)
    --- PASS: TestModulesDownload/Module_download_failure (0.04s)
    --- PASS: TestModulesDownload/Module_download_short_read_of_stream-next (0.03s)
    --- PASS: TestModulesDownload/Module_download_short_read_of_stream (0.07s)
    --- PASS: TestModulesDownload/Cannot_open_stream_file (0.03s)
    --- PASS: TestModulesDownload/files_dir_blocked_by_file (1.04s)
    --- PASS: TestModulesDownload/Mender_download_multiple_files (1.04s)
    --- PASS: TestModulesDownload/Module_download_multiple_files (0.11s)
    --- PASS: TestModulesDownload/Module_download_multiple_files,_downloads_only_one (1.05s)
    --- PASS: TestModulesDownload/Module_downloads_two_entries,_but_one_file (0.04s)
    --- PASS: TestModulesDownload/Module_download_doesn't_read_final_zero_entry (0.03s)
    --- PASS: TestModulesDownload/Module_download_fails_final_exit (0.05s)
    --- PASS: TestModulesDownload/Module_download_hangs (6.01s)
    --- PASS: TestModulesDownload/Module_download_never_exits (5.01s)
=== RUN   Test_GetInactive_HaveActivePartitionSet_ReturnsInactive
time="2020-02-24T20:27:15Z" level=warning msg="Could not resolve path link: /dev/mmc2 Attempting to continue" module=partitions
time="2020-02-24T20:27:15Z" level=warning msg="Could not resolve path link: /dev/mmc3 Attempting to continue" module=partitions
time="2020-02-24T20:27:15Z" level=warning msg="Could not resolve path link: /dev/mmc3 Attempting to continue" module=partitions
time="2020-02-24T20:27:15Z" level=warning msg="Could not resolve path link: /dev/mmc Attempting to continue" module=partitions
time="2020-02-24T20:27:15Z" level=warning msg="Could not resolve path link: /dev/mmc Attempting to continue" module=partitions
time="2020-02-24T20:27:15Z" level=warning msg="Could not resolve path link: /dev/mmc4 Attempting to continue" module=partitions
time="2020-02-24T20:27:15Z" level=warning msg="Could not resolve path link: /dev/mmc4 Attempting to continue" module=partitions
--- PASS: Test_GetInactive_HaveActivePartitionSet_ReturnsInactive (0.00s)
=== RUN   Test_GetMountRoot
--- PASS: Test_GetMountRoot (0.00s)
=== RUN   Test_getRootDevice_HaveDevice_ReturnsDevice
time="2020-02-24T20:27:15Z" level=error msg="Can not stat root device." module=partitions
--- PASS: Test_getRootDevice_HaveDevice_ReturnsDevice (0.00s)
=== RUN   Test_matchRootWithMout_HaveValidMount
--- PASS: Test_matchRootWithMout_HaveValidMount (0.00s)
=== RUN   Test_getActivePartition_noActiveInactiveSet
time="2020-02-24T20:27:15Z" level=error msg="Mounted root '/dev/mmc1' does not match boot environment mender_boot_part: 2" module=partitions
--- PASS: Test_getActivePartition_noActiveInactiveSet (0.34s)
=== RUN   Test_getAllMountedDevices
--- PASS: Test_getAllMountedDevices (0.00s)
=== RUN   TestMaybeResolveLink
time="2020-02-24T20:27:16Z" level=warning msg="Could not resolve path link: /dev/disk/by-partuuid Attempting to continue" module=partitions
--- PASS: TestMaybeResolveLink (0.00s)
PASS
ok  	github.com/mendersoftware/mender/installer	17.272s
=== RUN   TestStore
--- PASS: TestStore (0.00s)
=== RUN   TestExecutor
time="2020-02-24T20:26:57Z" level=error msg="statescript: ignoring script '/tmp/rootfs_scripts917401787/Download_Enter_00' being not executable" module=executor
time="2020-02-24T20:26:57Z" level=warning msg="script format mismatch: 'ArtifactInstall_Leave' will not be run " module=executor
time="2020-02-24T20:26:57Z" level=warning msg="script format mismatch: 'ArtifactInstall_Leave' will not be run " module=executor
time="2020-02-24T20:26:57Z" level=warning msg="script format mismatch: 'ArtifactInstall_Leave' will not be run " module=executor
time="2020-02-24T20:26:57Z" level=warning msg="script format mismatch: 'ArtifactInstall_Leave' will not be run " module=executor
time="2020-02-24T20:26:57Z" level=error msg="statescript: ignoring error executing 'ArtifactInstall_Leave_02': 1: exit status 1" module=executor
time="2020-02-24T20:26:57Z" level=warning msg="script format mismatch: 'ArtifactInstall_Leave' will not be run " module=executor
time="2020-02-24T20:26:57Z" level=warning msg="script format mismatch: 'ArtifactInstall_Leave_100' will not be run " module=executor
time="2020-02-24T20:26:57Z" level=warning msg="script format mismatch: 'ArtifactInstall_Leave' will not be run " module=executor
time="2020-02-24T20:26:57Z" level=warning msg="script format mismatch: 'ArtifactInstall_Leave_100' will not be run " module=executor
--- PASS: TestExecutor (10.30s)
=== RUN   TestVersion
--- PASS: TestVersion (0.00s)
=== RUN   TestReportScriptStatus
time="2020-02-24T20:27:07Z" level=warning msg="certificate verification skipped.." module=client
--- PASS: TestReportScriptStatus (0.03s)
=== RUN   TestDefaultConfiguration
time="2020-02-24T20:27:08Z" level=warning msg="No timeout interval set for the retry-scripts. Falling back to default: 1m0s" module=executor
time="2020-02-24T20:27:08Z" level=warning msg="No total time set for the retry-scripts' timeslot. Falling back to default: 30m0s" module=executor
--- PASS: TestDefaultConfiguration (0.00s)
=== RUN   TestReadVersion
--- PASS: TestReadVersion (0.00s)
    statescript_test.go:456: correct version file - no newline
    statescript_test.go:456: correct version file - newline
    statescript_test.go:456: incorrect version file - unwanted 'a' in file
PASS
ok  	github.com/mendersoftware/mender/statescript	10.355s
=== RUN   TestDBStore
time="2020-02-24T20:27:10Z" level=error msg="failed to open DB environment: mdb_env_open: no such file or directory" module=dbstore
--- PASS: TestDBStore (0.01s)
=== RUN   TestDirStore
--- PASS: TestDirStore (0.00s)
=== RUN   TestKeystore
time="2020-02-24T20:27:10Z" level=error msg="failed to load key: failed to decode block" module=keystore
--- PASS: TestKeystore (2.77s)
=== RUN   TestKeystoreLoadPem
--- PASS: TestKeystoreLoadPem (0.00s)
=== RUN   TestMemStore
--- PASS: TestMemStore (0.00s)
PASS
ok  	github.com/mendersoftware/mender/store	2.805s
?   	github.com/mendersoftware/mender/system	[no test files]
?   	github.com/mendersoftware/mender/system/testing	[no test files]
=== RUN   TestKeyValParser
--- PASS: TestKeyValParser (0.00s)
    kvparser_test.go:72: testing case: 0
    kvparser_test.go:72: testing case: 1
    kvparser_test.go:72: testing case: 2
=== RUN   TestLimitedWriter
--- PASS: TestLimitedWriter (0.00s)
=== RUN   TestProgress
--- PASS: TestProgress (1.00s)
PASS
ok  	github.com/mendersoftware/mender/utils	1.022s
FAIL
dh_auto_test: error: cd obj-x86_64-linux-gnu && go test -vet=off -v -p 4 github.com/mendersoftware/mender github.com/mendersoftware/mender/client github.com/mendersoftware/mender/client/test github.com/mendersoftware/mender/datastore github.com/mendersoftware/mender/installer github.com/mendersoftware/mender/statescript github.com/mendersoftware/mender/store github.com/mendersoftware/mender/system github.com/mendersoftware/mender/system/testing github.com/mendersoftware/mender/utils returned exit code 1
make[1]: Leaving directory '/<<PKGBUILDDIR>>'
   create-stamp debian/debhelper-build-stamp
 fakeroot debian/rules binary
dh binary --buildsystem=golang --with=golang
   dh_testroot -O--buildsystem=golang
   dh_prep -O--buildsystem=golang
   dh_installdirs -O--buildsystem=golang
   debian/rules override_dh_auto_install
make[1]: Entering directory '/<<PKGBUILDDIR>>'
dh_auto_install -- --no-source
	cd obj-x86_64-linux-gnu && mkdir -p /<<PKGBUILDDIR>>/debian/mender-client/usr
	cd obj-x86_64-linux-gnu && cp -r bin /<<PKGBUILDDIR>>/debian/mender-client/usr
make[1]: Leaving directory '/<<PKGBUILDDIR>>'
   dh_installdocs -O--buildsystem=golang
   dh_installchangelogs -O--buildsystem=golang
   dh_installexamples -O--buildsystem=golang
   dh_installinit -O--buildsystem=golang
   dh_installsystemd -O--buildsystem=golang
   dh_perl -O--buildsystem=golang
   dh_link -O--buildsystem=golang
   dh_strip_nondeterminism -O--buildsystem=golang
   dh_compress -O--buildsystem=golang
   dh_fixperms -O--buildsystem=golang
   dh_missing -O--buildsystem=golang
   dh_strip -O--buildsystem=golang
   dh_makeshlibs -O--buildsystem=golang
   dh_shlibdeps -O--buildsystem=golang
   dh_installdeb -O--buildsystem=golang
   dh_golang -O--buildsystem=golang
   dh_gencontrol -O--buildsystem=golang
   dh_md5sums -O--buildsystem=golang
   dh_builddeb -O--buildsystem=golang
dpkg-deb: building package 'mender-client-dbgsym' in '../mender-client-dbgsym_2.1.2-2_amd64.deb'.
dpkg-deb: building package 'mender-client' in '../mender-client_2.1.2-2_amd64.deb'.
 dpkg-genbuildinfo --build=binary
 dpkg-genchanges --build=binary >../mender-client_2.1.2-2_amd64.changes
dpkg-genchanges: info: binary-only upload (no source code included)
 dpkg-source --after-build .
dpkg-buildpackage: info: binary-only upload (no source included)
--------------------------------------------------------------------------------
Build finished at 2020-02-24T20:31:22Z

Finished
--------

I: Built successfully

+------------------------------------------------------------------------------+
| Changes                                                                      |
+------------------------------------------------------------------------------+


mender-client_2.1.2-2_amd64.changes:
------------------------------------

Format: 1.8
Date: Sat, 21 Dec 2019 21:09:25 +0100
Source: mender-client
Binary: mender-client mender-client-dbgsym
Architecture: amd64
Version: 2.1.2-2
Distribution: unstable
Urgency: medium
Maintainer: Debian Go Packaging Team <team+pkg-go@tracker.debian.org>
Changed-By: Andreas Henriksson <andreas@fatal.se>
Description:
 mender-client - Mender over-the-air software updater client.
Changes:
 mender-client (2.1.2-2) unstable; urgency=medium
 .
   * Add debian/patches/0003-Update-tests-to-use-artifact-v2.patch
     - Fixes FTBFS with mender-artifact >= 3.2 (See #947135)
Checksums-Sha1:
 3fd15c89e77d7e29dfb283a37e2e95b491e244cf 2120516 mender-client-dbgsym_2.1.2-2_amd64.deb
 c64a54fb2af6fd96489f03b0c27594cafdc8b081 6905 mender-client_2.1.2-2_amd64.buildinfo
 bd018498d1042ee8b0147daa95363607162c1d90 2328108 mender-client_2.1.2-2_amd64.deb
Checksums-Sha256:
 e72239e041321fddf2c9fca2757b55f249beb682a5b82bf86d75ca1cb964609b 2120516 mender-client-dbgsym_2.1.2-2_amd64.deb
 736009aa34b5cc2174ffae1c03e4d7320987826961fd793d8b865f66b85e3a81 6905 mender-client_2.1.2-2_amd64.buildinfo
 0d8cd514629e4155c52545da2cb420e8828d5c832f98f96c57c730db47838310 2328108 mender-client_2.1.2-2_amd64.deb
Files:
 119ede54da0b8c4d00a52f551319356a 2120516 debug optional mender-client-dbgsym_2.1.2-2_amd64.deb
 450d6a35055b750649de2a0399ca5b74 6905 devel optional mender-client_2.1.2-2_amd64.buildinfo
 e70bf7b26d481bcd2d76a4b124d610bc 2328108 devel optional mender-client_2.1.2-2_amd64.deb

+------------------------------------------------------------------------------+
| Buildinfo                                                                    |
+------------------------------------------------------------------------------+

Format: 1.0
Source: mender-client
Binary: mender-client
Architecture: amd64
Version: 2.1.2-2
Checksums-Md5:
 119ede54da0b8c4d00a52f551319356a 2120516 mender-client-dbgsym_2.1.2-2_amd64.deb
 e70bf7b26d481bcd2d76a4b124d610bc 2328108 mender-client_2.1.2-2_amd64.deb
Checksums-Sha1:
 3fd15c89e77d7e29dfb283a37e2e95b491e244cf 2120516 mender-client-dbgsym_2.1.2-2_amd64.deb
 bd018498d1042ee8b0147daa95363607162c1d90 2328108 mender-client_2.1.2-2_amd64.deb
Checksums-Sha256:
 e72239e041321fddf2c9fca2757b55f249beb682a5b82bf86d75ca1cb964609b 2120516 mender-client-dbgsym_2.1.2-2_amd64.deb
 0d8cd514629e4155c52545da2cb420e8828d5c832f98f96c57c730db47838310 2328108 mender-client_2.1.2-2_amd64.deb
Build-Origin: Debian
Build-Architecture: amd64
Build-Date: Mon, 24 Feb 2020 20:31:21 +0000
Build-Path: /<<PKGBUILDDIR>>
Installed-Build-Depends:
 autoconf (= 2.69-11.1),
 automake (= 1:1.16.1-4),
 autopoint (= 0.19.8.1-10),
 autotools-dev (= 20180224.1),
 base-files (= 11),
 base-passwd (= 3.5.47),
 bash (= 5.0-5),
 binutils (= 2.34-3),
 binutils-common (= 2.34-3),
 binutils-x86-64-linux-gnu (= 2.34-3),
 bsdmainutils (= 11.1.2+b1),
 bsdutils (= 1:2.34-0.1),
 build-essential (= 12.8),
 bzip2 (= 1.0.8-2),
 ca-certificates (= 20190110),
 clang-8 (= 1:8.0.1-7),
 coreutils (= 8.30-3+b1),
 cpp (= 4:9.2.1-3.1),
 cpp-9 (= 9.2.1-29),
 dash (= 0.5.10.2-6),
 debconf (= 1.5.73),
 debhelper (= 12.9),
 debianutils (= 4.9.1),
 dh-autoreconf (= 19),
 dh-golang (= 1.46),
 dh-strip-nondeterminism (= 1.6.3-2),
 diffutils (= 1:3.7-3),
 dpkg (= 1.19.7),
 dpkg-dev (= 1.19.7),
 dwz (= 0.13-5),
 fdisk (= 2.34-0.1),
 file (= 1:5.38-4),
 findutils (= 4.7.0-1),
 g++ (= 4:9.2.1-3.1),
 g++-9 (= 9.2.1-29),
 gcc (= 4:9.2.1-3.1),
 gcc-10-base (= 10-20200222-1),
 gcc-8-base (= 8.3.0-29),
 gcc-9 (= 9.2.1-29),
 gcc-9-base (= 9.2.1-29),
 gettext (= 0.19.8.1-10),
 gettext-base (= 0.19.8.1-10),
 golang-1.13-go (= 1.13.8-1),
 golang-1.13-src (= 1.13.8-1),
 golang-any (= 2:1.13~1),
 golang-github-bmatsuo-lmdb-go-dev (= 1.8.0+git20170215.a14b5a3-2),
 golang-github-cpuguy83-go-md2man-dev (= 1.0.10+ds-1),
 golang-github-davecgh-go-spew-dev (= 1.1.1-2),
 golang-github-kr-pretty-dev (= 0.1.0-1),
 golang-github-kr-pty-dev (= 1.1.6-1),
 golang-github-kr-text-dev (= 0.1.0-1),
 golang-github-mendersoftware-log-dev (= 0.0~git20180403.f608c95-2),
 golang-github-mendersoftware-mender-artifact-dev (= 3.2.1-1),
 golang-github-mendersoftware-mendertesting-dev (= 0.0~git20180410.9e728b5-2),
 golang-github-mendersoftware-scopestack-dev (= 0.0~git20180403.c2f5599-2),
 golang-github-pkg-errors-dev (= 0.8.1-1),
 golang-github-pmezard-go-difflib-dev (= 1.0.0-2),
 golang-github-remyoudompheng-go-liblzma-dev (= 0.0~git20190506.81bf2d4-2),
 golang-github-russross-blackfriday-dev (= 1.5.2+git20190616.a925a15-1),
 golang-github-shurcool-sanitized-anchor-name-dev (= 1.0.0-1),
 golang-github-sirupsen-logrus-dev (= 1.4.2-1),
 golang-github-stretchr-objx-dev (= 0.1.1+git20180825.ef50b0d-1),
 golang-github-stretchr-testify-dev (= 1.4.0+ds-1),
 golang-github-ungerik-go-sysfs-dev (= 0.0~git20170424.9c991ee-2),
 golang-github-urfave-cli-dev (= 1.22.2-4),
 golang-go (= 2:1.13~1),
 golang-golang-x-net-dev (= 1:0.0+git20200219.4628272+dfsg-1),
 golang-golang-x-sys-dev (= 0.0~git20200219.cb0a6d8-1),
 golang-golang-x-text-dev (= 0.3.2-3),
 golang-gopkg-check.v1-dev (= 0.0+git20180628.788fd78-1),
 golang-gopkg-yaml.v2-dev (= 2.2.8-1),
 golang-logrus-dev (= 1.3.0-1),
 golang-src (= 2:1.13~1),
 grep (= 3.4-1),
 groff-base (= 1.22.4-4),
 gzip (= 1.9-3+b1),
 hostname (= 3.23),
 init-system-helpers (= 1.57),
 intltool-debian (= 0.35.0+20060710.5),
 lib32gcc-s1 (= 10-20200222-1),
 lib32gcc1 (= 1:10-20200222-1),
 lib32stdc++6 (= 10-20200222-1),
 libacl1 (= 2.2.53-5),
 libarchive-zip-perl (= 1.67-1),
 libasan5 (= 9.2.1-29),
 libatomic1 (= 10-20200222-1),
 libattr1 (= 1:2.4.48-5),
 libaudit-common (= 1:2.8.5-2),
 libaudit1 (= 1:2.8.5-2+b1),
 libbinutils (= 2.34-3),
 libblkid1 (= 2.34-0.1),
 libbsd0 (= 0.10.0-1),
 libbz2-1.0 (= 1.0.8-2),
 libc-bin (= 2.29-10),
 libc-dev-bin (= 2.29-10),
 libc6 (= 2.29-10),
 libc6-dev (= 2.29-10),
 libc6-i386 (= 2.29-10),
 libcap-ng0 (= 0.7.9-2.1+b1),
 libcc1-0 (= 10-20200222-1),
 libclang-common-8-dev (= 1:8.0.1-7),
 libclang1-8 (= 1:8.0.1-7),
 libcroco3 (= 0.6.13-1),
 libcrypt-dev (= 1:4.4.10-10),
 libcrypt1 (= 1:4.4.10-10),
 libctf-nobfd0 (= 2.34-3),
 libctf0 (= 2.34-3),
 libdb5.3 (= 5.3.28+dfsg1-0.6),
 libdebconfclient0 (= 0.251),
 libdebhelper-perl (= 12.9),
 libdpkg-perl (= 1.19.7),
 libedit2 (= 3.1-20191231-1),
 libelf1 (= 0.176-1.1),
 libfdisk1 (= 2.34-0.1),
 libffi7 (= 3.3-3),
 libfile-stripnondeterminism-perl (= 1.6.3-2),
 libgc1c2 (= 1:7.6.4-0.4),
 libgcc-8-dev (= 8.3.0-29),
 libgcc-9-dev (= 9.2.1-29),
 libgcc-s1 (= 10-20200222-1),
 libgcc1 (= 1:10-20200222-1),
 libgcrypt20 (= 1.8.5-5),
 libgdbm-compat4 (= 1.18.1-5),
 libgdbm6 (= 1.18.1-5),
 libglib2.0-0 (= 2.62.4-2),
 libgmp10 (= 2:6.2.0+dfsg-4),
 libgomp1 (= 10-20200222-1),
 libgpg-error0 (= 1.37-1),
 libicu63 (= 63.2-2),
 libisl22 (= 0.22.1-1),
 libitm1 (= 10-20200222-1),
 libllvm8 (= 1:8.0.1-7),
 liblsan0 (= 10-20200222-1),
 liblz4-1 (= 1.9.2-2),
 liblzma-dev (= 5.2.4-1+b1),
 liblzma5 (= 5.2.4-1+b1),
 libmagic-mgc (= 1:5.38-4),
 libmagic1 (= 1:5.38-4),
 libmount1 (= 2.34-0.1),
 libmpc3 (= 1.1.0-1),
 libmpfr6 (= 4.0.2-1),
 libmpx2 (= 8.3.0-29),
 libncursesw6 (= 6.1+20191019-1),
 libobjc-8-dev (= 8.3.0-29),
 libobjc4 (= 10-20200222-1),
 libpam-modules (= 1.3.1-5),
 libpam-modules-bin (= 1.3.1-5),
 libpam-runtime (= 1.3.1-5),
 libpam0g (= 1.3.1-5),
 libpcre2-8-0 (= 10.34-7),
 libpcre3 (= 2:8.39-12+b1),
 libperl5.30 (= 5.30.0-9),
 libpipeline1 (= 1.5.2-2),
 libquadmath0 (= 10-20200222-1),
 libseccomp2 (= 2.4.2-2),
 libselinux1 (= 3.0-1+b1),
 libsigsegv2 (= 2.12-2),
 libsmartcols1 (= 2.34-0.1),
 libssl1.1 (= 1.1.1d-2),
 libstdc++-8-dev (= 8.3.0-29),
 libstdc++-9-dev (= 9.2.1-29),
 libstdc++6 (= 10-20200222-1),
 libsub-override-perl (= 0.09-2),
 libsystemd0 (= 244.3-1),
 libtinfo6 (= 6.1+20191019-1),
 libtool (= 2.4.6-13),
 libtsan0 (= 10-20200222-1),
 libubsan1 (= 10-20200222-1),
 libuchardet0 (= 0.0.6-3),
 libudev1 (= 244.3-1),
 libunistring2 (= 0.9.10-2),
 libuuid1 (= 2.34-0.1),
 libxml2 (= 2.9.10+dfsg-3),
 linux-libc-dev (= 5.4.19-1),
 login (= 1:4.8.1-1),
 lsb-base (= 11.1.0),
 m4 (= 1.4.18-4),
 make (= 4.2.1-1.2),
 man-db (= 2.9.0-2),
 mawk (= 1.3.4.20200120-2),
 ncurses-base (= 6.1+20191019-1),
 ncurses-bin (= 6.1+20191019-1),
 openssl (= 1.1.1d-2),
 patch (= 2.7.6-6),
 perl (= 5.30.0-9),
 perl-base (= 5.30.0-9),
 perl-modules-5.30 (= 5.30.0-9),
 po-debconf (= 1.0.21),
 sed (= 4.7-1),
 sensible-utils (= 0.0.12+nmu1),
 sysvinit-utils (= 2.96-2.1),
 tar (= 1.30+dfsg-6+b1),
 util-linux (= 2.34-0.1),
 xz-utils (= 5.2.4-1+b1),
 zlib1g (= 1:1.2.11.dfsg-1.2)
Environment:
 DEB_BUILD_OPTIONS="parallel=4"
 LANG="C.UTF-8"
 LC_ALL="C.UTF-8"
 SOURCE_DATE_EPOCH="1576958965"


+------------------------------------------------------------------------------+
| Package contents                                                             |
+------------------------------------------------------------------------------+


mender-client-dbgsym_2.1.2-2_amd64.deb
--------------------------------------

 new Debian package, version 2.0.
 size 2120516 bytes: control archive=536 bytes.
     380 bytes,    12 lines      control              
     106 bytes,     1 lines      md5sums              
 Package: mender-client-dbgsym
 Source: mender-client
 Version: 2.1.2-2
 Auto-Built-Package: debug-symbols
 Architecture: amd64
 Maintainer: Debian Go Packaging Team <team+pkg-go@tracker.debian.org>
 Installed-Size: 2713
 Depends: mender-client (= 2.1.2-2)
 Section: debug
 Priority: optional
 Description: debug symbols for mender-client
 Build-Ids: ad2b5b1c60de40013eaa06b6006ea4da8e91ea6b

drwxr-xr-x root/root         0 2019-12-21 20:09 ./
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/lib/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/lib/debug/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/lib/debug/.build-id/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/lib/debug/.build-id/ad/
-rw-r--r-- root/root   2767040 2019-12-21 20:09 ./usr/lib/debug/.build-id/ad/2b5b1c60de40013eaa06b6006ea4da8e91ea6b.debug
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/doc/
lrwxrwxrwx root/root         0 2019-12-21 20:09 ./usr/share/doc/mender-client-dbgsym -> mender-client


mender-client_2.1.2-2_amd64.deb
-------------------------------

 new Debian package, version 2.0.
 size 2328108 bytes: control archive=2848 bytes.
    3459 bytes,    55 lines      control              
    1125 bytes,    13 lines      md5sums              
    1357 bytes,    32 lines   *  postinst             #!/bin/sh
     649 bytes,    21 lines   *  postrm               #!/bin/sh
     227 bytes,     7 lines   *  prerm                #!/bin/sh
 Package: mender-client
 Version: 2.1.2-2
 Architecture: amd64
 Maintainer: Debian Go Packaging Team <team+pkg-go@tracker.debian.org>
 Installed-Size: 7526
 Depends: libc6 (>= 2.14), liblzma5 (>= 5.1.1alpha+20120614)
 Recommends: ca-certificates, u-boot-tools, mount, procps, systemd-sysv
 Built-Using: golang-1.13 (= 1.13.8-1), golang-github-bmatsuo-lmdb-go (= 1.8.0+git20170215.a14b5a3-2), golang-github-davecgh-go-spew (= 1.1.1-2), golang-github-mendersoftware-log (= 0.0~git20180403.f608c95-2), golang-github-mendersoftware-mender-artifact (= 3.2.1-1), golang-github-mendersoftware-scopestack (= 0.0~git20180403.c2f5599-2), golang-github-pkg-errors (= 0.8.1-1), golang-github-pmezard-go-difflib (= 1.0.0-2), golang-github-remyoudompheng-go-liblzma (= 0.0~git20190506.81bf2d4-2), golang-github-ungerik-go-sysfs (= 0.0~git20170424.9c991ee-2), golang-golang-x-net (= 1:0.0+git20200219.4628272+dfsg-1), golang-golang-x-sys (= 0.0~git20200219.cb0a6d8-1), golang-golang-x-text (= 0.3.2-3), golang-logrus (= 1.4.2-1), golang-objx (= 0.1.1+git20180825.ef50b0d-1), golang-testify (= 1.4.0+ds-1), golang-yaml.v2 (= 2.2.8-1)
 Section: devel
 Priority: optional
 Homepage: https://github.com/mendersoftware/mender
 Description: Mender over-the-air software updater client.
  Mender: over-the-air updater for embedded Linux devices
  .
  Mender is an open source over-the-air (OTA) software updater for embedded
  Linux devices. Mender comprises a client running at the embedded device, as
  well as a server that manages deployments across many devices.
  .
  Embedded product teams often end up creating homegrown updaters
  at the last minute due to the need to fix bugs in field-deployed
  devices. However, the most important requirement for an embedded update
  process is robustness, for example loss of power at any time should not
  brick a device. This creates a challenge given the time constraints to
  develop and maintain a homegrown updater.
  .
  Mender aims to address this challenge with a robust and easy to use
  updater for embedded Linux devices, which is open source and available
  to anyone.
  .
  Robustness is ensured with atomic image-based deployments using a dual
  A/B rootfs partition layout. This makes it always possible to roll
  back to a working state, even when losing power at any time during the
  update process.
  .
  Ease of use is addressed with an intuitive UI, comprehensive documentation
  (https://docs.mender.io/), a meta layer for the Yocto Project
  (https://github.com/mendersoftware/meta-mender) for easy integration
  into existing environments, and high quality software (see the test
  coverage badge).
  .
  This repository contains the Mender client updater, which can be run in
  standalone mode (manually triggered through its command line interface)
  or managed mode (connected to the Mender server).
  .
  Mender not only provides the client-side updater, but also the backend and
  UI for managing deployments as open source. The Mender server is designed
  as a microservices architecture and comprises several repositories.
  .
  To start using Mender, we recommend that you begin with the Getting
  started section in the Mender documentation (https://docs.mender.io/).
  .
  In order to support rollback, the Mender client depends on integration
  with U-Boot and the partition layout. It is therefore most easily
  built as part of your Yocto Project image by using the meta layer for
  the Yocto Project (https://github.com/mendersoftware/meta-mender).

drwxr-xr-x root/root         0 2019-12-21 20:09 ./
drwxr-xr-x root/root         0 2019-12-21 20:09 ./etc/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./etc/mender/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./lib/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./lib/systemd/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./lib/systemd/system/
-rw-r--r-- root/root       255 2019-05-28 15:08 ./lib/systemd/system/mender-client.service
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/bin/
-rwxr-xr-x root/root   7662528 2019-12-21 20:09 ./usr/bin/mender
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/doc/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/doc/mender-client/
-rw-r--r-- root/root      4072 2019-05-28 15:09 ./usr/share/doc/mender-client/README.Debian
-rw-r--r-- root/root      1177 2019-12-21 20:09 ./usr/share/doc/mender-client/changelog.Debian.gz
-rw-r--r-- root/root       678 2019-05-28 15:09 ./usr/share/doc/mender-client/copyright
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/doc/mender-client/examples/
-rwxr-xr-x root/root      1408 2019-12-04 14:45 ./usr/share/doc/mender-client/examples/mender-device-identity
-rwxr-xr-x root/root       870 2019-12-04 14:45 ./usr/share/doc/mender-client/examples/mender-inventory-bootloader-integration
-rwxr-xr-x root/root       354 2019-12-04 14:45 ./usr/share/doc/mender-client/examples/mender-inventory-hostinfo
-rwxr-xr-x root/root      1475 2019-12-04 14:45 ./usr/share/doc/mender-client/examples/mender-inventory-network
-rwxr-xr-x root/root       841 2019-12-04 14:45 ./usr/share/doc/mender-client/examples/mender-inventory-os
-rwxr-xr-x root/root       143 2019-12-04 14:45 ./usr/share/doc/mender-client/examples/mender-inventory-rootfs-type
-rw-r--r-- root/root       208 2019-12-04 14:45 ./usr/share/doc/mender-client/examples/mender.conf.demo
-rw-r--r-- root/root       216 2019-12-04 14:45 ./usr/share/doc/mender-client/examples/mender.conf.production
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/mender/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/mender/identity/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/mender/inventory/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/mender/modules/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./usr/share/mender/modules/v3/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./var/
drwxr-xr-x root/root         0 2019-12-21 20:09 ./var/lib/
lrwxrwxrwx root/root         0 2019-12-21 20:09 ./var/lib/mender -> /data/mender


+------------------------------------------------------------------------------+
| Post Build                                                                   |
+------------------------------------------------------------------------------+


+------------------------------------------------------------------------------+
| Cleanup                                                                      |
+------------------------------------------------------------------------------+

Purging /<<BUILDDIR>>
Not cleaning session: cloned chroot in use

+------------------------------------------------------------------------------+
| Summary                                                                      |
+------------------------------------------------------------------------------+

Build Architecture: amd64
Build Type: binary
Build-Space: 108584
Build-Time: 324
Distribution: unstable
Host Architecture: amd64
Install-Time: 76
Job: mender-client_2.1.2-2
Machine Architecture: amd64
Package: mender-client
Package-Time: 435
Source-Version: 2.1.2-2
Space: 108584
Status: successful
Version: 2.1.2-2
--------------------------------------------------------------------------------
Finished at 2020-02-24T20:31:22Z
Build needed 00:07:15, 108584k disk space
DC-Status: OK 438.648617039s
